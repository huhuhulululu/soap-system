(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Mi(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ye={},cn=[],ht=()=>{},$r=()=>!1,Cs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),$i=e=>e.startsWith("onUpdate:"),je=Object.assign,ji=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Wl=Object.prototype.hasOwnProperty,fe=(e,t)=>Wl.call(e,t),te=Array.isArray,un=e=>qn(e)==="[object Map]",Is=e=>qn(e)==="[object Set]",bo=e=>qn(e)==="[object Date]",se=e=>typeof e=="function",Le=e=>typeof e=="string",lt=e=>typeof e=="symbol",he=e=>e!==null&&typeof e=="object",jr=e=>(he(e)||se(e))&&se(e.then)&&se(e.catch),Br=Object.prototype.toString,qn=e=>Br.call(e),ql=e=>qn(e).slice(8,-1),Fr=e=>qn(e)==="[object Object]",Es=e=>Le(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Dn=Mi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_s=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},zl=/-\w/g,st=_s(e=>e.replace(zl,t=>t.slice(1).toUpperCase())),Xl=/\B([A-Z])/g,tn=_s(e=>e.replace(Xl,"-$1").toLowerCase()),Ds=_s(e=>e.charAt(0).toUpperCase()+e.slice(1)),Zs=_s(e=>e?`on${Ds(e)}`:""),Ht=(e,t)=>!Object.is(e,t),ns=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Hr=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},As=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let wo;const Ls=()=>wo||(wo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yt(e){if(te(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=Le(s)?Zl(s):Yt(s);if(i)for(const o in i)t[o]=i[o]}return t}else if(Le(e)||he(e))return e}const Yl=/;(?![^(]*\))/g,Ql=/:([^]+)/,Jl=/\/\*[^]*?\*\//g;function Zl(e){const t={};return e.replace(Jl,"").split(Yl).forEach(n=>{if(n){const s=n.split(Ql);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function _e(e){let t="";if(Le(e))t=e;else if(te(e))for(let n=0;n<e.length;n++){const s=_e(e[n]);s&&(t+=s+" ")}else if(he(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const ec="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tc=Mi(ec);function Ur(e){return!!e||e===""}function nc(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=ks(e[s],t[s]);return n}function ks(e,t){if(e===t)return!0;let n=bo(e),s=bo(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=lt(e),s=lt(t),n||s)return e===t;if(n=te(e),s=te(t),n||s)return n&&s?nc(e,t):!1;if(n=he(e),s=he(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const r in e){const a=e.hasOwnProperty(r),l=t.hasOwnProperty(r);if(a&&!l||!a&&l||!ks(e[r],t[r]))return!1}}return String(e)===String(t)}function sc(e,t){return e.findIndex(n=>ks(n,t))}const Gr=e=>!!(e&&e.__v_isRef===!0),G=e=>Le(e)?e:e==null?"":te(e)||he(e)&&(e.toString===Br||!se(e.toString))?Gr(e)?G(e.value):JSON.stringify(e,Kr,2):String(e),Kr=(e,t)=>Gr(t)?Kr(e,t.value):un(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],o)=>(n[ei(s,o)+" =>"]=i,n),{})}:Is(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>ei(n))}:lt(t)?ei(t):he(t)&&!te(t)&&!Fr(t)?String(t):t,ei=(e,t="")=>{var n;return lt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fe;class Vr{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fe,!t&&Fe&&(this.index=(Fe.scopes||(Fe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Fe;try{return Fe=this,t()}finally{Fe=n}}}on(){++this._on===1&&(this.prevScope=Fe,Fe=this)}off(){this._on>0&&--this._on===0&&(Fe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Wr(e){return new Vr(e)}function qr(){return Fe}function ic(e,t=!1){Fe&&Fe.cleanups.push(e)}let be;const ti=new WeakSet;class zr{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fe&&Fe.active&&Fe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ti.has(this)&&(ti.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Yr(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,xo(this),Qr(this);const t=be,n=rt;be=this,rt=!0;try{return this.fn()}finally{Jr(this),be=t,rt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Hi(t);this.deps=this.depsTail=void 0,xo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ti.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yi(this)&&this.run()}get dirty(){return yi(this)}}let Xr=0,An,Ln;function Yr(e,t=!1){if(e.flags|=8,t){e.next=Ln,Ln=e;return}e.next=An,An=e}function Bi(){Xr++}function Fi(){if(--Xr>0)return;if(Ln){let t=Ln;for(Ln=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;An;){let t=An;for(An=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Qr(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Jr(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Hi(s),oc(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function yi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Zr(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Zr(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===jn)||(e.globalVersion=jn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!yi(e))))return;e.flags|=2;const t=e.dep,n=be,s=rt;be=e,rt=!0;try{Qr(e);const i=e.fn(e._value);(t.version===0||Ht(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{be=n,rt=s,Jr(e),e.flags&=-3}}function Hi(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Hi(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function oc(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let rt=!0;const ea=[];function Dt(){ea.push(rt),rt=!1}function At(){const e=ea.pop();rt=e===void 0?!0:e}function xo(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=be;be=void 0;try{t()}finally{be=n}}}let jn=0;class rc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ui{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!be||!rt||be===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==be)n=this.activeLink=new rc(be,this),be.deps?(n.prevDep=be.depsTail,be.depsTail.nextDep=n,be.depsTail=n):be.deps=be.depsTail=n,ta(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=be.depsTail,n.nextDep=void 0,be.depsTail.nextDep=n,be.depsTail=n,be.deps===n&&(be.deps=s)}return n}trigger(t){this.version++,jn++,this.notify(t)}notify(t){Bi();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Fi()}}}function ta(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)ta(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const as=new WeakMap,Qt=Symbol(""),vi=Symbol(""),Bn=Symbol("");function He(e,t,n){if(rt&&be){let s=as.get(e);s||as.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new Ui),i.map=s,i.key=n),i.track()}}function Tt(e,t,n,s,i,o){const r=as.get(e);if(!r){jn++;return}const a=l=>{l&&l.trigger()};if(Bi(),t==="clear")r.forEach(a);else{const l=te(e),d=l&&Es(n);if(l&&n==="length"){const u=Number(s);r.forEach((c,f)=>{(f==="length"||f===Bn||!lt(f)&&f>=u)&&a(c)})}else switch((n!==void 0||r.has(void 0))&&a(r.get(n)),d&&a(r.get(Bn)),t){case"add":l?d&&a(r.get("length")):(a(r.get(Qt)),un(e)&&a(r.get(vi)));break;case"delete":l||(a(r.get(Qt)),un(e)&&a(r.get(vi)));break;case"set":un(e)&&a(r.get(Qt));break}}Fi()}function ac(e,t){const n=as.get(e);return n&&n.get(t)}function nn(e){const t=le(e);return t===e?t:(He(t,"iterate",Bn),et(e)?t:t.map(ct))}function Ns(e){return He(e=le(e),"iterate",Bn),e}function $t(e,t){return Lt(e)?mn(yt(e)?ct(t):t):ct(t)}const lc={__proto__:null,[Symbol.iterator](){return ni(this,Symbol.iterator,e=>$t(this,e))},concat(...e){return nn(this).concat(...e.map(t=>te(t)?nn(t):t))},entries(){return ni(this,"entries",e=>(e[1]=$t(this,e[1]),e))},every(e,t){return wt(this,"every",e,t,void 0,arguments)},filter(e,t){return wt(this,"filter",e,t,n=>n.map(s=>$t(this,s)),arguments)},find(e,t){return wt(this,"find",e,t,n=>$t(this,n),arguments)},findIndex(e,t){return wt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return wt(this,"findLast",e,t,n=>$t(this,n),arguments)},findLastIndex(e,t){return wt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return wt(this,"forEach",e,t,void 0,arguments)},includes(...e){return si(this,"includes",e)},indexOf(...e){return si(this,"indexOf",e)},join(e){return nn(this).join(e)},lastIndexOf(...e){return si(this,"lastIndexOf",e)},map(e,t){return wt(this,"map",e,t,void 0,arguments)},pop(){return Pn(this,"pop")},push(...e){return Pn(this,"push",e)},reduce(e,...t){return Po(this,"reduce",e,t)},reduceRight(e,...t){return Po(this,"reduceRight",e,t)},shift(){return Pn(this,"shift")},some(e,t){return wt(this,"some",e,t,void 0,arguments)},splice(...e){return Pn(this,"splice",e)},toReversed(){return nn(this).toReversed()},toSorted(e){return nn(this).toSorted(e)},toSpliced(...e){return nn(this).toSpliced(...e)},unshift(...e){return Pn(this,"unshift",e)},values(){return ni(this,"values",e=>$t(this,e))}};function ni(e,t,n){const s=Ns(e),i=s[t]();return s!==e&&!et(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.done||(o.value=n(o.value)),o}),i}const cc=Array.prototype;function wt(e,t,n,s,i,o){const r=Ns(e),a=r!==e&&!et(e),l=r[t];if(l!==cc[t]){const c=l.apply(e,o);return a?ct(c):c}let d=n;r!==e&&(a?d=function(c,f){return n.call(this,$t(e,c),f,e)}:n.length>2&&(d=function(c,f){return n.call(this,c,f,e)}));const u=l.call(r,d,s);return a&&i?i(u):u}function Po(e,t,n,s){const i=Ns(e);let o=n;return i!==e&&(et(e)?n.length>3&&(o=function(r,a,l){return n.call(this,r,a,l,e)}):o=function(r,a,l){return n.call(this,r,$t(e,a),l,e)}),i[t](o,...s)}function si(e,t,n){const s=le(e);He(s,"iterate",Bn);const i=s[t](...n);return(i===-1||i===!1)&&Os(n[0])?(n[0]=le(n[0]),s[t](...n)):i}function Pn(e,t,n=[]){Dt(),Bi();const s=le(e)[t].apply(e,n);return Fi(),At(),s}const uc=Mi("__proto__,__v_isRef,__isVue"),na=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(lt));function dc(e){lt(e)||(e=String(e));const t=le(this);return He(t,"has",e),t.hasOwnProperty(e)}class sa{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return s===(i?o?xc:aa:o?ra:oa).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const r=te(t);if(!i){let l;if(r&&(l=lc[n]))return l;if(n==="hasOwnProperty")return dc}const a=Reflect.get(t,n,xe(t)?t:s);if((lt(n)?na.has(n):uc(n))||(i||He(t,"get",n),o))return a;if(xe(a)){const l=r&&Es(n)?a:a.value;return i&&he(l)?wi(l):l}return he(a)?i?wi(a):vn(a):a}}class ia extends sa{constructor(t=!1){super(!1,t)}set(t,n,s,i){let o=t[n];const r=te(t)&&Es(n);if(!this._isShallow){const d=Lt(o);if(!et(s)&&!Lt(s)&&(o=le(o),s=le(s)),!r&&xe(o)&&!xe(s))return d||(o.value=s),!0}const a=r?Number(n)<t.length:fe(t,n),l=Reflect.set(t,n,s,xe(t)?t:i);return t===le(i)&&(a?Ht(s,o)&&Tt(t,"set",n,s):Tt(t,"add",n,s)),l}deleteProperty(t,n){const s=fe(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&Tt(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!lt(n)||!na.has(n))&&He(t,"has",n),s}ownKeys(t){return He(t,"iterate",te(t)?"length":Qt),Reflect.ownKeys(t)}}class fc extends sa{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const pc=new ia,mc=new fc,gc=new ia(!0);const bi=e=>e,Zn=e=>Reflect.getPrototypeOf(e);function hc(e,t,n){return function(...s){const i=this.__v_raw,o=le(i),r=un(o),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,d=i[e](...s),u=n?bi:t?mn:ct;return!t&&He(o,"iterate",l?vi:Qt),je(Object.create(d),{next(){const{value:c,done:f}=d.next();return f?{value:c,done:f}:{value:a?[u(c[0]),u(c[1])]:u(c),done:f}}})}}function es(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function yc(e,t){const n={get(i){const o=this.__v_raw,r=le(o),a=le(i);e||(Ht(i,a)&&He(r,"get",i),He(r,"get",a));const{has:l}=Zn(r),d=t?bi:e?mn:ct;if(l.call(r,i))return d(o.get(i));if(l.call(r,a))return d(o.get(a));o!==r&&o.get(i)},get size(){const i=this.__v_raw;return!e&&He(le(i),"iterate",Qt),i.size},has(i){const o=this.__v_raw,r=le(o),a=le(i);return e||(Ht(i,a)&&He(r,"has",i),He(r,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const r=this,a=r.__v_raw,l=le(a),d=t?bi:e?mn:ct;return!e&&He(l,"iterate",Qt),a.forEach((u,c)=>i.call(o,d(u),d(c),r))}};return je(n,e?{add:es("add"),set:es("set"),delete:es("delete"),clear:es("clear")}:{add(i){!t&&!et(i)&&!Lt(i)&&(i=le(i));const o=le(this);return Zn(o).has.call(o,i)||(o.add(i),Tt(o,"add",i,i)),this},set(i,o){!t&&!et(o)&&!Lt(o)&&(o=le(o));const r=le(this),{has:a,get:l}=Zn(r);let d=a.call(r,i);d||(i=le(i),d=a.call(r,i));const u=l.call(r,i);return r.set(i,o),d?Ht(o,u)&&Tt(r,"set",i,o):Tt(r,"add",i,o),this},delete(i){const o=le(this),{has:r,get:a}=Zn(o);let l=r.call(o,i);l||(i=le(i),l=r.call(o,i)),a&&a.call(o,i);const d=o.delete(i);return l&&Tt(o,"delete",i,void 0),d},clear(){const i=le(this),o=i.size!==0,r=i.clear();return o&&Tt(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=hc(i,e,t)}),n}function Gi(e,t){const n=yc(e,t);return(s,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(fe(n,i)&&i in s?n:s,i,o)}const vc={get:Gi(!1,!1)},bc={get:Gi(!1,!0)},wc={get:Gi(!0,!1)};const oa=new WeakMap,ra=new WeakMap,aa=new WeakMap,xc=new WeakMap;function Pc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sc(e){return e.__v_skip||!Object.isExtensible(e)?0:Pc(ql(e))}function vn(e){return Lt(e)?e:Ki(e,!1,pc,vc,oa)}function la(e){return Ki(e,!1,gc,bc,ra)}function wi(e){return Ki(e,!0,mc,wc,aa)}function Ki(e,t,n,s,i){if(!he(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Sc(e);if(o===0)return e;const r=i.get(e);if(r)return r;const a=new Proxy(e,o===2?s:n);return i.set(e,a),a}function yt(e){return Lt(e)?yt(e.__v_raw):!!(e&&e.__v_isReactive)}function Lt(e){return!!(e&&e.__v_isReadonly)}function et(e){return!!(e&&e.__v_isShallow)}function Os(e){return e?!!e.__v_raw:!1}function le(e){const t=e&&e.__v_raw;return t?le(t):e}function Vi(e){return!fe(e,"__v_skip")&&Object.isExtensible(e)&&Hr(e,"__v_skip",!0),e}const ct=e=>he(e)?vn(e):e,mn=e=>he(e)?wi(e):e;function xe(e){return e?e.__v_isRef===!0:!1}function Se(e){return ca(e,!1)}function Tc(e){return ca(e,!0)}function ca(e,t){return xe(e)?e:new Cc(e,t)}class Cc{constructor(t,n){this.dep=new Ui,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:le(t),this._value=n?t:ct(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||et(t)||Lt(t);t=s?t:le(t),Ht(t,n)&&(this._rawValue=t,this._value=s?t:ct(t),this.dep.trigger())}}function ue(e){return xe(e)?e.value:e}const Ic={get:(e,t,n)=>t==="__v_raw"?e:ue(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return xe(i)&&!xe(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function ua(e){return yt(e)?e:new Proxy(e,Ic)}function Ec(e){const t=te(e)?new Array(e.length):{};for(const n in e)t[n]=da(e,n);return t}class _c{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0,this._raw=le(t);let i=!0,o=t;if(!te(t)||!Es(String(n)))do i=!Os(o)||et(o);while(i&&(o=o.__v_raw));this._shallow=i}get value(){let t=this._object[this._key];return this._shallow&&(t=ue(t)),this._value=t===void 0?this._defaultValue:t}set value(t){if(this._shallow&&xe(this._raw[this._key])){const n=this._object[this._key];if(xe(n)){n.value=t;return}}this._object[this._key]=t}get dep(){return ac(this._raw,this._key)}}class Dc{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Ac(e,t,n){return xe(e)?e:se(e)?new Dc(e):he(e)&&arguments.length>1?da(e,t,n):Se(e)}function da(e,t,n){return new _c(e,t,n)}class Lc{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ui(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=jn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&be!==this)return Yr(this,!0),!0}get value(){const t=this.dep.track();return Zr(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function kc(e,t,n=!1){let s,i;return se(e)?s=e:(s=e.get,i=e.set),new Lc(s,i,n)}const ts={},ls=new WeakMap;let Wt;function Nc(e,t=!1,n=Wt){if(n){let s=ls.get(n);s||ls.set(n,s=[]),s.push(e)}}function Oc(e,t,n=ye){const{immediate:s,deep:i,once:o,scheduler:r,augmentJob:a,call:l}=n,d=I=>i?I:et(I)||i===!1||i===0?Ct(I,1):Ct(I);let u,c,f,p,g=!1,m=!1;if(xe(e)?(c=()=>e.value,g=et(e)):yt(e)?(c=()=>d(e),g=!0):te(e)?(m=!0,g=e.some(I=>yt(I)||et(I)),c=()=>e.map(I=>{if(xe(I))return I.value;if(yt(I))return d(I);if(se(I))return l?l(I,2):I()})):se(e)?t?c=l?()=>l(e,2):e:c=()=>{if(f){Dt();try{f()}finally{At()}}const I=Wt;Wt=u;try{return l?l(e,3,[p]):e(p)}finally{Wt=I}}:c=ht,t&&i){const I=c,O=i===!0?1/0:i;c=()=>Ct(I(),O)}const w=qr(),x=()=>{u.stop(),w&&w.active&&ji(w.effects,u)};if(o&&t){const I=t;t=(...O)=>{I(...O),x()}}let b=m?new Array(e.length).fill(ts):ts;const S=I=>{if(!(!(u.flags&1)||!u.dirty&&!I))if(t){const O=u.run();if(i||g||(m?O.some((T,M)=>Ht(T,b[M])):Ht(O,b))){f&&f();const T=Wt;Wt=u;try{const M=[O,b===ts?void 0:m&&b[0]===ts?[]:b,p];b=O,l?l(t,3,M):t(...M)}finally{Wt=T}}}else u.run()};return a&&a(S),u=new zr(c),u.scheduler=r?()=>r(S,!1):S,p=I=>Nc(I,!1,u),f=u.onStop=()=>{const I=ls.get(u);if(I){if(l)l(I,4);else for(const O of I)O();ls.delete(u)}},t?s?S(!0):b=u.run():r?r(S.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function Ct(e,t=1/0,n){if(t<=0||!he(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,xe(e))Ct(e.value,t,n);else if(te(e))for(let s=0;s<e.length;s++)Ct(e[s],t,n);else if(Is(e)||un(e))e.forEach(s=>{Ct(s,t,n)});else if(Fr(e)){for(const s in e)Ct(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Ct(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zn(e,t,n,s){try{return s?e(...s):e()}catch(i){Rs(i,t,n)}}function vt(e,t,n,s){if(se(e)){const i=zn(e,t,n,s);return i&&jr(i)&&i.catch(o=>{Rs(o,t,n)}),i}if(te(e)){const i=[];for(let o=0;o<e.length;o++)i.push(vt(e[o],t,n,s));return i}}function Rs(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||ye;if(t){let a=t.parent;const l=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,l,d)===!1)return}a=a.parent}if(o){Dt(),zn(o,null,10,[e,l,d]),At();return}}Rc(e,n,i,s,r)}function Rc(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const qe=[];let pt=-1;const dn=[];let jt=null,an=0;const fa=Promise.resolve();let cs=null;function Ms(e){const t=cs||fa;return e?t.then(this?e.bind(this):e):t}function Mc(e){let t=pt+1,n=qe.length;for(;t<n;){const s=t+n>>>1,i=qe[s],o=Fn(i);o<e||o===e&&i.flags&2?t=s+1:n=s}return t}function Wi(e){if(!(e.flags&1)){const t=Fn(e),n=qe[qe.length-1];!n||!(e.flags&2)&&t>=Fn(n)?qe.push(e):qe.splice(Mc(t),0,e),e.flags|=1,pa()}}function pa(){cs||(cs=fa.then(ga))}function $c(e){te(e)?dn.push(...e):jt&&e.id===-1?jt.splice(an+1,0,e):e.flags&1||(dn.push(e),e.flags|=1),pa()}function So(e,t,n=pt+1){for(;n<qe.length;n++){const s=qe[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;qe.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ma(e){if(dn.length){const t=[...new Set(dn)].sort((n,s)=>Fn(n)-Fn(s));if(dn.length=0,jt){jt.push(...t);return}for(jt=t,an=0;an<jt.length;an++){const n=jt[an];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}jt=null,an=0}}const Fn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ga(e){try{for(pt=0;pt<qe.length;pt++){const t=qe[pt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),zn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;pt<qe.length;pt++){const t=qe[pt];t&&(t.flags&=-2)}pt=-1,qe.length=0,ma(),cs=null,(qe.length||dn.length)&&ga()}}let $e=null,ha=null;function us(e){const t=$e;return $e=e,ha=e&&e.type.__scopeId||null,t}function qi(e,t=$e,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&ps(-1);const o=us(t);let r;try{r=e(...i)}finally{us(o),s._d&&ps(1)}return r};return s._n=!0,s._c=!0,s._d=!0,s}function It(e,t){if($e===null)return e;const n=Fs($e),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,r,a,l=ye]=t[i];o&&(se(o)&&(o={mounted:o,updated:o}),o.deep&&Ct(r),s.push({dir:o,instance:n,value:r,oldValue:void 0,arg:a,modifiers:l}))}return e}function Kt(e,t,n,s){const i=e.dirs,o=t&&t.dirs;for(let r=0;r<i.length;r++){const a=i[r];o&&(a.oldValue=o[r].value);let l=a.dir[s];l&&(Dt(),vt(l,n,8,[e.el,a,e,t]),At())}}function ss(e,t){if(Ue){let n=Ue.provides;const s=Ue.parent&&Ue.parent.provides;s===n&&(n=Ue.provides=Object.create(s)),n[e]=t}}function at(e,t,n=!1){const s=Ga();if(s||Jt){let i=Jt?Jt._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&se(t)?t.call(s&&s.proxy):t}}function jc(){return!!(Ga()||Jt)}const Bc=Symbol.for("v-scx"),Fc=()=>at(Bc);function Hc(e,t){return zi(e,null,t)}function kn(e,t,n){return zi(e,t,n)}function zi(e,t,n=ye){const{immediate:s,deep:i,flush:o,once:r}=n,a=je({},n),l=t&&s||!t&&o!=="post";let d;if(Kn){if(o==="sync"){const p=Fc();d=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=ht,p.resume=ht,p.pause=ht,p}}const u=Ue;a.call=(p,g,m)=>vt(p,u,g,m);let c=!1;o==="post"?a.scheduler=p=>{Qe(p,u&&u.suspense)}:o!=="sync"&&(c=!0,a.scheduler=(p,g)=>{g?p():Wi(p)}),a.augmentJob=p=>{t&&(p.flags|=4),c&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=Oc(e,t,a);return Kn&&(d?d.push(f):l&&f()),f}function Uc(e,t,n){const s=this.proxy,i=Le(e)?e.includes(".")?ya(s,e):()=>s[e]:e.bind(s,s);let o;se(t)?o=t:(o=t.handler,n=t);const r=Xn(this),a=zi(i,o.bind(s),n);return r(),a}function ya(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const Gc=Symbol("_vte"),Kc=e=>e.__isTeleport,Vc=Symbol("_leaveCb");function Xi(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Xi(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function va(e,t){return se(e)?je({name:e.name},t,{setup:e}):e}function ba(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ds=new WeakMap;function Nn(e,t,n,s,i=!1){if(te(e)){e.forEach((g,m)=>Nn(g,t&&(te(t)?t[m]:t),n,s,i));return}if(fn(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Nn(e,t,n,s.component.subTree);return}const o=s.shapeFlag&4?Fs(s.component):s.el,r=i?null:o,{i:a,r:l}=e,d=t&&t.r,u=a.refs===ye?a.refs={}:a.refs,c=a.setupState,f=le(c),p=c===ye?$r:g=>fe(f,g);if(d!=null&&d!==l){if(To(t),Le(d))u[d]=null,p(d)&&(c[d]=null);else if(xe(d)){d.value=null;const g=t;g.k&&(u[g.k]=null)}}if(se(l))zn(l,a,12,[r,u]);else{const g=Le(l),m=xe(l);if(g||m){const w=()=>{if(e.f){const x=g?p(l)?c[l]:u[l]:l.value;if(i)te(x)&&ji(x,o);else if(te(x))x.includes(o)||x.push(o);else if(g)u[l]=[o],p(l)&&(c[l]=u[l]);else{const b=[o];l.value=b,e.k&&(u[e.k]=b)}}else g?(u[l]=r,p(l)&&(c[l]=r)):m&&(l.value=r,e.k&&(u[e.k]=r))};if(r){const x=()=>{w(),ds.delete(e)};x.id=-1,ds.set(e,x),Qe(x,n)}else To(e),w()}}}function To(e){const t=ds.get(e);t&&(t.flags|=8,ds.delete(e))}Ls().requestIdleCallback;Ls().cancelIdleCallback;const fn=e=>!!e.type.__asyncLoader,wa=e=>e.type.__isKeepAlive;function Wc(e,t){xa(e,"a",t)}function qc(e,t){xa(e,"da",t)}function xa(e,t,n=Ue){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if($s(t,s,n),n){let i=n.parent;for(;i&&i.parent;)wa(i.parent.vnode)&&zc(s,t,n,i),i=i.parent}}function zc(e,t,n,s){const i=$s(t,e,s,!0);Qi(()=>{ji(s[t],i)},n)}function $s(e,t,n=Ue,s=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{Dt();const a=Xn(n),l=vt(t,n,e,r);return a(),At(),l});return s?i.unshift(o):i.push(o),o}}const Nt=e=>(t,n=Ue)=>{(!Kn||e==="sp")&&$s(e,(...s)=>t(...s),n)},Xc=Nt("bm"),Yi=Nt("m"),Yc=Nt("bu"),Qc=Nt("u"),Jc=Nt("bum"),Qi=Nt("um"),Zc=Nt("sp"),eu=Nt("rtg"),tu=Nt("rtc");function Pa(e,t=Ue){$s("ec",e,t)}const nu="components";function Co(e,t){return iu(nu,e,!0,t)||e}const su=Symbol.for("v-ndc");function iu(e,t,n=!0,s=!1){const i=$e||Ue;if(i){const o=i.type;{const a=Gu(o,!1);if(a&&(a===t||a===st(t)||a===Ds(st(t))))return o}const r=Io(i[e]||o[e],t)||Io(i.appContext[e],t);return!r&&s?o:r}}function Io(e,t){return e&&(e[t]||e[st(t)]||e[Ds(st(t))])}function _t(e,t,n,s){let i;const o=n,r=te(e);if(r||Le(e)){const a=r&&yt(e);let l=!1,d=!1;a&&(l=!et(e),d=Lt(e),e=Ns(e)),i=new Array(e.length);for(let u=0,c=e.length;u<c;u++)i[u]=t(l?d?mn(ct(e[u])):ct(e[u]):e[u],u,void 0,o)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o)}else if(he(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,o));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,d=a.length;l<d;l++){const u=a[l];i[l]=t(e[u],u,l,o)}}else i=[];return i}function ou(e,t,n={},s,i){if($e.ce||$e.parent&&fn($e.parent)&&$e.parent.ce){const d=Object.keys(n).length>0;return K(),Un(Ee,null,[Te("slot",n,s)],d?-2:64)}let o=e[t];o&&o._c&&(o._d=!1),K();const r=o&&Sa(o(n)),a=n.key||r&&r.key,l=Un(Ee,{key:(a&&!lt(a)?a:`_${t}`)+(!r&&s?"_fb":"")},r||[],r&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function Sa(e){return e.some(t=>Gn(t)?!(t.type===kt||t.type===Ee&&!Sa(t.children)):!0)?e:null}const xi=e=>e?Ka(e)?Fs(e):xi(e.parent):null,On=je(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>xi(e.parent),$root:e=>xi(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ca(e),$forceUpdate:e=>e.f||(e.f=()=>{Wi(e.update)}),$nextTick:e=>e.n||(e.n=Ms.bind(e.proxy)),$watch:e=>Uc.bind(e)}),ii=(e,t)=>e!==ye&&!e.__isScriptSetup&&fe(e,t),ru={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:o,accessCache:r,type:a,appContext:l}=e;if(t[0]!=="$"){const f=r[t];if(f!==void 0)switch(f){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(ii(s,t))return r[t]=1,s[t];if(i!==ye&&fe(i,t))return r[t]=2,i[t];if(fe(o,t))return r[t]=3,o[t];if(n!==ye&&fe(n,t))return r[t]=4,n[t];Pi&&(r[t]=0)}}const d=On[t];let u,c;if(d)return t==="$attrs"&&He(e.attrs,"get",""),d(e);if((u=a.__cssModules)&&(u=u[t]))return u;if(n!==ye&&fe(n,t))return r[t]=4,n[t];if(c=l.config.globalProperties,fe(c,t))return c[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:o}=e;return ii(i,t)?(i[t]=n,!0):s!==ye&&fe(s,t)?(s[t]=n,!0):fe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,props:o,type:r}},a){let l;return!!(n[a]||e!==ye&&a[0]!=="$"&&fe(e,a)||ii(t,a)||fe(o,a)||fe(s,a)||fe(On,a)||fe(i.config.globalProperties,a)||(l=r.__cssModules)&&l[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:fe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Eo(e){return te(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Pi=!0;function au(e){const t=Ca(e),n=e.proxy,s=e.ctx;Pi=!1,t.beforeCreate&&_o(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:r,watch:a,provide:l,inject:d,created:u,beforeMount:c,mounted:f,beforeUpdate:p,updated:g,activated:m,deactivated:w,beforeDestroy:x,beforeUnmount:b,destroyed:S,unmounted:I,render:O,renderTracked:T,renderTriggered:M,errorCaptured:L,serverPrefetch:_,expose:j,inheritAttrs:B,components:q,directives:ee,filters:oe}=t;if(d&&lu(d,s,null),r)for(const z in r){const Q=r[z];se(Q)&&(s[z]=Q.bind(n))}if(i){const z=i.call(n,n);he(z)&&(e.data=vn(z))}if(Pi=!0,o)for(const z in o){const Q=o[z],Ce=se(Q)?Q.bind(n,n):se(Q.get)?Q.get.bind(n,n):ht,me=!se(Q)&&se(Q.set)?Q.set.bind(n):ht,Pe=ae({get:Ce,set:me});Object.defineProperty(s,z,{enumerable:!0,configurable:!0,get:()=>Pe.value,set:ve=>Pe.value=ve})}if(a)for(const z in a)Ta(a[z],s,n,z);if(l){const z=se(l)?l.call(n):l;Reflect.ownKeys(z).forEach(Q=>{ss(Q,z[Q])})}u&&_o(u,e,"c");function ne(z,Q){te(Q)?Q.forEach(Ce=>z(Ce.bind(n))):Q&&z(Q.bind(n))}if(ne(Xc,c),ne(Yi,f),ne(Yc,p),ne(Qc,g),ne(Wc,m),ne(qc,w),ne(Pa,L),ne(tu,T),ne(eu,M),ne(Jc,b),ne(Qi,I),ne(Zc,_),te(j))if(j.length){const z=e.exposed||(e.exposed={});j.forEach(Q=>{Object.defineProperty(z,Q,{get:()=>n[Q],set:Ce=>n[Q]=Ce,enumerable:!0})})}else e.exposed||(e.exposed={});O&&e.render===ht&&(e.render=O),B!=null&&(e.inheritAttrs=B),q&&(e.components=q),ee&&(e.directives=ee),_&&ba(e)}function lu(e,t,n=ht){te(e)&&(e=Si(e));for(const s in e){const i=e[s];let o;he(i)?"default"in i?o=at(i.from||s,i.default,!0):o=at(i.from||s):o=at(i),xe(o)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):t[s]=o}}function _o(e,t,n){vt(te(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ta(e,t,n,s){let i=s.includes(".")?ya(n,s):()=>n[s];if(Le(e)){const o=t[e];se(o)&&kn(i,o)}else if(se(e))kn(i,e.bind(n));else if(he(e))if(te(e))e.forEach(o=>Ta(o,t,n,s));else{const o=se(e.handler)?e.handler.bind(n):t[e.handler];se(o)&&kn(i,o,e)}}function Ca(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(d=>fs(l,d,r,!0)),fs(l,t,r)),he(t)&&o.set(t,l),l}function fs(e,t,n,s=!1){const{mixins:i,extends:o}=t;o&&fs(e,o,n,!0),i&&i.forEach(r=>fs(e,r,n,!0));for(const r in t)if(!(s&&r==="expose")){const a=cu[r]||n&&n[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const cu={data:Do,props:Ao,emits:Ao,methods:_n,computed:_n,beforeCreate:Ve,created:Ve,beforeMount:Ve,mounted:Ve,beforeUpdate:Ve,updated:Ve,beforeDestroy:Ve,beforeUnmount:Ve,destroyed:Ve,unmounted:Ve,activated:Ve,deactivated:Ve,errorCaptured:Ve,serverPrefetch:Ve,components:_n,directives:_n,watch:du,provide:Do,inject:uu};function Do(e,t){return t?e?function(){return je(se(e)?e.call(this,this):e,se(t)?t.call(this,this):t)}:t:e}function uu(e,t){return _n(Si(e),Si(t))}function Si(e){if(te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ve(e,t){return e?[...new Set([].concat(e,t))]:t}function _n(e,t){return e?je(Object.create(null),e,t):t}function Ao(e,t){return e?te(e)&&te(t)?[...new Set([...e,...t])]:je(Object.create(null),Eo(e),Eo(t??{})):t}function du(e,t){if(!e)return t;if(!t)return e;const n=je(Object.create(null),e);for(const s in t)n[s]=Ve(e[s],t[s]);return n}function Ia(){return{app:null,config:{isNativeTag:$r,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fu=0;function pu(e,t){return function(s,i=null){se(s)||(s=je({},s)),i!=null&&!he(i)&&(i=null);const o=Ia(),r=new WeakSet,a=[];let l=!1;const d=o.app={_uid:fu++,_component:s,_props:i,_container:null,_context:o,_instance:null,version:Vu,get config(){return o.config},set config(u){},use(u,...c){return r.has(u)||(u&&se(u.install)?(r.add(u),u.install(d,...c)):se(u)&&(r.add(u),u(d,...c))),d},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),d},component(u,c){return c?(o.components[u]=c,d):o.components[u]},directive(u,c){return c?(o.directives[u]=c,d):o.directives[u]},mount(u,c,f){if(!l){const p=d._ceVNode||Te(s,i);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),e(p,u,f),l=!0,d._container=u,u.__vue_app__=d,Fs(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(vt(a,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(u,c){return o.provides[u]=c,d},runWithContext(u){const c=Jt;Jt=d;try{return u()}finally{Jt=c}}};return d}}let Jt=null;const mu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${st(t)}Modifiers`]||e[`${tn(t)}Modifiers`];function gu(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||ye;let i=n;const o=t.startsWith("update:"),r=o&&mu(s,t.slice(7));r&&(r.trim&&(i=n.map(u=>Le(u)?u.trim():u)),r.number&&(i=n.map(As)));let a,l=s[a=Zs(t)]||s[a=Zs(st(t))];!l&&o&&(l=s[a=Zs(tn(t))]),l&&vt(l,e,6,i);const d=s[a+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,vt(d,e,6,i)}}const hu=new WeakMap;function Ea(e,t,n=!1){const s=n?hu:t.emitsCache,i=s.get(e);if(i!==void 0)return i;const o=e.emits;let r={},a=!1;if(!se(e)){const l=d=>{const u=Ea(d,t,!0);u&&(a=!0,je(r,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(he(e)&&s.set(e,null),null):(te(o)?o.forEach(l=>r[l]=null):je(r,o),he(e)&&s.set(e,r),r)}function js(e,t){return!e||!Cs(t)?!1:(t=t.slice(2).replace(/Once$/,""),fe(e,t[0].toLowerCase()+t.slice(1))||fe(e,tn(t))||fe(e,t))}function Lo(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[o],slots:r,attrs:a,emit:l,render:d,renderCache:u,props:c,data:f,setupState:p,ctx:g,inheritAttrs:m}=e,w=us(e);let x,b;try{if(n.shapeFlag&4){const I=i||s,O=I;x=mt(d.call(O,I,u,c,p,f,g)),b=a}else{const I=t;x=mt(I.length>1?I(c,{attrs:a,slots:r,emit:l}):I(c,null)),b=t.props?a:yu(a)}}catch(I){Rn.length=0,Rs(I,e,1),x=Te(kt)}let S=x;if(b&&m!==!1){const I=Object.keys(b),{shapeFlag:O}=S;I.length&&O&7&&(o&&I.some($i)&&(b=vu(b,o)),S=gn(S,b,!1,!0))}return n.dirs&&(S=gn(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&Xi(S,n.transition),x=S,us(w),x}const yu=e=>{let t;for(const n in e)(n==="class"||n==="style"||Cs(n))&&((t||(t={}))[n]=e[n]);return t},vu=(e,t)=>{const n={};for(const s in e)(!$i(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function bu(e,t,n){const{props:s,children:i,component:o}=e,{props:r,children:a,patchFlag:l}=t,d=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?ko(s,r,d):!!r;if(l&8){const u=t.dynamicProps;for(let c=0;c<u.length;c++){const f=u[c];if(r[f]!==s[f]&&!js(d,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===r?!1:s?r?ko(s,r,d):!0:!!r;return!1}function ko(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const o=s[i];if(t[o]!==e[o]&&!js(n,o))return!0}return!1}function wu({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const _a={},Da=()=>Object.create(_a),Aa=e=>Object.getPrototypeOf(e)===_a;function xu(e,t,n,s=!1){const i={},o=Da();e.propsDefaults=Object.create(null),La(e,t,i,o);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);n?e.props=s?i:la(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function Pu(e,t,n,s){const{props:i,attrs:o,vnode:{patchFlag:r}}=e,a=le(i),[l]=e.propsOptions;let d=!1;if((s||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let c=0;c<u.length;c++){let f=u[c];if(js(e.emitsOptions,f))continue;const p=t[f];if(l)if(fe(o,f))p!==o[f]&&(o[f]=p,d=!0);else{const g=st(f);i[g]=Ti(l,a,g,p,e,!1)}else p!==o[f]&&(o[f]=p,d=!0)}}}else{La(e,t,i,o)&&(d=!0);let u;for(const c in a)(!t||!fe(t,c)&&((u=tn(c))===c||!fe(t,u)))&&(l?n&&(n[c]!==void 0||n[u]!==void 0)&&(i[c]=Ti(l,a,c,void 0,e,!0)):delete i[c]);if(o!==a)for(const c in o)(!t||!fe(t,c))&&(delete o[c],d=!0)}d&&Tt(e.attrs,"set","")}function La(e,t,n,s){const[i,o]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(Dn(l))continue;const d=t[l];let u;i&&fe(i,u=st(l))?!o||!o.includes(u)?n[u]=d:(a||(a={}))[u]=d:js(e.emitsOptions,l)||(!(l in s)||d!==s[l])&&(s[l]=d,r=!0)}if(o){const l=le(n),d=a||ye;for(let u=0;u<o.length;u++){const c=o[u];n[c]=Ti(i,l,c,d[c],e,!fe(d,c))}}return r}function Ti(e,t,n,s,i,o){const r=e[n];if(r!=null){const a=fe(r,"default");if(a&&s===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&se(l)){const{propsDefaults:d}=i;if(n in d)s=d[n];else{const u=Xn(i);s=d[n]=l.call(null,t),u()}}else s=l;i.ce&&i.ce._setProp(n,s)}r[0]&&(o&&!a?s=!1:r[1]&&(s===""||s===tn(n))&&(s=!0))}return s}const Su=new WeakMap;function ka(e,t,n=!1){const s=n?Su:t.propsCache,i=s.get(e);if(i)return i;const o=e.props,r={},a=[];let l=!1;if(!se(e)){const u=c=>{l=!0;const[f,p]=ka(c,t,!0);je(r,f),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!l)return he(e)&&s.set(e,cn),cn;if(te(o))for(let u=0;u<o.length;u++){const c=st(o[u]);No(c)&&(r[c]=ye)}else if(o)for(const u in o){const c=st(u);if(No(c)){const f=o[u],p=r[c]=te(f)||se(f)?{type:f}:je({},f),g=p.type;let m=!1,w=!0;if(te(g))for(let x=0;x<g.length;++x){const b=g[x],S=se(b)&&b.name;if(S==="Boolean"){m=!0;break}else S==="String"&&(w=!1)}else m=se(g)&&g.name==="Boolean";p[0]=m,p[1]=w,(m||fe(p,"default"))&&a.push(c)}}const d=[r,a];return he(e)&&s.set(e,d),d}function No(e){return e[0]!=="$"&&!Dn(e)}const Ji=e=>e==="_"||e==="_ctx"||e==="$stable",Zi=e=>te(e)?e.map(mt):[mt(e)],Tu=(e,t,n)=>{if(t._n)return t;const s=qi((...i)=>Zi(t(...i)),n);return s._c=!1,s},Na=(e,t,n)=>{const s=e._ctx;for(const i in e){if(Ji(i))continue;const o=e[i];if(se(o))t[i]=Tu(i,o,s);else if(o!=null){const r=Zi(o);t[i]=()=>r}}},Oa=(e,t)=>{const n=Zi(t);e.slots.default=()=>n},Ra=(e,t,n)=>{for(const s in t)(n||!Ji(s))&&(e[s]=t[s])},Cu=(e,t,n)=>{const s=e.slots=Da();if(e.vnode.shapeFlag&32){const i=t._;i?(Ra(s,t,n),n&&Hr(s,"_",i,!0)):Na(t,s)}else t&&Oa(e,t)},Iu=(e,t,n)=>{const{vnode:s,slots:i}=e;let o=!0,r=ye;if(s.shapeFlag&32){const a=t._;a?n&&a===1?o=!1:Ra(i,t,n):(o=!t.$stable,Na(t,i)),r=t}else t&&(Oa(e,t),r={default:1});if(o)for(const a in i)!Ji(a)&&r[a]==null&&delete i[a]},Qe=Lu;function Eu(e){return _u(e)}function _u(e,t){const n=Ls();n.__VUE__=!0;const{insert:s,remove:i,patchProp:o,createElement:r,createText:a,createComment:l,setText:d,setElementText:u,parentNode:c,nextSibling:f,setScopeId:p=ht,insertStaticContent:g}=e,m=(y,v,P,C=null,A=null,E=null,N=void 0,R=null,$=!!v.dynamicChildren)=>{if(y===v)return;y&&!Sn(y,v)&&(C=D(y),ve(y,A,E,!0),y=null),v.patchFlag===-2&&($=!1,v.dynamicChildren=null);const{type:k,ref:Y,shapeFlag:U}=v;switch(k){case Bs:w(y,v,P,C);break;case kt:x(y,v,P,C);break;case is:y==null&&b(v,P,C,N);break;case Ee:q(y,v,P,C,A,E,N,R,$);break;default:U&1?O(y,v,P,C,A,E,N,R,$):U&6?ee(y,v,P,C,A,E,N,R,$):(U&64||U&128)&&k.process(y,v,P,C,A,E,N,R,$,X)}Y!=null&&A?Nn(Y,y&&y.ref,E,v||y,!v):Y==null&&y&&y.ref!=null&&Nn(y.ref,null,E,y,!0)},w=(y,v,P,C)=>{if(y==null)s(v.el=a(v.children),P,C);else{const A=v.el=y.el;v.children!==y.children&&d(A,v.children)}},x=(y,v,P,C)=>{y==null?s(v.el=l(v.children||""),P,C):v.el=y.el},b=(y,v,P,C)=>{[y.el,y.anchor]=g(y.children,v,P,C,y.el,y.anchor)},S=({el:y,anchor:v},P,C)=>{let A;for(;y&&y!==v;)A=f(y),s(y,P,C),y=A;s(v,P,C)},I=({el:y,anchor:v})=>{let P;for(;y&&y!==v;)P=f(y),i(y),y=P;i(v)},O=(y,v,P,C,A,E,N,R,$)=>{if(v.type==="svg"?N="svg":v.type==="math"&&(N="mathml"),y==null)T(v,P,C,A,E,N,R,$);else{const k=y.el&&y.el._isVueCE?y.el:null;try{k&&k._beginPatch(),_(y,v,A,E,N,R,$)}finally{k&&k._endPatch()}}},T=(y,v,P,C,A,E,N,R)=>{let $,k;const{props:Y,shapeFlag:U,transition:J,dirs:F}=y;if($=y.el=r(y.type,E,Y&&Y.is,Y),U&8?u($,y.children):U&16&&L(y.children,$,null,C,A,oi(y,E),N,R),F&&Kt(y,null,C,"created"),M($,y,y.scopeId,N,C),Y){for(const ge in Y)ge!=="value"&&!Dn(ge)&&o($,ge,null,Y[ge],E,C);"value"in Y&&o($,"value",null,Y.value,E),(k=Y.onVnodeBeforeMount)&&ft(k,C,y)}F&&Kt(y,null,C,"beforeMount");const ie=Du(A,J);ie&&J.beforeEnter($),s($,v,P),((k=Y&&Y.onVnodeMounted)||ie||F)&&Qe(()=>{k&&ft(k,C,y),ie&&J.enter($),F&&Kt(y,null,C,"mounted")},A)},M=(y,v,P,C,A)=>{if(P&&p(y,P),C)for(let E=0;E<C.length;E++)p(y,C[E]);if(A){let E=A.subTree;if(v===E||Ba(E.type)&&(E.ssContent===v||E.ssFallback===v)){const N=A.vnode;M(y,N,N.scopeId,N.slotScopeIds,A.parent)}}},L=(y,v,P,C,A,E,N,R,$=0)=>{for(let k=$;k<y.length;k++){const Y=y[k]=R?Bt(y[k]):mt(y[k]);m(null,Y,v,P,C,A,E,N,R)}},_=(y,v,P,C,A,E,N)=>{const R=v.el=y.el;let{patchFlag:$,dynamicChildren:k,dirs:Y}=v;$|=y.patchFlag&16;const U=y.props||ye,J=v.props||ye;let F;if(P&&Vt(P,!1),(F=J.onVnodeBeforeUpdate)&&ft(F,P,v,y),Y&&Kt(v,y,P,"beforeUpdate"),P&&Vt(P,!0),(U.innerHTML&&J.innerHTML==null||U.textContent&&J.textContent==null)&&u(R,""),k?j(y.dynamicChildren,k,R,P,C,oi(v,A),E):N||Q(y,v,R,null,P,C,oi(v,A),E,!1),$>0){if($&16)B(R,U,J,P,A);else if($&2&&U.class!==J.class&&o(R,"class",null,J.class,A),$&4&&o(R,"style",U.style,J.style,A),$&8){const ie=v.dynamicProps;for(let ge=0;ge<ie.length;ge++){const ce=ie[ge],Oe=U[ce],Be=J[ce];(Be!==Oe||ce==="value")&&o(R,ce,Oe,Be,A,P)}}$&1&&y.children!==v.children&&u(R,v.children)}else!N&&k==null&&B(R,U,J,P,A);((F=J.onVnodeUpdated)||Y)&&Qe(()=>{F&&ft(F,P,v,y),Y&&Kt(v,y,P,"updated")},C)},j=(y,v,P,C,A,E,N)=>{for(let R=0;R<v.length;R++){const $=y[R],k=v[R],Y=$.el&&($.type===Ee||!Sn($,k)||$.shapeFlag&198)?c($.el):P;m($,k,Y,null,C,A,E,N,!0)}},B=(y,v,P,C,A)=>{if(v!==P){if(v!==ye)for(const E in v)!Dn(E)&&!(E in P)&&o(y,E,v[E],null,A,C);for(const E in P){if(Dn(E))continue;const N=P[E],R=v[E];N!==R&&E!=="value"&&o(y,E,R,N,A,C)}"value"in P&&o(y,"value",v.value,P.value,A)}},q=(y,v,P,C,A,E,N,R,$)=>{const k=v.el=y?y.el:a(""),Y=v.anchor=y?y.anchor:a("");let{patchFlag:U,dynamicChildren:J,slotScopeIds:F}=v;F&&(R=R?R.concat(F):F),y==null?(s(k,P,C),s(Y,P,C),L(v.children||[],P,Y,A,E,N,R,$)):U>0&&U&64&&J&&y.dynamicChildren&&y.dynamicChildren.length===J.length?(j(y.dynamicChildren,J,P,A,E,N,R),(v.key!=null||A&&v===A.subTree)&&Ma(y,v,!0)):Q(y,v,P,Y,A,E,N,R,$)},ee=(y,v,P,C,A,E,N,R,$)=>{v.slotScopeIds=R,y==null?v.shapeFlag&512?A.ctx.activate(v,P,C,N,$):oe(v,P,C,A,E,N,$):pe(y,v,$)},oe=(y,v,P,C,A,E,N)=>{const R=y.component=ju(y,C,A);if(wa(y)&&(R.ctx.renderer=X),Bu(R,!1,N),R.asyncDep){if(A&&A.registerDep(R,ne,N),!y.el){const $=R.subTree=Te(kt);x(null,$,v,P),y.placeholder=$.el}}else ne(R,y,v,P,A,E,N)},pe=(y,v,P)=>{const C=v.component=y.component;if(bu(y,v,P))if(C.asyncDep&&!C.asyncResolved){z(C,v,P);return}else C.next=v,C.update();else v.el=y.el,C.vnode=v},ne=(y,v,P,C,A,E,N)=>{const R=()=>{if(y.isMounted){let{next:U,bu:J,u:F,parent:ie,vnode:ge}=y;{const Ke=$a(y);if(Ke){U&&(U.el=ge.el,z(y,U,N)),Ke.asyncDep.then(()=>{y.isUnmounted||R()});return}}let ce=U,Oe;Vt(y,!1),U?(U.el=ge.el,z(y,U,N)):U=ge,J&&ns(J),(Oe=U.props&&U.props.onVnodeBeforeUpdate)&&ft(Oe,ie,U,ge),Vt(y,!0);const Be=Lo(y),ze=y.subTree;y.subTree=Be,m(ze,Be,c(ze.el),D(ze),y,A,E),U.el=Be.el,ce===null&&wu(y,Be.el),F&&Qe(F,A),(Oe=U.props&&U.props.onVnodeUpdated)&&Qe(()=>ft(Oe,ie,U,ge),A)}else{let U;const{el:J,props:F}=v,{bm:ie,m:ge,parent:ce,root:Oe,type:Be}=y,ze=fn(v);Vt(y,!1),ie&&ns(ie),!ze&&(U=F&&F.onVnodeBeforeMount)&&ft(U,ce,v),Vt(y,!0);{Oe.ce&&Oe.ce._def.shadowRoot!==!1&&Oe.ce._injectChildStyle(Be);const Ke=y.subTree=Lo(y);m(null,Ke,P,C,y,A,E),v.el=Ke.el}if(ge&&Qe(ge,A),!ze&&(U=F&&F.onVnodeMounted)){const Ke=v;Qe(()=>ft(U,ce,Ke),A)}(v.shapeFlag&256||ce&&fn(ce.vnode)&&ce.vnode.shapeFlag&256)&&y.a&&Qe(y.a,A),y.isMounted=!0,v=P=C=null}};y.scope.on();const $=y.effect=new zr(R);y.scope.off();const k=y.update=$.run.bind($),Y=y.job=$.runIfDirty.bind($);Y.i=y,Y.id=y.uid,$.scheduler=()=>Wi(Y),Vt(y,!0),k()},z=(y,v,P)=>{v.component=y;const C=y.vnode.props;y.vnode=v,y.next=null,Pu(y,v.props,C,P),Iu(y,v.children,P),Dt(),So(y),At()},Q=(y,v,P,C,A,E,N,R,$=!1)=>{const k=y&&y.children,Y=y?y.shapeFlag:0,U=v.children,{patchFlag:J,shapeFlag:F}=v;if(J>0){if(J&128){me(k,U,P,C,A,E,N,R,$);return}else if(J&256){Ce(k,U,P,C,A,E,N,R,$);return}}F&8?(Y&16&&Ge(k,A,E),U!==k&&u(P,U)):Y&16?F&16?me(k,U,P,C,A,E,N,R,$):Ge(k,A,E,!0):(Y&8&&u(P,""),F&16&&L(U,P,C,A,E,N,R,$))},Ce=(y,v,P,C,A,E,N,R,$)=>{y=y||cn,v=v||cn;const k=y.length,Y=v.length,U=Math.min(k,Y);let J;for(J=0;J<U;J++){const F=v[J]=$?Bt(v[J]):mt(v[J]);m(y[J],F,P,null,A,E,N,R,$)}k>Y?Ge(y,A,E,!0,!1,U):L(v,P,C,A,E,N,R,$,U)},me=(y,v,P,C,A,E,N,R,$)=>{let k=0;const Y=v.length;let U=y.length-1,J=Y-1;for(;k<=U&&k<=J;){const F=y[k],ie=v[k]=$?Bt(v[k]):mt(v[k]);if(Sn(F,ie))m(F,ie,P,null,A,E,N,R,$);else break;k++}for(;k<=U&&k<=J;){const F=y[U],ie=v[J]=$?Bt(v[J]):mt(v[J]);if(Sn(F,ie))m(F,ie,P,null,A,E,N,R,$);else break;U--,J--}if(k>U){if(k<=J){const F=J+1,ie=F<Y?v[F].el:C;for(;k<=J;)m(null,v[k]=$?Bt(v[k]):mt(v[k]),P,ie,A,E,N,R,$),k++}}else if(k>J)for(;k<=U;)ve(y[k],A,E,!0),k++;else{const F=k,ie=k,ge=new Map;for(k=ie;k<=J;k++){const Re=v[k]=$?Bt(v[k]):mt(v[k]);Re.key!=null&&ge.set(Re.key,k)}let ce,Oe=0;const Be=J-ie+1;let ze=!1,Ke=0;const bt=new Array(Be);for(k=0;k<Be;k++)bt[k]=0;for(k=F;k<=U;k++){const Re=y[k];if(Oe>=Be){ve(Re,A,E,!0);continue}let Ye;if(Re.key!=null)Ye=ge.get(Re.key);else for(ce=ie;ce<=J;ce++)if(bt[ce-ie]===0&&Sn(Re,v[ce])){Ye=ce;break}Ye===void 0?ve(Re,A,E,!0):(bt[Ye-ie]=k+1,Ye>=Ke?Ke=Ye:ze=!0,m(Re,v[Ye],P,null,A,E,N,R,$),Oe++)}const Ne=ze?Au(bt):cn;for(ce=Ne.length-1,k=Be-1;k>=0;k--){const Re=ie+k,Ye=v[Re],bn=v[Re+1],Qn=Re+1<Y?bn.el||ja(bn):C;bt[k]===0?m(null,Ye,P,Qn,A,E,N,R,$):ze&&(ce<0||k!==Ne[ce]?Pe(Ye,P,Qn,2):ce--)}}},Pe=(y,v,P,C,A=null)=>{const{el:E,type:N,transition:R,children:$,shapeFlag:k}=y;if(k&6){Pe(y.component.subTree,v,P,C);return}if(k&128){y.suspense.move(v,P,C);return}if(k&64){N.move(y,v,P,X);return}if(N===Ee){s(E,v,P);for(let U=0;U<$.length;U++)Pe($[U],v,P,C);s(y.anchor,v,P);return}if(N===is){S(y,v,P);return}if(C!==2&&k&1&&R)if(C===0)R.beforeEnter(E),s(E,v,P),Qe(()=>R.enter(E),A);else{const{leave:U,delayLeave:J,afterLeave:F}=R,ie=()=>{y.ctx.isUnmounted?i(E):s(E,v,P)},ge=()=>{E._isLeaving&&E[Vc](!0),U(E,()=>{ie(),F&&F()})};J?J(E,ie,ge):ge()}else s(E,v,P)},ve=(y,v,P,C=!1,A=!1)=>{const{type:E,props:N,ref:R,children:$,dynamicChildren:k,shapeFlag:Y,patchFlag:U,dirs:J,cacheIndex:F}=y;if(U===-2&&(A=!1),R!=null&&(Dt(),Nn(R,null,P,y,!0),At()),F!=null&&(v.renderCache[F]=void 0),Y&256){v.ctx.deactivate(y);return}const ie=Y&1&&J,ge=!fn(y);let ce;if(ge&&(ce=N&&N.onVnodeBeforeUnmount)&&ft(ce,v,y),Y&6)dt(y.component,P,C);else{if(Y&128){y.suspense.unmount(P,C);return}ie&&Kt(y,null,v,"beforeUnmount"),Y&64?y.type.remove(y,v,P,X,C):k&&!k.hasOnce&&(E!==Ee||U>0&&U&64)?Ge(k,v,P,!1,!0):(E===Ee&&U&384||!A&&Y&16)&&Ge($,v,P),C&&Xe(y)}(ge&&(ce=N&&N.onVnodeUnmounted)||ie)&&Qe(()=>{ce&&ft(ce,v,y),ie&&Kt(y,null,v,"unmounted")},P)},Xe=y=>{const{type:v,el:P,anchor:C,transition:A}=y;if(v===Ee){De(P,C);return}if(v===is){I(y);return}const E=()=>{i(P),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(y.shapeFlag&1&&A&&!A.persisted){const{leave:N,delayLeave:R}=A,$=()=>N(P,E);R?R(y.el,E,$):$()}else E()},De=(y,v)=>{let P;for(;y!==v;)P=f(y),i(y),y=P;i(v)},dt=(y,v,P)=>{const{bum:C,scope:A,job:E,subTree:N,um:R,m:$,a:k}=y;Oo($),Oo(k),C&&ns(C),A.stop(),E&&(E.flags|=8,ve(N,y,v,P)),R&&Qe(R,v),Qe(()=>{y.isUnmounted=!0},v)},Ge=(y,v,P,C=!1,A=!1,E=0)=>{for(let N=E;N<y.length;N++)ve(y[N],v,P,C,A)},D=y=>{if(y.shapeFlag&6)return D(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const v=f(y.anchor||y.el),P=v&&v[Gc];return P?f(P):v};let V=!1;const H=(y,v,P)=>{let C;y==null?v._vnode&&(ve(v._vnode,null,null,!0),C=v._vnode.component):m(v._vnode||null,y,v,null,null,null,P),v._vnode=y,V||(V=!0,So(C),ma(),V=!1)},X={p:m,um:ve,m:Pe,r:Xe,mt:oe,mc:L,pc:Q,pbc:j,n:D,o:e};return{render:H,hydrate:void 0,createApp:pu(H)}}function oi({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Vt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Du(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ma(e,t,n=!1){const s=e.children,i=t.children;if(te(s)&&te(i))for(let o=0;o<s.length;o++){const r=s[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Bt(i[o]),a.el=r.el),!n&&a.patchFlag!==-2&&Ma(r,a)),a.type===Bs&&(a.patchFlag!==-1?a.el=r.el:a.__elIndex=o+(e.type===Ee?1:0)),a.type===kt&&!a.el&&(a.el=r.el)}}function Au(e){const t=e.slice(),n=[0];let s,i,o,r,a;const l=e.length;for(s=0;s<l;s++){const d=e[s];if(d!==0){if(i=n[n.length-1],e[i]<d){t[s]=i,n.push(s);continue}for(o=0,r=n.length-1;o<r;)a=o+r>>1,e[n[a]]<d?o=a+1:r=a;d<e[n[o]]&&(o>0&&(t[s]=n[o-1]),n[o]=s)}}for(o=n.length,r=n[o-1];o-- >0;)n[o]=r,r=t[r];return n}function $a(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:$a(t)}function Oo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function ja(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?ja(t.subTree):null}const Ba=e=>e.__isSuspense;function Lu(e,t){t&&t.pendingBranch?te(e)?t.effects.push(...e):t.effects.push(e):$c(e)}const Ee=Symbol.for("v-fgt"),Bs=Symbol.for("v-txt"),kt=Symbol.for("v-cmt"),is=Symbol.for("v-stc"),Rn=[];let Ze=null;function K(e=!1){Rn.push(Ze=e?null:[])}function ku(){Rn.pop(),Ze=Rn[Rn.length-1]||null}let Hn=1;function ps(e,t=!1){Hn+=e,e<0&&Ze&&t&&(Ze.hasOnce=!0)}function Fa(e){return e.dynamicChildren=Hn>0?Ze||cn:null,ku(),Hn>0&&Ze&&Ze.push(e),e}function W(e,t,n,s,i,o){return Fa(h(e,t,n,s,i,o,!0))}function Un(e,t,n,s,i){return Fa(Te(e,t,n,s,i,!0))}function Gn(e){return e?e.__v_isVNode===!0:!1}function Sn(e,t){return e.type===t.type&&e.key===t.key}const Ha=({key:e})=>e??null,os=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Le(e)||xe(e)||se(e)?{i:$e,r:e,k:t,f:!!n}:e:null);function h(e,t=null,n=null,s=0,i=null,o=e===Ee?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ha(t),ref:t&&os(t),scopeId:ha,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:$e};return a?(eo(l,n),o&128&&e.normalize(l)):n&&(l.shapeFlag|=Le(n)?8:16),Hn>0&&!r&&Ze&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Ze.push(l),l}const Te=Nu;function Nu(e,t=null,n=null,s=0,i=null,o=!1){if((!e||e===su)&&(e=kt),Gn(e)){const a=gn(e,t,!0);return n&&eo(a,n),Hn>0&&!o&&Ze&&(a.shapeFlag&6?Ze[Ze.indexOf(e)]=a:Ze.push(a)),a.patchFlag=-2,a}if(Ku(e)&&(e=e.__vccOpts),t){t=Ou(t);let{class:a,style:l}=t;a&&!Le(a)&&(t.class=_e(a)),he(l)&&(Os(l)&&!te(l)&&(l=je({},l)),t.style=Yt(l))}const r=Le(e)?1:Ba(e)?128:Kc(e)?64:he(e)?4:se(e)?2:0;return h(e,t,n,s,i,r,o,!0)}function Ou(e){return e?Os(e)||Aa(e)?je({},e):e:null}function gn(e,t,n=!1,s=!1){const{props:i,ref:o,patchFlag:r,children:a,transition:l}=e,d=t?Ru(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Ha(d),ref:t&&t.ref?n&&o?te(o)?o.concat(os(t)):[o,os(t)]:os(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ee?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&gn(e.ssContent),ssFallback:e.ssFallback&&gn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&Xi(u,l.clone(u)),u}function zt(e=" ",t=0){return Te(Bs,null,e,t)}function Ua(e,t){const n=Te(is,null,e);return n.staticCount=t,n}function we(e="",t=!1){return t?(K(),Un(kt,null,e)):Te(kt,null,e)}function mt(e){return e==null||typeof e=="boolean"?Te(kt):te(e)?Te(Ee,null,e.slice()):Gn(e)?Bt(e):Te(Bs,null,String(e))}function Bt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:gn(e)}function eo(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(te(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),eo(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Aa(t)?t._ctx=$e:i===3&&$e&&($e.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else se(t)?(t={default:t,_ctx:$e},n=32):(t=String(t),s&64?(n=16,t=[zt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ru(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=_e([t.class,s.class]));else if(i==="style")t.style=Yt([t.style,s.style]);else if(Cs(i)){const o=t[i],r=s[i];r&&o!==r&&!(te(o)&&o.includes(r))&&(t[i]=o?[].concat(o,r):r)}else i!==""&&(t[i]=s[i])}return t}function ft(e,t,n,s=null){vt(e,t,7,[n,s])}const Mu=Ia();let $u=0;function ju(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||Mu,o={uid:$u++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vr(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ka(s,i),emitsOptions:Ea(s,i),emit:null,emitted:null,propsDefaults:ye,inheritAttrs:s.inheritAttrs,ctx:ye,data:ye,props:ye,attrs:ye,slots:ye,refs:ye,setupState:ye,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=gu.bind(null,o),e.ce&&e.ce(o),o}let Ue=null;const Ga=()=>Ue||$e;let ms,Ci;{const e=Ls(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),o=>{i.length>1?i.forEach(r=>r(o)):i[0](o)}};ms=t("__VUE_INSTANCE_SETTERS__",n=>Ue=n),Ci=t("__VUE_SSR_SETTERS__",n=>Kn=n)}const Xn=e=>{const t=Ue;return ms(e),e.scope.on(),()=>{e.scope.off(),ms(t)}},Ro=()=>{Ue&&Ue.scope.off(),ms(null)};function Ka(e){return e.vnode.shapeFlag&4}let Kn=!1;function Bu(e,t=!1,n=!1){t&&Ci(t);const{props:s,children:i}=e.vnode,o=Ka(e);xu(e,s,o,t),Cu(e,i,n||t);const r=o?Fu(e,t):void 0;return t&&Ci(!1),r}function Fu(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ru);const{setup:s}=n;if(s){Dt();const i=e.setupContext=s.length>1?Uu(e):null,o=Xn(e),r=zn(s,e,0,[e.props,i]),a=jr(r);if(At(),o(),(a||e.sp)&&!fn(e)&&ba(e),a){if(r.then(Ro,Ro),t)return r.then(l=>{Mo(e,l)}).catch(l=>{Rs(l,e,0)});e.asyncDep=r}else Mo(e,r)}else Va(e)}function Mo(e,t,n){se(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:he(t)&&(e.setupState=ua(t)),Va(e)}function Va(e,t,n){const s=e.type;e.render||(e.render=s.render||ht);{const i=Xn(e);Dt();try{au(e)}finally{At(),i()}}}const Hu={get(e,t){return He(e,"get",""),e[t]}};function Uu(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Hu),slots:e.slots,emit:e.emit,expose:t}}function Fs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ua(Vi(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in On)return On[n](e)},has(t,n){return n in t||n in On}})):e.proxy}function Gu(e,t=!0){return se(e)?e.displayName||e.name:e.name||t&&e.__name}function Ku(e){return se(e)&&"__vccOpts"in e}const ae=(e,t)=>kc(e,t,Kn);function Wa(e,t,n){try{ps(-1);const s=arguments.length;return s===2?he(t)&&!te(t)?Gn(t)?Te(e,null,[t]):Te(e,t):Te(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Gn(n)&&(n=[n]),Te(e,t,n))}finally{ps(1)}}const Vu="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ii;const $o=typeof window<"u"&&window.trustedTypes;if($o)try{Ii=$o.createPolicy("vue",{createHTML:e=>e})}catch{}const qa=Ii?e=>Ii.createHTML(e):e=>e,Wu="http://www.w3.org/2000/svg",qu="http://www.w3.org/1998/Math/MathML",Pt=typeof document<"u"?document:null,jo=Pt&&Pt.createElement("template"),zu={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?Pt.createElementNS(Wu,e):t==="mathml"?Pt.createElementNS(qu,e):n?Pt.createElement(e,{is:n}):Pt.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>Pt.createTextNode(e),createComment:e=>Pt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Pt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,o){const r=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{jo.innerHTML=qa(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=jo.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Xu=Symbol("_vtc");function Yu(e,t,n){const s=e[Xu];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const gs=Symbol("_vod"),za=Symbol("_vsh"),to={name:"show",beforeMount(e,{value:t},{transition:n}){e[gs]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Tn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Tn(e,!0),s.enter(e)):s.leave(e,()=>{Tn(e,!1)}):Tn(e,t))},beforeUnmount(e,{value:t}){Tn(e,t)}};function Tn(e,t){e.style.display=t?e[gs]:"none",e[za]=!t}const Qu=Symbol(""),Ju=/(?:^|;)\s*display\s*:/;function Zu(e,t,n){const s=e.style,i=Le(n);let o=!1;if(n&&!i){if(t)if(Le(t))for(const r of t.split(";")){const a=r.slice(0,r.indexOf(":")).trim();n[a]==null&&rs(s,a,"")}else for(const r in t)n[r]==null&&rs(s,r,"");for(const r in n)r==="display"&&(o=!0),rs(s,r,n[r])}else if(i){if(t!==n){const r=s[Qu];r&&(n+=";"+r),s.cssText=n,o=Ju.test(n)}}else t&&e.removeAttribute("style");gs in e&&(e[gs]=o?s.display:"",e[za]&&(s.display="none"))}const Bo=/\s*!important$/;function rs(e,t,n){if(te(n))n.forEach(s=>rs(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=ed(e,t);Bo.test(n)?e.setProperty(tn(s),n.replace(Bo,""),"important"):e[s]=n}}const Fo=["Webkit","Moz","ms"],ri={};function ed(e,t){const n=ri[t];if(n)return n;let s=st(t);if(s!=="filter"&&s in e)return ri[t]=s;s=Ds(s);for(let i=0;i<Fo.length;i++){const o=Fo[i]+s;if(o in e)return ri[t]=o}return t}const Ho="http://www.w3.org/1999/xlink";function Uo(e,t,n,s,i,o=tc(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ho,t.slice(6,t.length)):e.setAttributeNS(Ho,t,n):n==null||o&&!Ur(n)?e.removeAttribute(t):e.setAttribute(t,o?"":lt(n)?String(n):n)}function Go(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?qa(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Ur(n):n==null&&a==="string"?(n="",r=!0):a==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(i||t)}function qt(e,t,n,s){e.addEventListener(t,n,s)}function td(e,t,n,s){e.removeEventListener(t,n,s)}const Ko=Symbol("_vei");function nd(e,t,n,s,i=null){const o=e[Ko]||(e[Ko]={}),r=o[t];if(s&&r)r.value=s;else{const[a,l]=sd(t);if(s){const d=o[t]=rd(s,i);qt(e,a,d,l)}else r&&(td(e,a,r,l),o[t]=void 0)}}const Vo=/(?:Once|Passive|Capture)$/;function sd(e){let t;if(Vo.test(e)){t={};let s;for(;s=e.match(Vo);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):tn(e.slice(2)),t]}let ai=0;const id=Promise.resolve(),od=()=>ai||(id.then(()=>ai=0),ai=Date.now());function rd(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;vt(ad(s,n.value),t,5,[s])};return n.value=e,n.attached=od(),n}function ad(e,t){if(te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Wo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ld=(e,t,n,s,i,o)=>{const r=i==="svg";t==="class"?Yu(e,s,r):t==="style"?Zu(e,n,s):Cs(t)?$i(t)||nd(e,t,n,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):cd(e,t,s,r))?(Go(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Uo(e,t,s,r,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Le(s))?Go(e,st(t),s,o,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Uo(e,t,s,r))};function cd(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Wo(t)&&se(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Wo(t)&&Le(n)?!1:t in e}const hs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return te(t)?n=>ns(t,n):t};function ud(e){e.target.composing=!0}function qo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const pn=Symbol("_assign");function zo(e,t,n){return t&&(e=e.trim()),n&&(e=As(e)),e}const Xo={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[pn]=hs(i);const o=s||i.props&&i.props.type==="number";qt(e,t?"change":"input",r=>{r.target.composing||e[pn](zo(e.value,n,o))}),(n||o)&&qt(e,"change",()=>{e.value=zo(e.value,n,o)}),t||(qt(e,"compositionstart",ud),qt(e,"compositionend",qo),qt(e,"change",qo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:o}},r){if(e[pn]=hs(r),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?As(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},ys={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=Is(t);qt(e,"change",()=>{const o=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>n?As(vs(r)):vs(r));e[pn](e.multiple?i?new Set(o):o:o[0]),e._assigning=!0,Ms(()=>{e._assigning=!1})}),e[pn]=hs(s)},mounted(e,{value:t}){Yo(e,t)},beforeUpdate(e,t,n){e[pn]=hs(n)},updated(e,{value:t}){e._assigning||Yo(e,t)}};function Yo(e,t){const n=e.multiple,s=te(t);if(!(n&&!s&&!Is(t))){for(let i=0,o=e.options.length;i<o;i++){const r=e.options[i],a=vs(r);if(n)if(s){const l=typeof a;l==="string"||l==="number"?r.selected=t.some(d=>String(d)===String(a)):r.selected=sc(t,a)>-1}else r.selected=t.has(a);else if(ks(vs(r),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function vs(e){return"_value"in e?e._value:e.value}const dd=["ctrl","shift","alt","meta"],fd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>dd.some(n=>e[`${n}Key`]&&!t.includes(n))},Vn=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...o)=>{for(let r=0;r<t.length;r++){const a=fd[t[r]];if(a&&a(i,t))return}return e(i,...o)})},pd=je({patchProp:ld},zu);let Qo;function md(){return Qo||(Qo=Eu(pd))}const gd=(...e)=>{const t=md().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=yd(s);if(!i)return;const o=t._component;!se(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=n(i,!1,hd(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},t};function hd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function yd(e){return Le(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Xa;const Hs=e=>Xa=e,Ya=Symbol();function Ei(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Mn;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Mn||(Mn={}));function vd(){const e=Wr(!0),t=e.run(()=>Se({}));let n=[],s=[];const i=Vi({install(o){Hs(i),i._a=o,o.provide(Ya,i),o.config.globalProperties.$pinia=i,s.forEach(r=>n.push(r)),s=[]},use(o){return this._a?n.push(o):s.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const Qa=()=>{};function Jo(e,t,n,s=Qa){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),s())};return!n&&qr()&&ic(i),i}function sn(e,...t){e.slice().forEach(n=>{n(...t)})}const bd=e=>e(),Zo=Symbol(),li=Symbol();function _i(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],i=e[n];Ei(i)&&Ei(s)&&e.hasOwnProperty(n)&&!xe(s)&&!yt(s)?e[n]=_i(i,s):e[n]=s}return e}const wd=Symbol();function xd(e){return!Ei(e)||!e.hasOwnProperty(wd)}const{assign:Mt}=Object;function Pd(e){return!!(xe(e)&&e.effect)}function Sd(e,t,n,s){const{state:i,actions:o,getters:r}=t,a=n.state.value[e];let l;function d(){a||(n.state.value[e]=i?i():{});const u=Ec(n.state.value[e]);return Mt(u,o,Object.keys(r||{}).reduce((c,f)=>(c[f]=Vi(ae(()=>{Hs(n);const p=n._s.get(e);return r[f].call(p,p)})),c),{}))}return l=Ja(e,d,t,n,s,!0),l}function Ja(e,t,n={},s,i,o){let r;const a=Mt({actions:{}},n),l={deep:!0};let d,u,c=[],f=[],p;const g=s.state.value[e];!o&&!g&&(s.state.value[e]={});let m;function w(L){let _;d=u=!1,typeof L=="function"?(L(s.state.value[e]),_={type:Mn.patchFunction,storeId:e,events:p}):(_i(s.state.value[e],L),_={type:Mn.patchObject,payload:L,storeId:e,events:p});const j=m=Symbol();Ms().then(()=>{m===j&&(d=!0)}),u=!0,sn(c,_,s.state.value[e])}const x=o?function(){const{state:_}=n,j=_?_():{};this.$patch(B=>{Mt(B,j)})}:Qa;function b(){r.stop(),c=[],f=[],s._s.delete(e)}const S=(L,_="")=>{if(Zo in L)return L[li]=_,L;const j=function(){Hs(s);const B=Array.from(arguments),q=[],ee=[];function oe(z){q.push(z)}function pe(z){ee.push(z)}sn(f,{args:B,name:j[li],store:O,after:oe,onError:pe});let ne;try{ne=L.apply(this&&this.$id===e?this:O,B)}catch(z){throw sn(ee,z),z}return ne instanceof Promise?ne.then(z=>(sn(q,z),z)).catch(z=>(sn(ee,z),Promise.reject(z))):(sn(q,ne),ne)};return j[Zo]=!0,j[li]=_,j},I={_p:s,$id:e,$onAction:Jo.bind(null,f),$patch:w,$reset:x,$subscribe(L,_={}){const j=Jo(c,L,_.detached,()=>B()),B=r.run(()=>kn(()=>s.state.value[e],q=>{(_.flush==="sync"?u:d)&&L({storeId:e,type:Mn.direct,events:p},q)},Mt({},l,_)));return j},$dispose:b},O=vn(I);s._s.set(e,O);const M=(s._a&&s._a.runWithContext||bd)(()=>s._e.run(()=>(r=Wr()).run(()=>t({action:S}))));for(const L in M){const _=M[L];if(xe(_)&&!Pd(_)||yt(_))o||(g&&xd(_)&&(xe(_)?_.value=g[L]:_i(_,g[L])),s.state.value[e][L]=_);else if(typeof _=="function"){const j=S(_,L);M[L]=j,a.actions[L]=_}}return Mt(O,M),Mt(le(O),M),Object.defineProperty(O,"$state",{get:()=>s.state.value[e],set:L=>{w(_=>{Mt(_,L)})}}),s._p.forEach(L=>{Mt(O,r.run(()=>L({store:O,app:s._a,pinia:s,options:a})))}),g&&o&&n.hydrate&&n.hydrate(O.$state,g),d=!0,u=!0,O}/*! #__NO_SIDE_EFFECTS__ */function Td(e,t,n){let s,i;const o=typeof t=="function";s=e,i=o?n:t;function r(a,l){const d=jc();return a=a||(d?at(Ya,null):null),a&&Hs(a),a=Xa,a._s.has(s)||(o?Ja(s,t,i,a):Sd(s,i,a)),a._s.get(s)}return r.$id=s,r}function Cd(e){{const t=le(e),n={};for(const s in t){const i=t[s];i.effect?n[s]=ae({get:()=>e[s],set(o){e[s]=o}}):(xe(i)||yt(i))&&(n[s]=Ac(e,s))}return n}}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const ln=typeof document<"u";function Za(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Id(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Za(e.default)}const de=Object.assign;function ci(e,t){const n={};for(const s in t){const i=t[s];n[s]=ut(i)?i.map(e):e(i)}return n}const $n=()=>{},ut=Array.isArray;function er(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const el=/#/g,Ed=/&/g,_d=/\//g,Dd=/=/g,Ad=/\?/g,tl=/\+/g,Ld=/%5B/g,kd=/%5D/g,nl=/%5E/g,Nd=/%60/g,sl=/%7B/g,Od=/%7C/g,il=/%7D/g,Rd=/%20/g;function no(e){return e==null?"":encodeURI(""+e).replace(Od,"|").replace(Ld,"[").replace(kd,"]")}function Md(e){return no(e).replace(sl,"{").replace(il,"}").replace(nl,"^")}function Di(e){return no(e).replace(tl,"%2B").replace(Rd,"+").replace(el,"%23").replace(Ed,"%26").replace(Nd,"`").replace(sl,"{").replace(il,"}").replace(nl,"^")}function $d(e){return Di(e).replace(Dd,"%3D")}function jd(e){return no(e).replace(el,"%23").replace(Ad,"%3F")}function Bd(e){return jd(e).replace(_d,"%2F")}function Wn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Fd=/\/$/,Hd=e=>e.replace(Fd,"");function ui(e,t,n="/"){let s,i={},o="",r="";const a=t.indexOf("#");let l=t.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=t.slice(0,l),o=t.slice(l,a>0?a:t.length),i=e(o.slice(1))),a>=0&&(s=s||t.slice(0,a),r=t.slice(a,t.length)),s=Vd(s??t,n),{fullPath:s+o+r,path:s,query:i,hash:Wn(r)}}function Ud(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function tr(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Gd(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&hn(t.matched[s],n.matched[i])&&ol(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function hn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ol(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!Kd(e[n],t[n]))return!1;return!0}function Kd(e,t){return ut(e)?nr(e,t):ut(t)?nr(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function nr(e,t){return ut(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Vd(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let o=n.length-1,r,a;for(r=0;r<s.length;r++)if(a=s[r],a!==".")if(a==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+s.slice(r).join("/")}const Rt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ai=function(e){return e.pop="pop",e.push="push",e}({}),di=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function Wd(e){if(!e)if(ln){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Hd(e)}const qd=/^[^#]+#/;function zd(e,t){return e.replace(qd,"#")+t}function Xd(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Us=()=>({left:window.scrollX,top:window.scrollY});function Yd(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=Xd(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function sr(e,t){return(history.state?history.state.position-t:-1)+e}const Li=new Map;function Qd(e,t){Li.set(e,t)}function Jd(e){const t=Li.get(e);return Li.delete(e),t}function Zd(e){return typeof e=="string"||e&&typeof e=="object"}function rl(e){return typeof e=="string"||typeof e=="symbol"}let Ie=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const al=Symbol("");Ie.MATCHER_NOT_FOUND+"",Ie.NAVIGATION_GUARD_REDIRECT+"",Ie.NAVIGATION_ABORTED+"",Ie.NAVIGATION_CANCELLED+"",Ie.NAVIGATION_DUPLICATED+"";function yn(e,t){return de(new Error,{type:e,[al]:!0},t)}function xt(e,t){return e instanceof Error&&al in e&&(t==null||!!(e.type&t))}const ef=["params","query","hash"];function tf(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of ef)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function nf(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(tl," "),o=i.indexOf("="),r=Wn(o<0?i:i.slice(0,o)),a=o<0?null:Wn(i.slice(o+1));if(r in t){let l=t[r];ut(l)||(l=t[r]=[l]),l.push(a)}else t[r]=a}return t}function ir(e){let t="";for(let n in e){const s=e[n];if(n=$d(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(ut(s)?s.map(i=>i&&Di(i)):[s&&Di(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function sf(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=ut(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const of=Symbol(""),or=Symbol(""),so=Symbol(""),io=Symbol(""),ki=Symbol("");function Cn(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Ft(e,t,n,s,i,o=r=>r()){const r=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const d=f=>{f===!1?l(yn(Ie.NAVIGATION_ABORTED,{from:n,to:t})):f instanceof Error?l(f):Zd(f)?l(yn(Ie.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(r&&s.enterCallbacks[i]===r&&typeof f=="function"&&r.push(f),a())},u=o(()=>e.call(s&&s.instances[i],t,n,d));let c=Promise.resolve(u);e.length<3&&(c=c.then(d)),c.catch(f=>l(f))})}function fi(e,t,n,s,i=o=>o()){const o=[];for(const r of e)for(const a in r.components){let l=r.components[a];if(!(t!=="beforeRouteEnter"&&!r.instances[a]))if(Za(l)){const d=(l.__vccOpts||l)[t];d&&o.push(Ft(d,n,s,r,a,i))}else{let d=l();o.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${r.path}"`);const c=Id(u)?u.default:u;r.mods[a]=u,r.components[a]=c;const f=(c.__vccOpts||c)[t];return f&&Ft(f,n,s,r,a,i)()}))}}return o}function rf(e,t){const n=[],s=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let r=0;r<o;r++){const a=t.matched[r];a&&(e.matched.find(d=>hn(d,a))?s.push(a):n.push(a));const l=e.matched[r];l&&(t.matched.find(d=>hn(d,l))||i.push(l))}return[n,s,i]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let af=()=>location.protocol+"//"+location.host;function ll(e,t){const{pathname:n,search:s,hash:i}=t,o=e.indexOf("#");if(o>-1){let r=i.includes(e.slice(o))?e.slice(o).length:1,a=i.slice(r);return a[0]!=="/"&&(a="/"+a),tr(a,"")}return tr(n,e)+s+i}function lf(e,t,n,s){let i=[],o=[],r=null;const a=({state:f})=>{const p=ll(e,location),g=n.value,m=t.value;let w=0;if(f){if(n.value=p,t.value=f,r&&r===g){r=null;return}w=m?f.position-m.position:0}else s(p);i.forEach(x=>{x(n.value,g,{delta:w,type:Ai.pop,direction:w?w>0?di.forward:di.back:di.unknown})})};function l(){r=n.value}function d(f){i.push(f);const p=()=>{const g=i.indexOf(f);g>-1&&i.splice(g,1)};return o.push(p),p}function u(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(de({},f.state,{scroll:Us()}),"")}}function c(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:l,listen:d,destroy:c}}function rr(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Us():null}}function cf(e){const{history:t,location:n}=window,s={value:ll(e,n)},i={value:t.state};i.value||o(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,d,u){const c=e.indexOf("#"),f=c>-1?(n.host&&document.querySelector("base")?e:e.slice(c))+l:af()+e+l;try{t[u?"replaceState":"pushState"](d,"",f),i.value=d}catch(p){console.error(p),n[u?"replace":"assign"](f)}}function r(l,d){o(l,de({},t.state,rr(i.value.back,l,i.value.forward,!0),d,{position:i.value.position}),!0),s.value=l}function a(l,d){const u=de({},i.value,t.state,{forward:l,scroll:Us()});o(u.current,u,!0),o(l,de({},rr(s.value,l,null),{position:u.position+1},d),!1),s.value=l}return{location:s,state:i,push:a,replace:r}}function uf(e){e=Wd(e);const t=cf(e),n=lf(e,t.state,t.location,t.replace);function s(o,r=!0){r||n.pauseListeners(),history.go(o)}const i=de({location:"",base:e,go:s,createHref:zd.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}let Xt=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var ke=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(ke||{});const df={type:Xt.Static,value:""},ff=/[a-zA-Z0-9_]/;function pf(e){if(!e)return[[]];if(e==="/")return[[df]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${n})/"${d}": ${p}`)}let n=ke.Static,s=n;const i=[];let o;function r(){o&&i.push(o),o=[]}let a=0,l,d="",u="";function c(){d&&(n===ke.Static?o.push({type:Xt.Static,value:d}):n===ke.Param||n===ke.ParamRegExp||n===ke.ParamRegExpEnd?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),o.push({type:Xt.Param,value:d,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),d="")}function f(){d+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==ke.ParamRegExp){s=n,n=ke.EscapeNext;continue}switch(n){case ke.Static:l==="/"?(d&&c(),r()):l===":"?(c(),n=ke.Param):f();break;case ke.EscapeNext:f(),n=s;break;case ke.Param:l==="("?n=ke.ParamRegExp:ff.test(l)?f():(c(),n=ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case ke.ParamRegExp:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=ke.ParamRegExpEnd:u+=l;break;case ke.ParamRegExpEnd:c(),n=ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===ke.ParamRegExp&&t(`Unfinished custom RegExp for param "${d}"`),c(),r(),i}const ar="[^/]+?",mf={sensitive:!1,strict:!1,start:!0,end:!0};var We=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(We||{});const gf=/[.+*?^${}()[\]/\\]/g;function hf(e,t){const n=de({},mf,t),s=[];let i=n.start?"^":"";const o=[];for(const d of e){const u=d.length?[]:[We.Root];n.strict&&!d.length&&(i+="/");for(let c=0;c<d.length;c++){const f=d[c];let p=We.Segment+(n.sensitive?We.BonusCaseSensitive:0);if(f.type===Xt.Static)c||(i+="/"),i+=f.value.replace(gf,"\\$&"),p+=We.Static;else if(f.type===Xt.Param){const{value:g,repeatable:m,optional:w,regexp:x}=f;o.push({name:g,repeatable:m,optional:w});const b=x||ar;if(b!==ar){p+=We.BonusCustomRegExp;try{`${b}`}catch(I){throw new Error(`Invalid custom RegExp for param "${g}" (${b}): `+I.message)}}let S=m?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;c||(S=w&&d.length<2?`(?:/${S})`:"/"+S),w&&(S+="?"),i+=S,p+=We.Dynamic,w&&(p+=We.BonusOptional),m&&(p+=We.BonusRepeatable),b===".*"&&(p+=We.BonusWildcard)}u.push(p)}s.push(u)}if(n.strict&&n.end){const d=s.length-1;s[d][s[d].length-1]+=We.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const r=new RegExp(i,n.sensitive?"":"i");function a(d){const u=d.match(r),c={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",g=o[f-1];c[g.name]=p&&g.repeatable?p.split("/"):p}return c}function l(d){let u="",c=!1;for(const f of e){(!c||!u.endsWith("/"))&&(u+="/"),c=!1;for(const p of f)if(p.type===Xt.Static)u+=p.value;else if(p.type===Xt.Param){const{value:g,repeatable:m,optional:w}=p,x=g in d?d[g]:"";if(ut(x)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const b=ut(x)?x.join("/"):x;if(!b)if(w)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):c=!0);else throw new Error(`Missing required param "${g}"`);u+=b}}return u||"/"}return{re:r,score:s,keys:o,parse:a,stringify:l}}function yf(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===We.Static+We.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===We.Static+We.Segment?1:-1:0}function cl(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const o=yf(s[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-s.length)===1){if(lr(s))return 1;if(lr(i))return-1}return i.length-s.length}function lr(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const vf={strict:!1,end:!0,sensitive:!1};function bf(e,t,n){const s=hf(pf(e.path),n),i=de(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function wf(e,t){const n=[],s=new Map;t=er(vf,t);function i(c){return s.get(c)}function o(c,f,p){const g=!p,m=ur(c);m.aliasOf=p&&p.record;const w=er(t,c),x=[m];if("alias"in c){const I=typeof c.alias=="string"?[c.alias]:c.alias;for(const O of I)x.push(ur(de({},m,{components:p?p.record.components:m.components,path:O,aliasOf:p?p.record:m})))}let b,S;for(const I of x){const{path:O}=I;if(f&&O[0]!=="/"){const T=f.record.path,M=T[T.length-1]==="/"?"":"/";I.path=f.record.path+(O&&M+O)}if(b=bf(I,f,w),p?p.alias.push(b):(S=S||b,S!==b&&S.alias.push(b),g&&c.name&&!dr(b)&&r(c.name)),ul(b)&&l(b),m.children){const T=m.children;for(let M=0;M<T.length;M++)o(T[M],b,p&&p.children[M])}p=p||b}return S?()=>{r(S)}:$n}function r(c){if(rl(c)){const f=s.get(c);f&&(s.delete(c),n.splice(n.indexOf(f),1),f.children.forEach(r),f.alias.forEach(r))}else{const f=n.indexOf(c);f>-1&&(n.splice(f,1),c.record.name&&s.delete(c.record.name),c.children.forEach(r),c.alias.forEach(r))}}function a(){return n}function l(c){const f=Sf(c,n);n.splice(f,0,c),c.record.name&&!dr(c)&&s.set(c.record.name,c)}function d(c,f){let p,g={},m,w;if("name"in c&&c.name){if(p=s.get(c.name),!p)throw yn(Ie.MATCHER_NOT_FOUND,{location:c});w=p.record.name,g=de(cr(f.params,p.keys.filter(S=>!S.optional).concat(p.parent?p.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),c.params&&cr(c.params,p.keys.map(S=>S.name))),m=p.stringify(g)}else if(c.path!=null)m=c.path,p=n.find(S=>S.re.test(m)),p&&(g=p.parse(m),w=p.record.name);else{if(p=f.name?s.get(f.name):n.find(S=>S.re.test(f.path)),!p)throw yn(Ie.MATCHER_NOT_FOUND,{location:c,currentLocation:f});w=p.record.name,g=de({},f.params,c.params),m=p.stringify(g)}const x=[];let b=p;for(;b;)x.unshift(b.record),b=b.parent;return{name:w,path:m,params:g,matched:x,meta:Pf(x)}}e.forEach(c=>o(c));function u(){n.length=0,s.clear()}return{addRoute:o,resolve:d,removeRoute:r,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function cr(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function ur(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:xf(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function xf(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function dr(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Pf(e){return e.reduce((t,n)=>de(t,n.meta),{})}function Sf(e,t){let n=0,s=t.length;for(;n!==s;){const o=n+s>>1;cl(e,t[o])<0?s=o:n=o+1}const i=Tf(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function Tf(e){let t=e;for(;t=t.parent;)if(ul(t)&&cl(e,t)===0)return t}function ul({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function fr(e){const t=at(so),n=at(io),s=ae(()=>{const l=ue(e.to);return t.resolve(l)}),i=ae(()=>{const{matched:l}=s.value,{length:d}=l,u=l[d-1],c=n.matched;if(!u||!c.length)return-1;const f=c.findIndex(hn.bind(null,u));if(f>-1)return f;const p=pr(l[d-2]);return d>1&&pr(u)===p&&c[c.length-1].path!==p?c.findIndex(hn.bind(null,l[d-2])):f}),o=ae(()=>i.value>-1&&Df(n.params,s.value.params)),r=ae(()=>i.value>-1&&i.value===n.matched.length-1&&ol(n.params,s.value.params));function a(l={}){if(_f(l)){const d=t[ue(e.replace)?"replace":"push"](ue(e.to)).catch($n);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:s,href:ae(()=>s.value.href),isActive:o,isExactActive:r,navigate:a}}function Cf(e){return e.length===1?e[0]:e}const If=va({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:fr,setup(e,{slots:t}){const n=vn(fr(e)),{options:s}=at(so),i=ae(()=>({[mr(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[mr(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&Cf(t.default(n));return e.custom?o:Wa("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),Ef=If;function _f(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Df(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!ut(i)||i.length!==s.length||s.some((o,r)=>o.valueOf()!==i[r].valueOf()))return!1}return!0}function pr(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const mr=(e,t,n)=>e??t??n,Af=va({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=at(ki),i=ae(()=>e.route||s.value),o=at(or,0),r=ae(()=>{let d=ue(o);const{matched:u}=i.value;let c;for(;(c=u[d])&&!c.components;)d++;return d}),a=ae(()=>i.value.matched[r.value]);ss(or,ae(()=>r.value+1)),ss(of,a),ss(ki,i);const l=Se();return kn(()=>[l.value,a.value,e.name],([d,u,c],[f,p,g])=>{u&&(u.instances[c]=d,p&&p!==u&&d&&d===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),d&&u&&(!p||!hn(u,p)||!f)&&(u.enterCallbacks[c]||[]).forEach(m=>m(d))},{flush:"post"}),()=>{const d=i.value,u=e.name,c=a.value,f=c&&c.components[u];if(!f)return gr(n.default,{Component:f,route:d});const p=c.props[u],g=p?p===!0?d.params:typeof p=="function"?p(d):p:null,w=Wa(f,de({},g,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(c.instances[u]=null)},ref:l}));return gr(n.default,{Component:w,route:d})||w}}});function gr(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Lf=Af;function kf(e){const t=wf(e.routes,e),n=e.parseQuery||nf,s=e.stringifyQuery||ir,i=e.history,o=Cn(),r=Cn(),a=Cn(),l=Tc(Rt);let d=Rt;ln&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=ci.bind(null,D=>""+D),c=ci.bind(null,Bd),f=ci.bind(null,Wn);function p(D,V){let H,X;return rl(D)?(H=t.getRecordMatcher(D),X=V):X=D,t.addRoute(X,H)}function g(D){const V=t.getRecordMatcher(D);V&&t.removeRoute(V)}function m(){return t.getRoutes().map(D=>D.record)}function w(D){return!!t.getRecordMatcher(D)}function x(D,V){if(V=de({},V||l.value),typeof D=="string"){const P=ui(n,D,V.path),C=t.resolve({path:P.path},V),A=i.createHref(P.fullPath);return de(P,C,{params:f(C.params),hash:Wn(P.hash),redirectedFrom:void 0,href:A})}let H;if(D.path!=null)H=de({},D,{path:ui(n,D.path,V.path).path});else{const P=de({},D.params);for(const C in P)P[C]==null&&delete P[C];H=de({},D,{params:c(P)}),V.params=c(V.params)}const X=t.resolve(H,V),re=D.hash||"";X.params=u(f(X.params));const y=Ud(s,de({},D,{hash:Md(re),path:X.path})),v=i.createHref(y);return de({fullPath:y,hash:re,query:s===ir?sf(D.query):D.query||{}},X,{redirectedFrom:void 0,href:v})}function b(D){return typeof D=="string"?ui(n,D,l.value.path):de({},D)}function S(D,V){if(d!==D)return yn(Ie.NAVIGATION_CANCELLED,{from:V,to:D})}function I(D){return M(D)}function O(D){return I(de(b(D),{replace:!0}))}function T(D,V){const H=D.matched[D.matched.length-1];if(H&&H.redirect){const{redirect:X}=H;let re=typeof X=="function"?X(D,V):X;return typeof re=="string"&&(re=re.includes("?")||re.includes("#")?re=b(re):{path:re},re.params={}),de({query:D.query,hash:D.hash,params:re.path!=null?{}:D.params},re)}}function M(D,V){const H=d=x(D),X=l.value,re=D.state,y=D.force,v=D.replace===!0,P=T(H,X);if(P)return M(de(b(P),{state:typeof P=="object"?de({},re,P.state):re,force:y,replace:v}),V||H);const C=H;C.redirectedFrom=V;let A;return!y&&Gd(s,X,H)&&(A=yn(Ie.NAVIGATION_DUPLICATED,{to:C,from:X}),Pe(X,X,!0,!1)),(A?Promise.resolve(A):j(C,X)).catch(E=>xt(E)?xt(E,Ie.NAVIGATION_GUARD_REDIRECT)?E:me(E):Q(E,C,X)).then(E=>{if(E){if(xt(E,Ie.NAVIGATION_GUARD_REDIRECT))return M(de({replace:v},b(E.to),{state:typeof E.to=="object"?de({},re,E.to.state):re,force:y}),V||C)}else E=q(C,X,!0,v,re);return B(C,X,E),E})}function L(D,V){const H=S(D,V);return H?Promise.reject(H):Promise.resolve()}function _(D){const V=De.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(D):D()}function j(D,V){let H;const[X,re,y]=rf(D,V);H=fi(X.reverse(),"beforeRouteLeave",D,V);for(const P of X)P.leaveGuards.forEach(C=>{H.push(Ft(C,D,V))});const v=L.bind(null,D,V);return H.push(v),Ge(H).then(()=>{H=[];for(const P of o.list())H.push(Ft(P,D,V));return H.push(v),Ge(H)}).then(()=>{H=fi(re,"beforeRouteUpdate",D,V);for(const P of re)P.updateGuards.forEach(C=>{H.push(Ft(C,D,V))});return H.push(v),Ge(H)}).then(()=>{H=[];for(const P of y)if(P.beforeEnter)if(ut(P.beforeEnter))for(const C of P.beforeEnter)H.push(Ft(C,D,V));else H.push(Ft(P.beforeEnter,D,V));return H.push(v),Ge(H)}).then(()=>(D.matched.forEach(P=>P.enterCallbacks={}),H=fi(y,"beforeRouteEnter",D,V,_),H.push(v),Ge(H))).then(()=>{H=[];for(const P of r.list())H.push(Ft(P,D,V));return H.push(v),Ge(H)}).catch(P=>xt(P,Ie.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function B(D,V,H){a.list().forEach(X=>_(()=>X(D,V,H)))}function q(D,V,H,X,re){const y=S(D,V);if(y)return y;const v=V===Rt,P=ln?history.state:{};H&&(X||v?i.replace(D.fullPath,de({scroll:v&&P&&P.scroll},re)):i.push(D.fullPath,re)),l.value=D,Pe(D,V,H,v),me()}let ee;function oe(){ee||(ee=i.listen((D,V,H)=>{if(!dt.listening)return;const X=x(D),re=T(X,dt.currentRoute.value);if(re){M(de(re,{replace:!0,force:!0}),X).catch($n);return}d=X;const y=l.value;ln&&Qd(sr(y.fullPath,H.delta),Us()),j(X,y).catch(v=>xt(v,Ie.NAVIGATION_ABORTED|Ie.NAVIGATION_CANCELLED)?v:xt(v,Ie.NAVIGATION_GUARD_REDIRECT)?(M(de(b(v.to),{force:!0}),X).then(P=>{xt(P,Ie.NAVIGATION_ABORTED|Ie.NAVIGATION_DUPLICATED)&&!H.delta&&H.type===Ai.pop&&i.go(-1,!1)}).catch($n),Promise.reject()):(H.delta&&i.go(-H.delta,!1),Q(v,X,y))).then(v=>{v=v||q(X,y,!1),v&&(H.delta&&!xt(v,Ie.NAVIGATION_CANCELLED)?i.go(-H.delta,!1):H.type===Ai.pop&&xt(v,Ie.NAVIGATION_ABORTED|Ie.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),B(X,y,v)}).catch($n)}))}let pe=Cn(),ne=Cn(),z;function Q(D,V,H){me(D);const X=ne.list();return X.length?X.forEach(re=>re(D,V,H)):console.error(D),Promise.reject(D)}function Ce(){return z&&l.value!==Rt?Promise.resolve():new Promise((D,V)=>{pe.add([D,V])})}function me(D){return z||(z=!D,oe(),pe.list().forEach(([V,H])=>D?H(D):V()),pe.reset()),D}function Pe(D,V,H,X){const{scrollBehavior:re}=e;if(!ln||!re)return Promise.resolve();const y=!H&&Jd(sr(D.fullPath,0))||(X||!H)&&history.state&&history.state.scroll||null;return Ms().then(()=>re(D,V,y)).then(v=>v&&Yd(v)).catch(v=>Q(v,D,V))}const ve=D=>i.go(D);let Xe;const De=new Set,dt={currentRoute:l,listening:!0,addRoute:p,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:w,getRoutes:m,resolve:x,options:e,push:I,replace:O,go:ve,back:()=>ve(-1),forward:()=>ve(1),beforeEach:o.add,beforeResolve:r.add,afterEach:a.add,onError:ne.add,isReady:Ce,install(D){D.component("RouterLink",Ef),D.component("RouterView",Lf),D.config.globalProperties.$router=dt,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>ue(l)}),ln&&!Xe&&l.value===Rt&&(Xe=!0,I(i.location).catch(X=>{}));const V={};for(const X in Rt)Object.defineProperty(V,X,{get:()=>l.value[X],enumerable:!0});D.provide(so,dt),D.provide(io,la(V)),D.provide(ki,l);const H=D.unmount;De.add(D),D.unmount=function(){De.delete(D),De.size<1&&(d=Rt,ee&&ee(),ee=null,l.value=Rt,Xe=!1,z=!1),H()}}};function Ge(D){return D.reduce((V,H)=>V.then(()=>_(H)),Promise.resolve())}return dt}function Nf(e){return at(io)}const Of="modulepreload",Rf=function(e){return"/"+e},hr={},dl=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Rf(l),l in hr)return;hr[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const c=document.createElement("link");if(c.rel=d?"stylesheet":Of,d||(c.as="script"),c.crossOrigin="",c.href=l,a&&c.setAttribute("nonce",a),document.head.appendChild(c),d)return new Promise((f,p)=>{c.addEventListener("load",f),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return i.then(r=>{for(const a of r||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};let pi=null;async function Mf(){pi||(pi=dl(()=>import("./pdf-DfaD4CCm.js"),[]));const e=await pi;return e.GlobalWorkerOptions.workerSrc||(e.GlobalWorkerOptions.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${e.version}/legacy/build/pdf.worker.min.mjs`),e}async function $f(e){const t=await Mf(),n=await e.arrayBuffer(),i=await t.getDocument({data:n,useWorkerFetch:!0,isEvalSupported:!1}).promise,o=[];for(let a=1;a<=i.numPages;a++){const u=(await(await i.getPage(a)).getTextContent()).items.map(c=>"str"in c?c.str:"").filter(Boolean).join(" ").replace(/\s+/g," ").trim();u&&o.push(u)}const r=o.join(`
`);if(!r.trim())throw new Error("PDF ");return r}function jf(e){let t=e;const n=[[/S\s+ubjective/g,"Subjective"],[/O\s+bjective/g,"Objective"],[/A\s+ssessment/g,"Assessment"],[/P\s+lan\b/g,"Plan"],[/P\s+rocedure/g,"Procedure"],[/D\s+iagnosis/g,"Diagnosis"],[/I\s+NITIAL/g,"INITIAL"],[/E\s+VALUATION/g,"EVALUATION"],[/F\s+ollow/g,"Follow"],[/P\s+atient/g,"Patient"],[/T\s+ongue/g,"Tongue"],[/P\s+ulse/g,"Pulse"],[/I\s+nspection/g,"Inspection"],[/T\s+ightness/g,"Tightness"],[/T\s+enderness/g,"Tenderness"],[/M\s+uscles/g,"Muscles"],[/S\s+pasm/g,"Spasm"],[/N\s+eedle/g,"Needle"],[/G\s+rading/g,"Grading"],[/F\s+requency/g,"Frequency"],[/F\s+lexion/g,"Flexion"],[/E\s+xtension/g,"Extension"],[/A\s+bduction/g,"Abduction"],[/A\s+dduction/g,"Adduction"],[/R\s+otation/g,"Rotation"],[/C\s+ervical/g,"Cervical"],[/L\s+umbar/g,"Lumbar"],[/S\s+trength/g,"Strength"],[/S\s+timulation/g,"Stimulation"],[/O\s+peration/g,"Operation"],[/R\s+emoving/g,"Removing"],[/W\s+alking/g,"Walking"],[/M\s+edical/g,"Medical"],[/C\s+ontraindication/g,"Contraindication"],[/P\s+recision/g,"Precision"],[/I\s+ntermittent/g,"Intermittent"],[/O\s+ccasional/g,"Occasional"],[/F\s+requent\b/g,"Frequent"],[/C\s+onstant/g,"Constant"],[/I\s+mpaired/g,"Impaired"],[/P\s+rinted/g,"Printed"],[/e\s+lectrical/gi,"electrical"],[/s\s+timulation/gi,"stimulation"]];for(const[i,o]of n)t=t.replace(i,o);t=t.replace(/\bpa\s+i\s+n\b/gi,"pain"),t=t.replace(/ {2,}/g," ");const s=["Subjective:","Objective:","Assessment:","Plan:","Inspection:","Tightness muscles","Tenderness muscles","Muscles spasm","Muscles Strength","Tongue","Pulse","Pain Scale:","Pain Frequency:","Diagnosis Code:","Procedure Code:","Select Needle Size","Total Operation Time","Front Points:","Back Points:","Today's TCM treatment principles:","Today's treatment principles:","TCM Dx:","Walking aid","Medical history","Grading Scale:","Tenderness Scale:","Frequency Grading Scale:"];for(const i of s){const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp(`(?<!^|\\n)\\s*(${o})`,"gi"),`
$1`)}return t=t.replace(new RegExp("(?<!\\/)(\\d{2}\\/\\d{2}\\/\\d{4})\\s+(Subjective:)","g"),`$1
$2`),t}function fl(e){const t=[],n=[];try{const s=jf(e),i=Ff(s);if(!i)return t.push({field:"header",message:"Failed to parse document header"}),{success:!1,errors:t,warnings:n};const o=Hf(s);if(o.length===0)return t.push({field:"visits",message:"No visit records found"}),{success:!1,errors:t,warnings:n};const r=[];for(let l=0;l<o.length;l++){const d=Uf(o[l],l);d.record&&r.push(d.record),t.push(...d.errors),n.push(...d.warnings)}if(r.length===0)return t.push({field:"visits",message:"Failed to parse any visit records"}),{success:!1,errors:t,warnings:n};const a=Bf(r.reverse());return{success:!0,document:{header:i,visits:a},errors:t,warnings:n}}catch(s){return t.push({field:"parser",message:`Unexpected error: ${s instanceof Error?s.message:"Unknown error"}`}),{success:!1,errors:t,warnings:n}}}function Bf(e){var s;const t=e.find(i=>i.subjective.visitType==="INITIAL EVALUATION"),n=(t==null?void 0:t.assessment.systemicPattern)||((s=t==null?void 0:t.assessment.tcmDiagnosis)==null?void 0:s.pattern)||"";return e.map(i=>(!i.assessment.systemicPattern&&n&&(i.assessment.systemicPattern=n),i))}function Ff(e){const t=/^([A-Z]+,\s*[A-Z\s]+)\s*\(DOB:\s*(\d{2}\/\d{2}\/\d{4})\s*ID:\s*(\d{10})\)\s*Date of Service:\s*(\d{2}\/\d{2}\/\d{4})\s*Printed on:\s*(\d{2}\/\d{2}\/\d{4})/m,n=e.match(t),s=/PATIENT:\s*([A-Z]+,\s*[A-Z\s]+?)\s*Gender\s*:\s*(Male|Female)/m,i=e.match(s),o=/DOB:\s*(\d{2}\/\d{2}\/\d{4})\s*AGE AS OF\s*(\d{2}\/\d{2}\/\d{4})\s*:\s*(\d+)y/m,r=e.match(o);if(n)return{patient:{name:n[1].trim(),dob:n[2],patientId:n[3],gender:(i==null?void 0:i[2])||"Female",age:r?parseInt(r[3],10):0,ageAsOfDate:(r==null?void 0:r[2])||n[5]},dateOfService:n[4],printedOn:n[5]};if(i&&r){const a=e.indexOf(r[0])+r[0].length,l=e.slice(a).match(/(\d{2}\/\d{2}\/\d{4})/);return{patient:{name:i[1].trim(),dob:r[1],patientId:"",gender:i[2]||"Female",age:parseInt(r[3],10),ageAsOfDate:r[2]},dateOfService:(l==null?void 0:l[1])||r[2],printedOn:r[2]}}return null}function Hf(e){return e.split(/(?=\bSubjective:?[\s\n])/i).filter(n=>/\bSubjective:?[\s\n]/i.test(n)&&n.trim().length>200)}function Uf(e,t){const n=[],s=[],i=Gf(e);if(!i)return n.push({field:`visit[${t}].subjective`,message:"Failed to parse Subjective section"}),{record:null,errors:n,warnings:s};const o=Yf(e);o||s.push({field:`visit[${t}].objective`,message:"Failed to parse Objective section"});const r=np(e);r||s.push({field:`visit[${t}].assessment`,message:"Failed to parse Assessment section"});const a=ip(e);a||s.push({field:`visit[${t}].plan`,message:"Failed to parse Plan section"});const l=rp(e),d=ap(e);l.length===0&&s.push({field:`visit[${t}].diagnosisCodes`,message:"No diagnosis codes found"}),d.length===0&&s.push({field:`visit[${t}].procedureCodes`,message:"No procedure codes found"});const u={inspection:"local skin no damage or rash",tightnessMuscles:{muscles:[],gradingScale:"moderate"},tendernessMuscles:{muscles:[],scale:2,scaleDescription:"moderate"},spasmMuscles:{muscles:[],frequencyScale:2,scaleDescription:"moderate"},rom:{bodyPart:"Unknown",items:[]},tonguePulse:{tongue:"N/A",pulse:"N/A"}},c={date:"",generalCondition:"good",symptomChange:"improvement",physicalFindingChange:"",currentPattern:""},f={needleSpecs:[],treatmentTime:15,treatmentPosition:"Back Points",acupoints:[],electricalStimulation:!1,treatmentPrinciples:""},p=e.match(/(\d{2}\/\d{2}\/\d{4})\s*\n?\s*Subjective:/i),g=(p==null?void 0:p[1])||"";return r&&!r.date&&g&&(r.date=g),!r&&g&&(c.date=g),{record:{subjective:i,objective:o||u,assessment:r||c,plan:a||f,diagnosisCodes:l,procedureCodes:d},errors:n,warnings:s}}function Gf(e){var oe,pe,ne,z,Q,Ce;const n=/Subjective:?\s*\n?\s*INITIAL EVALUATION/i.test(e)?"INITIAL EVALUATION":"Follow up visit",s=/Patient(?:\s+still)?\s+c\/o\s+(.+?)(?=Pain Scale|$)/is,i=e.match(s),o=((oe=i==null?void 0:i[1])==null?void 0:oe.trim())||"",r=Kf(o,e),a=zf(o),l=Xf(o),{normalizedBodyPart:d,laterality:u}=Wf(o||l),c=!/without radiation/i.test(o),f=/(?:muscles?\s+(?:weakness|soreness|heaviness|numbness))\s*\(?\s*scale\s+as\s+(\d+%(?:-\d+%)?)\)?/i,p=e.match(f),g=(p==null?void 0:p[1])||"",m=/impaired performing ADL'?s?\s+with\s+(.+?)(?=Pain Scale|$)/is,w=e.match(m);let x=((pe=w==null?void 0:w[1])==null?void 0:pe.trim())||"";if(!x){const me=/There is\s+((?:mild|moderate|severe)(?:\s+to\s+(?:mild|moderate|severe))?)\s+difficulty with ADLs? like\s+(.+?)(?=\.\s|\n\n|Pain Scale|$)/is,Pe=e.match(me);Pe&&(x=`${Pe[1]} difficulty ${Pe[2].trim()}`)}const b=Vf(x),S=qf(e);if(!S)return null;const I=/Pain [Ff]requency:\s*(Intermittent|Occasional|Frequent|Constant)\s*\(([^)]*?)\)/i,O=e.match(I),T=(O==null?void 0:O[1])||"Frequent",M=((ne=O==null?void 0:O[2])==null?void 0:ne.trim())||"",L=/Walking aid\s*:\s*(.+?)(?=\n|Medical history)/i,_=e.match(L),j=(z=_==null?void 0:_[1])==null?void 0:z.trim(),B=/Medical history\/Contraindication or Precision:\s*(.+?)(?=\n\s*Objective|$)/i,q=e.match(B),ee=((Q=q==null?void 0:q[1])==null?void 0:Q.trim())!=="N/A"?(Ce=q==null?void 0:q[1])==null?void 0:Ce.split(",").map(me=>me.trim()):void 0;return{visitType:n,chiefComplaint:o,chronicityLevel:r,painTypes:a,bodyPart:l,bodyPartNormalized:d,laterality:u,radiation:c,muscleWeaknessScale:g,adlImpairment:x,adlDifficultyLevel:b,painScale:S,painFrequency:T,painFrequencyRange:M,walkingAid:j,medicalHistory:ee}}function Kf(e,t){const n=`${e} ${t}`.toLowerCase();return/\bsub\s*acute\b/.test(n)?"Sub Acute":/\bchronic\b/.test(n)?"Chronic":"Acute"}function Vf(e){const t=(e||"").toLowerCase();return t.includes("moderate to severe")?"moderate to severe":t.includes("mild to moderate")?"mild to moderate":t.includes("severe")?"severe":t.includes("moderate")?"moderate":"mild"}function Wf(e){const t=e.toLowerCase(),n=/\bbilateral\b/.test(t)?"bilateral":/\bleft\b/.test(t)?"left":/\bright\b/.test(t)?"right":"unspecified";return/\bknee\b/.test(t)?{normalizedBodyPart:"KNEE",laterality:n}:/\bshoulder\b/.test(t)?{normalizedBodyPart:"SHOULDER",laterality:n}:/\belbow\b/.test(t)?{normalizedBodyPart:"ELBOW",laterality:n}:/\bhip\b/.test(t)?{normalizedBodyPart:"HIP",laterality:n}:/\bneck\b|\bcervical\b/.test(t)?{normalizedBodyPart:"NECK",laterality:n}:/\blower back\b|\blbp\b/.test(t)?{normalizedBodyPart:"LBP",laterality:n}:/\bupper back\b/.test(t)?{normalizedBodyPart:"UPPER_BACK",laterality:n}:{normalizedBodyPart:"UNKNOWN",laterality:n}}function qf(e){const t=/Pain Scale:\s*Worst:\s*(\d+(?:-\d+)?)\s*;\s*Best:\s*(\d+(?:-\d+)?)\s*;\s*Current:\s*(\d+)/i,n=e.match(t);if(n){const o=d=>{if(d.includes("-")){const[u,c]=d.split("-").map(f=>parseInt(f,10));return{min:u,max:c}}return parseInt(d,10)},r=o(n[1]),a=o(n[2]),l=parseInt(n[3],10);return{worst:typeof r=="number"?r:r.min,best:a,current:l}}const s=/Pain Scale:\s*(\d+(?:-\d+)?)\s*\/10/i,i=e.match(s);if(i){const o=i[1];if(o.includes("-")){const[r,a]=o.split("-").map(l=>parseInt(l,10));return{value:r,range:{min:r,max:a}}}return{value:parseInt(o,10)}}return null}function zf(e){const t=["Dull","Aching","Freezing","Shooting","pin & needles","pricking","weighty"],n=[];for(const s of t)new RegExp(s,"i").test(e)&&n.push(s);return n}function Xf(e){const t=["right knee","left knee","right shoulder","left shoulder","right elbow","left elbow","neck","cervical","lower back","upper back","midback","middle back","bilateral midback"];for(const i of t)if(new RegExp(i,"i").test(e))return i;const n=/pain\s+(?:along|in)\s+([a-z]+\s+[a-z]+(?:\s+area)?)/i,s=e.match(n);return s?s[1].trim():""}function Yf(e){var u;const t=/Inspection:\s*(.+?)(?=\n|tongue|Muscles Testing)/i,n=e.match(t),s=((u=n==null?void 0:n[1])==null?void 0:u.trim())||"local skin no damage or rash";let i;/joint swelling/i.test(s)?i="joint swelling":/weak muscles/i.test(s)?i="weak muscles and dry skin without luster":i="local skin no damage or rash";const o=Qf(e);if(!o)return null;const r=Jf(e);if(!r)return null;const a=Zf(e);if(!a)return null;const l=ep(e);if(!l)return null;const d=tp(e);return d?{inspection:i,tightnessMuscles:o,tendernessMuscles:r,spasmMuscles:a,rom:l,tonguePulse:d}:null}function Qf(e){const t=/Tightness muscles?\s+noted\s+along:?\s*(.+?)(?:\n\s*)?Grading Scale:\s*(mild to moderate|moderate to severe|mild|moderate|severe)/is,n=e.match(t);if(!n)return null;const s=n[1].split(/,\s*(?!Band)|\s+and\s+/).map(o=>o.trim().replace(/\s*\n\s*/g," ")).filter(o=>o.length>0&&!/grading/i.test(o)),i=n[2].toLowerCase();return{muscles:s,gradingScale:i}}function Jf(e){const t=/Tenderness muscles?\s+(?:noted\s+)?along:?\s*(.+?)(?:\n\s*)?(?:Grading|Tenderness)\s+Scale:\s*\(\+(\d)\)\s*=?\s*(.+?)(?=\n|Muscles spasm|Spasm|$)/is,n=e.match(t);return n?{muscles:n[1].split(/,\s*(?!Band)|\s+and\s+/).map(i=>i.trim().replace(/\s*\n\s*/g," ")).filter(i=>i.length>0&&!/grading|tenderness|scale/i.test(i)),scale:parseInt(n[2],10),scaleDescription:n[3].trim()}:null}function Zf(e){const t=/Muscles?\s*spasm\s+noted\s+along:?\s*(.+?):?\s*(?:\n\s*)?Frequency\s*Grading\s*Scale:\s*\(\+(\d)\)\s*=?>?\s*(.+?)(?=\n|[A-Z][a-z]+ (?:Knee|Shoulder|elbow|Elbow|Muscles)|Muscles Strength|$)/is,n=e.match(t);return n?{muscles:n[1].split(/,\s*(?!Band)|\s+and\s+/).map(i=>i.trim().replace(/\s*\n\s*/g," ")).filter(i=>i.length>0&&!/frequency|grading|scale/i.test(i)),frequencyScale:parseInt(n[2],10),scaleDescription:n[3].trim()}:null}function ep(e){const t=/((?:Left|Right)\s+(?:Knee|Shoulder|Elbow|elbow)|Cervical|Lumbar)\s+Muscles Strength and (?:Joint|Spine) ROM(?:\s+Assessment)?:?/i,n=e.match(t);let s=(n==null?void 0:n[1])||"";if(!s&&/Muscles Strength and (?:Joint|Spine) ROM/i.test(e)){const l=e.match(/c\/o.*?(?:right|left)\s+(\w+)/i);s=l?`Right ${l[1]}`:"Unknown"}const i=/(\d[+-]?)\/5\s+([A-Za-z]+)(?:\([^)]+\))?:\s*(-?\d+)\s*(?:[Dd]egrees?)?\s*\(?(\w+)\)?/g,o=[];let r;for(;(r=i.exec(e))!==null;)o.push({strength:`${r[1]}/5`,movement:r[2].trim(),degrees:parseInt(r[3],10),severity:r[4].toLowerCase()});return o.length===0?null:{bodyPart:s||"Unknown",items:o}}function tp(e){const t=/tongue\s*:?\s*\n?\s*(.+?)(?=\n?\s*pulse)/is,n=/pulse\s*:?\s*\n?\s*(.+?)(?=\n\s*Assessment|\n\s*\d{2}\/\d{2}\/\d{4}|$)/is,s=e.match(t),i=e.match(n);if(s&&i)return{tongue:s[1].trim().replace(/\s+/g," "),pulse:i[1].trim().replace(/\s+/g," ")};const o=/tongue\s*:?\s*(.+?)\s+pulse\s*:?\s*(.+?)(?=\n|Assessment|$)/is,r=e.match(o);return r?{tongue:r[1].trim(),pulse:r[2].trim()}:/Assessment:/i.test(e)?{tongue:"N/A",pulse:"N/A"}:null}function np(e){var T,M,L,_,j,B,q;if(!/Assessment\s*:?[\s\n]/i.test(e))return null;const t=/(\d{2}\/\d{2}\/\d{4})\s*\n?\s*(?:Assessment:|Tongue)/i,n=e.match(t),s=e.match(/^(\d{2}\/\d{2}\/\d{4})/),i=(n==null?void 0:n[1])||(s==null?void 0:s[1])||"",o=/general condition is\s+(good|fair|poor)/i,r=e.match(o),a=((T=r==null?void 0:r[1])==null?void 0:T.toLowerCase())||"good",l=/presents with\s+(improvement|slight improvement|no change|exacerbate)/i,d=e.match(l),u=((M=d==null?void 0:d[1])==null?void 0:M.toLowerCase())||"improvement",c=/physical finding has\s+(.+?)(?=\.\s+Patient|$)/is,f=e.match(c),p=((L=f==null?void 0:f[1])==null?void 0:L.trim())||"",g=/Current patient still has\s+(.+?)(?=\.\n|\.\s|that cause)/is,m=e.match(g);let w=((_=m==null?void 0:m[1])==null?void 0:_.trim())||"";if(!w){const ee=/due to\s+(.+?)\s+in local meridian/i,oe=e.match(ee);w=((j=oe==null?void 0:oe[1])==null?void 0:j.trim())||""}const x=sp(w);let b,S;const I=/TCM Dx\s*:\s*\n?\s*(.+?)(?=Today's TCM|$)/is,O=e.match(I);if(O){const ee=/(.+?)\s+due to\s+(.+?)(?:,\s*but|in local)/is,oe=O[1].match(ee),pe=/Today's TCM treatment principles\s*:\s*\n?\s*(.+?)(?=Acupuncture Eval|Plan|$)/is,ne=e.match(pe),z=O[1].match(/but patient also has\s+(.+?)\s+in the general/is);oe&&(b={diagnosis:oe[1].trim(),pattern:oe[2].trim(),treatmentPrinciples:((B=ne==null?void 0:ne[1])==null?void 0:B.trim())||""},S=(q=z==null?void 0:z[1])==null?void 0:q.trim())}return{date:i,generalCondition:a,symptomChange:u,physicalFindingChange:p,tcmDiagnosis:b,currentPattern:w,localPattern:x,systemicPattern:S||void 0}}function sp(e){return e?e.replace(/\sin\s+local\s+meridian.*$/i,"").replace(/\s+that\s+cause.*$/i,"").trim():""}function ip(e){var x;const t=/Select Needle Size\s*:\s*(.+?)(?=\n|Daily|Total)/i,n=e.match(t),s=op((n==null?void 0:n[1])||""),i=/Total Operation Time\s*:\s*(\d+)\s*mins?/i,o=e.match(i),r=o?parseInt(o[1],10):15,a=/(Front|Back)\s*Points\s*:/i,l=e.match(a),d=l?l[1]+" Points":"Back Points";let u=[];const c=/(?:with|without)\s+electrical\s+stimulation\s+([A-Z0-9,\s]+?)(?=\n\n|\nRemoving|Removing|Diagnosis|$)/i,f=e.match(c);if(f&&(u=f[1].split(/,\s*/).map(b=>b.trim()).filter(b=>b.length>0&&/^[A-Z]/.test(b))),u.length===0){const b=/(?:Front|Back)\s*Points\s*:\s*(.+?)(?=\n\n|Removing|Diagnosis|Total|$)/is,S=e.match(b);S&&(u=S[1].split(/,\s*/).map(I=>I.trim()).filter(I=>I.length>0&&/^[A-Z]/.test(I)))}const p=/with electrical stimulation/i.test(e),g=/Today's treatment principles\s*:\s*\n?\s*(.+?)(?=\n\s*Diagnosis Code|Diagnosis Code|$)/is,m=e.match(g),w=((x=m==null?void 0:m[1])==null?void 0:x.trim())||"";return!n&&!o&&!l&&u.length===0?null:{needleSpecs:s,treatmentTime:r,treatmentPosition:d,acupoints:u,electricalStimulation:p,treatmentPrinciples:w}}function op(e){const t=[],n=/(\d+)#\s*x?\s*([\d.]+)"/g;let s;for(;(s=n.exec(e))!==null;)t.push({gauge:`${s[1]}#`,length:`${s[2]}"`});return t}function rp(e){const t=[],n=/Diagnosis Code\s*:\s*\(?\d+\)?\s*(.+?)\(([A-Z]\d+\.?\d*)\)/gi;let s;for(;(s=n.exec(e))!==null;)t.push({description:s[1].trim(),icd10:s[2]});return t}function ap(e){var a;const t=[],n=/Procedure Code\s*:\s*(?:\(?\d+\)?\s*)?(.+?)\((\d+(?:-\d+)?)\)/gi;let s;for(;(s=n.exec(e))!==null;)t.push({description:s[1].trim(),cpt:s[2]});const i=/\((\d+)\)\s*(.+?)\((\d+(?:-\d+)?)\)/g,o=((a=e.match(/Procedure Code\s*:[\s\S]+?(?=\n\n|Printed on|$)/i))==null?void 0:a[0])||"";let r;for(;(r=i.exec(o))!==null;)t.some(d=>d.cpt===r[3])||t.push({description:r[2].trim(),cpt:r[3]});return t}const lp=[{pattern:/\bright\s+knee\b/i,bodyPart:"KNEE",laterality:"right"},{pattern:/\bleft\s+knee\b/i,bodyPart:"KNEE",laterality:"left"},{pattern:/\bbilateral\s+knee\b/i,bodyPart:"KNEE",laterality:"bilateral"},{pattern:/\bright\s+shoulder\b/i,bodyPart:"SHOULDER",laterality:"right"},{pattern:/\bleft\s+shoulder\b/i,bodyPart:"SHOULDER",laterality:"left"},{pattern:/\bbilateral\s+shoulder\b/i,bodyPart:"SHOULDER",laterality:"bilateral"},{pattern:/\bcervical\b|\bneck\b/i,bodyPart:"NECK"},{pattern:/\blower back\b|\blbp\b/i,bodyPart:"LBP"},{pattern:/\bhip\b/i,bodyPart:"HIP"},{pattern:/\belbow\b/i,bodyPart:"ELBOW"}];function pl(e){for(const t of lp)if(t.pattern.test(e))return{bodyPart:t.bodyPart,laterality:t.laterality||yr(e)};return{bodyPart:"SHOULDER",laterality:yr(e)}}function yr(e){return/\bbilateral\b/i.test(e)?"bilateral":/\bleft\b/i.test(e)?"left":/\bright\b/i.test(e)?"right":"unspecified"}function ml(e){return e?e.replace(/\sin\s+local\s+meridian.*$/i,"").replace(/\s+that\s+cause.*$/i,"").trim():"Qi Stagnation"}function cp(e,t="Blood Deficiency"){var i,o,r;const n=e.visits.find(a=>a.subjective.visitType==="INITIAL EVALUATION");return((r=(o=(i=n==null?void 0:n.assessment)==null?void 0:i.tcmDiagnosis)==null?void 0:o.pattern)==null?void 0:r.trim())||t}function up(e){const t=(e||"").toLowerCase();return t.includes("moderate to severe")?"moderate to severe":t.includes("mild to moderate")?"mild to moderate":t.includes("severe")?"severe":t.includes("moderate")?"moderate":"mild"}function gl(e){const t=e.subjective.adlDifficultyLevel;return t||up(e.subjective.adlImpairment)}function dp(e){var n;const t=e.subjective.painScale;return typeof(t==null?void 0:t.current)=="number"?t.current:typeof(t==null?void 0:t.value)=="number"?t.value:typeof((n=t==null?void 0:t.range)==null?void 0:n.max)=="number"?t.range.max:7}function hl(e){return e.procedureCodes.some(n=>n.cpt==="97810")?"OPTUM":"WC"}function yl(e){var l,d,u,c,f;const{bodyPart:t,laterality:n}=pl(e.subjective.bodyPart||e.subjective.chiefComplaint),s=dp(e),i=(l=e.subjective.painScale)==null?void 0:l.best,o=typeof i=="number"?i:(i==null?void 0:i.min)||s-2,r=ml(e.assessment.currentPattern||""),a=((d=e.assessment.tcmDiagnosis)==null?void 0:d.pattern)||"Blood Deficiency";return{header:{patientId:"",visitDate:e.assessment.date||"",noteType:e.subjective.visitType==="INITIAL EVALUATION"?"IE":"TX",insuranceType:hl(e)},subjective:{visitType:e.subjective.visitType,chronicityLevel:e.subjective.chronicityLevel||(/\bchronic\b/i.test(e.subjective.chiefComplaint)?"Chronic":/\bsub\s*acute\b/i.test(e.subjective.chiefComplaint)?"Sub Acute":"Acute"),primaryBodyPart:{bodyPart:t,laterality:n},secondaryBodyParts:[],painTypes:e.subjective.painTypes,painRadiation:e.subjective.radiation?"with radiation":"without radiation",symptomDuration:{value:1,unit:"month(s)"},associatedSymptoms:[],symptomPercentage:e.subjective.muscleWeaknessScale||"70%",causativeFactors:[],exacerbatingFactors:[],relievingFactors:[],adlDifficulty:{level:gl(e),activities:e.subjective.adlImpairment?[e.subjective.adlImpairment]:[]},activityChanges:[],painScale:{worst:typeof e.subjective.painScale.worst=="number"?e.subjective.painScale.worst:Math.max(s,8),best:o,current:s},painFrequency:e.subjective.painFrequency,walkingAid:e.subjective.walkingAid,medicalHistory:e.subjective.medicalHistory},objective:{muscleTesting:{tightness:{muscles:e.objective.tightnessMuscles.muscles,gradingScale:e.objective.tightnessMuscles.gradingScale},tenderness:{muscles:e.objective.tendernessMuscles.muscles,gradingScale:e.objective.tendernessMuscles.scaleDescription},spasm:{muscles:e.objective.spasmMuscles.muscles,gradingScale:e.objective.spasmMuscles.scaleDescription}},rom:e.objective.rom.items.map(p=>({movement:p.movement,strength:p.strength,degrees:`${p.degrees} degree(${p.severity})`})),inspection:[e.objective.inspection],tonguePulse:{tongue:e.objective.tonguePulse.tongue,pulse:e.objective.tonguePulse.pulse}},assessment:{tcmDiagnosis:{localPattern:r,systemicPattern:a,bodyPart:e.subjective.bodyPart},treatmentPrinciples:{focusOn:"focus",harmonize:"yin/yang",purpose:((u=e.assessment.tcmDiagnosis)==null?void 0:u.treatmentPrinciples)||"promote good essence"},evaluationArea:e.subjective.bodyPart,patientCondition:e.assessment.generalCondition,changeFromLastVisit:e.assessment.symptomChange},plan:{evaluationType:e.subjective.visitType==="INITIAL EVALUATION"?"Initial Evaluation":"Re-Evaluation",contactTime:`${e.plan.treatmentTime}`,steps:[],shortTermGoal:{treatmentFrequency:12,weeksDuration:"5-6 weeks",painScaleTarget:((c=e.plan.shortTermGoal)==null?void 0:c.painScaleTarget)||"5-6",symptomTargets:[]},longTermGoal:{treatmentFrequency:8,weeksDuration:"5-6 weeks",painScaleTarget:((f=e.plan.longTermGoal)==null?void 0:f.painScaleTarget)||"3",symptomTargets:[]},needleProtocol:{needleSizes:e.plan.needleSpecs.map(p=>`${p.gauge}x${p.length}`),totalTime:e.plan.treatmentTime,sections:[]}},diagnosisCodes:e.diagnosisCodes.map(p=>({icd10:p.icd10,description:p.description,bodyPart:t,laterality:n})),procedureCodes:e.procedureCodes.map(p=>({cpt:p.cpt,description:p.description,units:1,electricalStimulation:!1}))}}function vl(e,t){var u,c,f,p;const n=e.visits[t];if(!n)throw new Error(`visitIndex out of range: ${t}`);const s=pl(n.subjective.bodyPart||n.subjective.chiefComplaint),i=n.subjective.bodyPartNormalized,o=i&&i!=="UNKNOWN"?i:s.bodyPart,r=n.subjective.laterality||s.laterality,a=ml(n.assessment.currentPattern||((u=n.assessment.tcmDiagnosis)==null?void 0:u.pattern)||((c=n.assessment.tcmDiagnosis)==null?void 0:c.diagnosis)||"Qi Stagnation"),l=n.assessment.systemicPattern||((f=n.assessment.tcmDiagnosis)==null?void 0:f.pattern)||cp(e),d={noteType:n.subjective.visitType==="INITIAL EVALUATION"?"IE":"TX",insuranceType:hl(n),primaryBodyPart:o,laterality:r,severityLevel:gl(n),chronicityLevel:n.subjective.chronicityLevel||(/\bchronic\b/i.test(n.subjective.chiefComplaint)?"Chronic":/\bsub\s*acute\b/i.test(n.subjective.chiefComplaint)?"Sub Acute":"Acute"),localPattern:a,systemicPattern:l,hasPacemaker:!!((p=n.subjective.medicalHistory)!=null&&p.some(g=>/pacemaker/i.test(g)))};if(d.noteType==="TX"){const g=e.visits.find(m=>m.subjective.visitType==="INITIAL EVALUATION");g&&(d.previousIE=yl(g))}return d}const en={"Qi Stagnation":{name:"Qi Stagnation",chineseName:"",type:"local",tongue:["normal or slightly purple edges","thin white coat"],tongueChineseName:"",pulse:["wiry","string-taut"],pulseChineseName:"",treatmentPrinciples:["moving qi","regulates qi","dredging channel and activating collaterals"],mainSymptoms:["distending pain","pain moves around","emotional stress"]},"Blood Stasis":{name:"Blood Stasis",chineseName:"",type:"local",tongue:["purple","dark purple","petechiae","ecchymosis"],tongueChineseName:"",pulse:["choppy","hesitant"],pulseChineseName:"",treatmentPrinciples:["activating Blood circulation to dissipate blood stagnant","promote circulation, relieves pain"],mainSymptoms:["fixed stabbing pain","worse at night","dark complexion"]},"Qi Stagnation, Blood Stasis":{name:"Qi Stagnation, Blood Stasis",chineseName:"",type:"local",tongue:["purple or dark","thin white coat","purple spots"],tongueChineseName:"",pulse:["wiry","choppy"],pulseChineseName:"",treatmentPrinciples:["promote circulation, relieves pain","moving qi","activating Blood circulation to dissipate blood stagnant"],mainSymptoms:["fixed pain with distension","worse with pressure","emotional stress worsens"]},"Liver Qi Stagnation":{name:"Liver Qi Stagnation",chineseName:"",type:"local",tongue:["normal or slightly red","thin white or thin yellow coat"],tongueChineseName:"",pulse:["wiry"],pulseChineseName:"",treatmentPrinciples:["moving qi","regulates qi","soothing liver qi"],mainSymptoms:["hypochondriac pain","emotional changes","sighing"]},"Blood Deficiency":{name:"Blood Deficiency",chineseName:"",type:"local",tongue:["pale","thin body","thin dry coat"],tongueChineseName:"",pulse:["thready","weak"],pulseChineseName:"",treatmentPrinciples:["nourishing blood","activate blood and relax tendons"],mainSymptoms:["dull pain","numbness","pale complexion"]},"Qi & Blood Deficiency":{name:"Qi & Blood Deficiency",chineseName:"",type:"local",tongue:["pale","thin white coat"],tongueChineseName:"",pulse:["thready","weak"],pulseChineseName:"",treatmentPrinciples:["tonifying qi and blood","strengthening muscles and bone"],mainSymptoms:["fatigue","dizziness","pale complexion","shortness of breath"]},"Wind-Cold Invasion":{name:"Wind-Cold Invasion",chineseName:"",type:"local",tongue:["pale","thin white coat"],tongueChineseName:"",pulse:["floating","tight"],pulseChineseName:"",treatmentPrinciples:["expelling pathogens","dispelling cold","dredging channel and activating collaterals"],mainSymptoms:["aversion to cold","pain worse with cold","stiffness"]},"Cold-Damp + Wind-Cold":{name:"Cold-Damp + Wind-Cold",chineseName:"+",type:"local",tongue:["pale","swollen","thick white greasy coat"],tongueChineseName:"",pulse:["deep","slow","soggy"],pulseChineseName:"",treatmentPrinciples:["dispelling cold, drain the dampness","expelling pathogens"],mainSymptoms:["heavy sensation","cold pain","worse in damp weather"]},"LV/GB Damp-Heat":{name:"LV/GB Damp-Heat",chineseName:"",type:"local",tongue:["red","yellow greasy coat"],tongueChineseName:"",pulse:["wiry","rapid"],pulseChineseName:"",treatmentPrinciples:["clear heat","dispelling the flame","clear damp-heat"],mainSymptoms:["bitter taste","yellow urine","irritability"]},"Phlegm-Damp":{name:"Phlegm-Damp",chineseName:"",type:"local",tongue:["pale","swollen","thick white greasy coat"],tongueChineseName:"",pulse:["slippery","soggy"],pulseChineseName:"",treatmentPrinciples:["drain the dampness","resolve stagnation","dredging channel and activating collaterals"],mainSymptoms:["heavy sensation","numbness","swelling"]},"Phlegm-Heat":{name:"Phlegm-Heat",chineseName:"",type:"local",tongue:["red","yellow greasy coat"],tongueChineseName:"",pulse:["slippery","rapid"],pulseChineseName:"",treatmentPrinciples:["resolve stagnation, clears heat","clear heat"],mainSymptoms:["burning sensation","swelling","redness"]},"Damp-Heat":{name:"Damp-Heat",chineseName:"",type:"local",tongue:["red","yellow greasy coat"],tongueChineseName:"",pulse:["slippery","rapid","soggy"],pulseChineseName:"",treatmentPrinciples:["clear damp-heat","drain the dampness","clear heat"],mainSymptoms:["burning pain","swelling","redness","heavy sensation"]},"Kidney Yang Deficiency":{name:"Kidney Yang Deficiency",chineseName:"",type:"systemic",tongue:["pale","swollen","teeth marks","white moist coat"],tongueChineseName:"",pulse:["deep","slow","weak"],pulseChineseName:"",treatmentPrinciples:["warming kidney yang","strengthening muscles and bone"],mainSymptoms:["cold limbs","fatigue","frequent urination","low back pain"]},"Kidney Yin Deficiency":{name:"Kidney Yin Deficiency",chineseName:"",type:"systemic",tongue:["red","little or no coat","cracks"],tongueChineseName:"",pulse:["thready","rapid"],pulseChineseName:"",treatmentPrinciples:["nourishing kidney yin"],mainSymptoms:["night sweats","hot flashes","dry mouth","tinnitus"]},"Kidney Qi Deficiency":{name:"Kidney Qi Deficiency",chineseName:"",type:"systemic",tongue:["pale","thin white coat"],tongueChineseName:"",pulse:["deep","weak"],pulseChineseName:"",treatmentPrinciples:["tonifying kidney qi"],mainSymptoms:["fatigue","low back weakness","frequent urination"]},"Kidney Essence Deficiency":{name:"Kidney Essence Deficiency",chineseName:"",type:"systemic",tongue:["pale or red","thin coat"],tongueChineseName:"",pulse:["thready","weak"],pulseChineseName:"",treatmentPrinciples:["nourishing kidney essence"],mainSymptoms:["premature aging","memory decline","hair loss"]},"Qi Deficiency":{name:"Qi Deficiency",chineseName:"",type:"systemic",tongue:["pale","swollen","teeth marks","thin white coat"],tongueChineseName:"",pulse:["weak","soft"],pulseChineseName:"",treatmentPrinciples:["tonifying qi"],mainSymptoms:["fatigue","shortness of breath","spontaneous sweating"]},"Spleen Deficiency":{name:"Spleen Deficiency",chineseName:"",type:"systemic",tongue:["pale","swollen","teeth marks","white greasy coat"],tongueChineseName:"",pulse:["weak","soggy"],pulseChineseName:"",treatmentPrinciples:["strengthening spleen"],mainSymptoms:["poor appetite","loose stool","fatigue","bloating"]},"Liver Yang Rising":{name:"Liver Yang Rising",chineseName:"",type:"systemic",tongue:["red","thin yellow coat"],tongueChineseName:"",pulse:["wiry","rapid","forceful"],pulseChineseName:"",treatmentPrinciples:["calming liver yang"],mainSymptoms:["headache","dizziness","irritability","red face"]},"Yin Deficiency Fire":{name:"Yin Deficiency Fire",chineseName:"",type:"systemic",tongue:["red","little coat","cracks"],tongueChineseName:"",pulse:["thready","rapid"],pulseChineseName:"",treatmentPrinciples:["nourishing yin","clearing deficiency fire"],mainSymptoms:["night sweats","hot flashes","dry mouth","insomnia"]}};function fp(e,t){const n=en[t.localPattern];return e.map(s=>{let i=50;const o=[];return n&&(t.localPattern==="Blood Stasis"&&s==="Stabbing"&&(i+=30,o.push("")),t.localPattern==="Qi Stagnation"&&s==="Aching"&&(i+=25,o.push("")),(t.localPattern.includes("Cold")||t.localPattern.includes("Yang Deficiency"))&&s==="Freezing"&&(i+=30,o.push("")),t.localPattern.includes("Damp")&&s==="weighty"&&(i+=25,o.push("")),t.localPattern.includes("Heat")&&s==="Burning"&&(i+=30,o.push(""))),t.chronicityLevel==="Chronic"&&s==="Dull"&&(i+=15,o.push("")),t.chronicityLevel==="Acute"&&s==="Stabbing"&&(i+=10,o.push("")),{option:s,weight:i,reasons:o}})}function pp(e,t){return e.map(n=>{let s=50;const i=[];return t.painScale>=8?(n==="severe"||n==="moderate to severe")&&(s+=30,i.push("8+")):t.painScale>=6?(n==="moderate"||n==="moderate to severe")&&(s+=25,i.push("6-7")):t.painScale>=4?(n==="moderate"||n==="mild to moderate")&&(s+=25,i.push("4-5")):(n==="mild"||n==="mild to moderate")&&(s+=25,i.push("<4")),t.chronicityLevel==="Chronic"&&(n==="moderate"||n==="moderate to severe")&&(s+=10,i.push("")),{option:n,weight:s,reasons:i}})}function mp(e,t){const n=en[t.localPattern];return e.map(s=>{let i=50;const o=[];if(n){const l=n.treatmentPrinciples;for(let d=0;d<l.length;d++){const u=l[d];if(s.toLowerCase().includes(u.toLowerCase())){i+=d===0?50:30,o.push(`${t.localPattern}(${d+1})`);break}}}const a={"Qi Stagnation":["moving qi","regulates qi"],"Blood Stasis":["activating Blood circulation","promote circulation"],"Phlegm-Damp":["drain the dampness"],"Damp-Heat":["clear damp-heat","clear heat"],"Wind-Cold Invasion":["dispelling cold","expelling pathogens"],"Blood Deficiency":["nourishing blood","activate blood"],"Qi & Blood Deficiency":["tonifying qi and blood","strengthening muscles"]}[t.localPattern]||[];for(const l of a)s.toLowerCase().includes(l.toLowerCase())&&(i+=30,o.push(`${t.localPattern}`));return{option:s,weight:i,reasons:o}})}function gp(e,t){const s={LBP:["BL23","BL25","BL40","DU4","GB30","BL52","BL54","YAO JIA JI"],NECK:["GB20","GB21","BL10","SI3","LI4","GB39"],SHOULDER:["LI15","SI9","SI10","SI11","SI12","GB21","JIAN QIAN"],KNEE:["ST34","ST35","ST36","SP9","SP10","GB34","XI YAN","HE DING"],HIP:["GB29","GB30","GB31","BL54","GB34"],ELBOW:["LI10","LI11","LI12","SI8","HT3","LU5"]}[t.bodyPart]||[];return e.map(i=>{let o=50;const r=[];return s.includes(i)&&(o+=35,r.push(`${i}${t.bodyPart}`)),i==="A SHI POINTS"&&(o+=20,r.push("")),{option:i,weight:o,reasons:r}})}function hp(e,t){const s={LBP:["longissimus","Iliopsoas Muscle","Quadratus Lumborum","Gluteal Muscles","The Multifidus muscles","iliocostalis","spinalis"],NECK:["Scalene anterior / med / posterior","Levator Scapulae","Trapezius","sternocleidomastoid muscles"],SHOULDER:["Deltoid","Supraspinatus","Infraspinatus","Teres Minor","Trapezius","Rhomboid"],KNEE:["Quadriceps","Vastus lateralis","Vastus medialis","Hamstrings","Gastrocnemius"],HIP:["Gluteus Maximus","Gluteus Medius","Piriformis","Iliopsoas","TFL"],ELBOW:["Biceps","Triceps","Brachioradialis","Supinator","Pronator"]}[t.bodyPart]||[];return e.map(i=>{let o=50;const r=[];return s.some(a=>i.toLowerCase().includes(a.toLowerCase()))&&(o+=40,r.push(`${i}${t.bodyPart}`)),{option:i,weight:o,reasons:r}})}function yp(e,t){return e.map(n=>{let s=50;const i=[];return n==="with"?t.hasPacemaker?(s=0,i.push("")):["HF","OPTUM"].includes(t.insuranceType)||(s+=20,i.push("")):n==="without"&&(t.hasPacemaker&&(s=100,i.push("")),["HF","OPTUM"].includes(t.insuranceType)&&(s+=30,i.push("HF/OPTUM97810"))),{option:n,weight:s,reasons:i}})}function vp(e,t){return e.map(n=>{let s=50;const i=[],o=parseInt(n,10);return["HF","OPTUM"].includes(t.insuranceType)?o===15&&(s+=50,i.push("HF/OPTUM15")):o===60&&(s+=40,i.push("60")),{option:n,weight:s,reasons:i}})}function bp(e,t){const s={LBP:["Bending over","Lifting","Standing for long periods","Getting out of bed"],NECK:["Tilting head","Turning the head","Looking down","Driving"],SHOULDER:["reach top of cabinet","put on/take off","comb hair","household chores"],KNEE:["Going up and down stairs","Rising from a chair","Walking for long periods","bending knee","Standing for long periods"],HIP:["Walking","Getting in/out of car","Climbing stairs","Sitting for long periods"],ELBOW:["Lifting objects","Carrying bags","Typing","Opening doors"],WRIST:["Typing","Gripping","Writing","Opening jars"],ANKLE:["Walking","Going up/down stairs","Standing on tiptoes","Running"]}[t.bodyPart]||[];return e.map(i=>{let o=50;const r=[];return s.some(a=>i.toLowerCase().includes(a.toLowerCase()))&&(o+=30,r.push(`${i}${t.bodyPart}ADL`)),(t.severityLevel==="severe"||t.severityLevel==="moderate to severe")&&(i.toLowerCase().includes("stair")||i.toLowerCase().includes("rising")||i.toLowerCase().includes("bending"))&&(o+=10,r.push("")),{option:i,weight:o,reasons:r}})}function Ae(e,t,n){return e.includes("painTypes")?fp(t,n):e.includes("level")||e.includes("severity")?pp(t,n):e.includes("treatmentPrinciples")||e.includes("focusOn")?mp(t,n):e.includes("points")||e.includes("needle")?gp(t,n):e.includes("muscle")||e.includes("tightness")?hp(t,n):e.includes("adl")?bp(t,n):e.includes("electrical")||t.includes("with")&&t.includes("without")?yp(t,n):t.some(s=>["15","30","45","60"].includes(s))?vp(t,n):t.map(s=>({option:s,weight:50,reasons:[""]}))}function Je(e){var n;return((n=[...e].sort((s,i)=>i.weight-s.weight)[0])==null?void 0:n.option)||""}function St(e,t=3){return[...e].sort((s,i)=>i.weight-s.weight).slice(0,t).map(s=>s.option)}const mi="/Users/ping/Desktop/Code/2_8/templete",wp=["ie","tx"];let gi=null;function xp(e){return e.replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&nbsp;/gi," ").replace(/\s+/g," ").trim().toLowerCase()}function Pp(){const e=new Set,t=new Map;for(const n of wp)(void 0)((void 0)(mi,n));return(void 0)((void 0)(mi,"tone")),(void 0)((void 0)(mi,"needles")),{allowedFields:e,optionsByField:t}}function bl(){return gi||(gi=Pp()),gi}function Sp(e){const t=bl();for(const n of e.conditions)if(!t.allowedFields.has(n.field))return!1;for(const n of e.effects){if(!t.allowedFields.has(n.targetField))return!1;const s=t.optionsByField.get(n.targetField);if(!s)return!1;for(const i of n.options)if(!s.has(xp(i)))return!1}return!0}function Tp(e){return e.filter(Sp)}function oo(e){const n=bl().optionsByField.get(e);return n?Array.from(n.values()):[]}const Cp=[{id:"tpl_chronicity_chronic",name:": ",description:"Chronic  month/year  Dull/Aching",conditions:[{field:"subjective.chronicityLevel",operator:"equals",value:"Chronic"}],effects:[{targetField:"subjective.symptomDuration.unit",options:["month(s)","year(s)"],weightChange:35,reason:"/"},{targetField:"subjective.painTypes",options:["Dull","Aching"],weightChange:20,reason:"/"},{targetField:"subjective.symptomDuration.value",options:["more than 10","many"],weightChange:30,reason:""}]},{id:"tpl_chronicity_acute",name:": ",description:"Acute  day/week  Stabbing/Shooting",conditions:[{field:"subjective.chronicityLevel",operator:"equals",value:"Acute"}],effects:[{targetField:"subjective.symptomDuration.unit",options:["day(s)","week(s)"],weightChange:35,reason:"/"},{targetField:"subjective.painTypes",options:["Stabbing","Shooting"],weightChange:20,reason:"/"},{targetField:"subjective.symptomDuration.value",options:["1","2","3","4"],weightChange:20,reason:""}]},{id:"tpl_pain_severe",name:": ",description:" >= 8  severe",conditions:[{field:"subjective.painScale.current",operator:"gte",value:8}],effects:[{targetField:"subjective.adlDifficulty.level",options:["severe","moderate to severe"],weightChange:40,reason:"ADL"},{targetField:"subjective.associatedSymptoms",options:["soreness","stiffness","heaviness"],weightChange:20,reason:""}]},{id:"tpl_pain_moderate",name:": ",description:" 5-7  moderate",conditions:[{field:"subjective.painScale.current",operator:"gte",value:5},{field:"subjective.painScale.current",operator:"lte",value:7}],effects:[{targetField:"subjective.adlDifficulty.level",options:["moderate","mild to moderate"],weightChange:30,reason:"ADL"},{targetField:"subjective.associatedSymptoms",options:["soreness","stiffness"],weightChange:15,reason:""}]},{id:"tpl_pain_mild",name:": ",description:" <= 4  mild",conditions:[{field:"subjective.painScale.current",operator:"lte",value:4}],effects:[{targetField:"subjective.adlDifficulty.level",options:["mild","mild to moderate"],weightChange:30,reason:"ADL"},{targetField:"subjective.associatedSymptoms",options:["soreness"],weightChange:10,reason:""}]},{id:"tpl_local_blood_stasis",name:": ",description:"Blood Stasis ",conditions:[{field:"assessment.tcmDiagnosis.localPattern",operator:"equals",value:"Blood Stasis"}],effects:[{targetField:"objective.tonguePulse.tongue",options:["purple"],weightChange:30,reason:""},{targetField:"objective.tonguePulse.pulse",options:["deep"],weightChange:30,reason:""}]},{id:"tpl_local_qi_stagnation",name:": ",description:"Qi Stagnation ",conditions:[{field:"assessment.tcmDiagnosis.localPattern",operator:"equals",value:"Qi Stagnation"}],effects:[{targetField:"subjective.painTypes",options:["Aching","Squeezing"],weightChange:20,reason:"/"},{targetField:"subjective.relievingFactors",options:["stretching","resting","massage"],weightChange:15,reason:""},{targetField:"objective.tonguePulse.tongue",options:["thin white coat"],weightChange:25,reason:""},{targetField:"objective.tonguePulse.pulse",options:["string-taut"],weightChange:25,reason:""}]},{id:"tpl_systemic_kidney_yang_def",name:": ",description:"Kidney Yang Deficiency ",conditions:[{field:"assessment.tcmDiagnosis.systemicPattern",operator:"equals",value:"Kidney Yang Deficiency"}],effects:[{targetField:"objective.tonguePulse.pulse",options:["deep"],weightChange:20,reason:""}]},{id:"tpl_chronic_supporting_chain",name:": ",description:"//ADL//",conditions:[{field:"subjective.chronicityLevel",operator:"equals",value:"Chronic"}],effects:[{targetField:"subjective.causativeFactors",options:["age related/degenerative changes","weather change"],weightChange:25,reason:""},{targetField:"subjective.exacerbatingFactors",options:["any strenuous activities","repetitive motions"],weightChange:20,reason:""},{targetField:"subjective.adlDifficulty.activities",options:["performing household chores","Going up and down stairs"],weightChange:20,reason:"ADL"},{targetField:"subjective.painFrequency",options:["Constant (symptoms occur between 76% and 100% of the time)"],weightChange:20,reason:""},{targetField:"plan.shortTermGoal.treatmentFrequency",options:["12"],weightChange:20,reason:"12"},{targetField:"assessment.generalCondition",options:["fair"],weightChange:15,reason:"fair"},{targetField:"subjective.relievingFactors",options:["resting","stretching","massage","changing positions"],weightChange:20,reason:"///"}]},{id:"tpl_tx_change_improved_reason",name:": ",description:"",conditions:[{field:"subjective.symptomChange",operator:"equals",value:"improvement of symptom(s)"}],effects:[{targetField:"subjective.reasonConnector",options:["because of"],weightChange:25,reason:"because of"},{targetField:"subjective.reason",options:["energy level improved","sleep quality improved","more energy level throughout the day"],weightChange:30,reason:"/"},{targetField:"subjective.reason",options:["reduced level of pain","less difficulty performing daily activities"],weightChange:25,reason:"ADL"}]},{id:"tpl_tx_change_relapse_reason",name:": ",description:"",conditions:[{field:"subjective.symptomChange",operator:"equals",value:"improvement after treatment, but pain still came back next day"}],effects:[{targetField:"subjective.reasonConnector",options:["due to"],weightChange:20,reason:"due to"},{targetField:"subjective.reason",options:["continuous treatment","maintain regular treatments","still need more treatments to reach better effect"],weightChange:30,reason:""}]},{id:"tpl_tx_change_exacerbate_reason",name:": ",description:"",conditions:[{field:"subjective.symptomChange",operator:"equals",value:"exacerbate of symptom(s)"}],effects:[{targetField:"subjective.reasonConnector",options:["due to","because of"],weightChange:20,reason:"due to/because of"},{targetField:"subjective.reason",options:["did not have good rest","intense work","bad posture","exposure to cold air","skipped treatments","stopped treatment for a while","discontinuous treatment","weak constitution"],weightChange:30,reason:"///"}]},{id:"tpl_tx_change_similar_reason",name:": ",description:"",conditions:[{field:"subjective.symptomChange",operator:"equals",value:"similar symptom(s) as last visit"}],effects:[{targetField:"subjective.reasonConnector",options:["and","may related of"],weightChange:20,reason:"and/may related of"},{targetField:"subjective.reason",options:["maintain regular treatments","continuous treatment","uncertain reason"],weightChange:25,reason:"/"}]},{id:"tpl_systemic_deficiency_assoc",name:": ",description:"Deficiency/",conditions:[{field:"assessment.tcmDiagnosis.systemicPattern",operator:"contains",value:"Deficiency"}],effects:[{targetField:"subjective.associatedSymptoms",options:["weakness","numbness"],weightChange:20,reason:"/"}]},{id:"tpl_objective_knee_chain",name:": ",description:"//",conditions:[{field:"subjective.adlDifficulty.activities",operator:"contains",value:"stairs"}],effects:[{targetField:"objective.muscleTesting.muscles",options:["Quadriceps","Hamstrings"],weightChange:25,reason:"/"},{targetField:"objective.muscleTesting.tightness.gradingScale",options:["moderate"],weightChange:20,reason:"moderate"},{targetField:"objective.muscleTesting.tenderness.gradingScale",options:["(+2) = Patient states that the area is moderately tender"],weightChange:20,reason:"(+2)"},{targetField:"plan.needleProtocol.points",options:["A SHI POINTS"],weightChange:20,reason:""}]},{id:"tpl_pattern_defaults",name:": ",description:"",conditions:[{field:"subjective.painScale.current",operator:"gte",value:6}],effects:[{targetField:"assessment.tcmDiagnosis.localPattern",options:["Qi Stagnation","Blood Stasis"],weightChange:20,reason:"/"},{targetField:"assessment.tcmDiagnosis.systemicPattern",options:["Kidney Yang Deficiency","Kidney Qi Deficiency"],weightChange:20,reason:""},{targetField:"assessment.treatmentPrinciples.focusOn",options:["focus","emphasize"],weightChange:20,reason:"focus/emphasize"}]}];function Ip(e,t){const n=t.split(".");let s=e;for(const i of n){if(s==null)return;if(typeof s=="object")s=s[i];else return}return s}function Ep(e,t){const n=Ip(t,e.field);if(n==null)return!1;switch(e.operator){case"equals":return typeof n=="string"&&typeof e.value=="string"?n.toLowerCase()===e.value.toLowerCase():n===e.value;case"contains":return typeof n=="string"?n.toLowerCase().includes(String(e.value).toLowerCase()):Array.isArray(n)?n.some(s=>String(s).toLowerCase().includes(String(e.value).toLowerCase())):!1;case"in":return Array.isArray(e.value)?e.value.includes(n):!1;case"gt":{const s=typeof n=="number"?n:parseFloat(String(n)),i=typeof e.value=="number"?e.value:parseFloat(String(e.value));return!isNaN(s)&&!isNaN(i)&&s>i}case"lt":{const s=typeof n=="number"?n:parseFloat(String(n)),i=typeof e.value=="number"?e.value:parseFloat(String(e.value));return!isNaN(s)&&!isNaN(i)&&s<i}case"gte":{const s=typeof n=="number"?n:parseFloat(String(n)),i=typeof e.value=="number"?e.value:parseFloat(String(e.value));return!isNaN(s)&&!isNaN(i)&&s>=i}case"lte":{const s=typeof n=="number"?n:parseFloat(String(n)),i=typeof e.value=="number"?e.value:parseFloat(String(e.value));return!isNaN(s)&&!isNaN(i)&&s<=i}default:return!1}}function _p(e,t){return e.conditions.length===0?!1:e.conditions.every(n=>Ep(n,t))}function Dp(){return Tp(Cp)}function Ap(e){const t=[],n=Dp();for(const s of n)if(_p(s,e))for(const i of s.effects)for(const o of i.options)t.push({targetField:i.targetField,option:o,weightChange:i.weightChange,reason:i.reason,ruleId:s.id,ruleName:s.name});return t}function Lp(e){const t={};for(const n of e)t[n.targetField]||(t[n.targetField]={}),t[n.targetField][n.option]||(t[n.targetField][n.option]={totalWeight:0,appliedRules:[]}),t[n.targetField][n.option].totalWeight+=n.weightChange,t[n.targetField][n.option].appliedRules.push({ruleId:n.ruleId,ruleName:n.ruleName,weightChange:n.weightChange,reason:n.reason});return t}function wl(e,t,n,s=50){const i=Ap(n),r=Lp(i)[e]||{};return new Set(t),t.map(a=>{const l=r[a],d=(l==null?void 0:l.totalWeight)||0,u=(l==null?void 0:l.appliedRules.map(p=>p.reason))||[],c=s+d,f=c<0||d<-s;return{option:a,weight:Math.max(0,Math.min(100,c)),reasons:u,isForbidden:f}}).filter(a=>!a.isForbidden).sort((a,l)=>l.weight-a.weight)}function tt(e,t,n){return Math.min(n,Math.max(t,e))}function kp(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function Np(e){const t=Date.now(),n=Math.floor(Math.random()*4294967295),s=(()=>{try{return Number(process.hrtime.bigint()%BigInt(4294967295))}catch{return Math.floor(Math.random()*4294967295)}})(),i=((e??0)^t^n^s)>>>0;return kp(i)}function vr(e,t){if(!e)return t;const n=(e.match(/\d+/g)||[]).map(s=>parseInt(s,10)).filter(s=>!isNaN(s));return n.length===0?t:n.length===1?n[0]:(n[0]+n[1])/2}function hi(e){const t=Math.max(0,Math.min(10,e)),n=Math.floor(t),s=t-n;if(s>=.75){const i=Math.min(10,n+1);return{value:i,label:`${i}`}}else if(s>=.25){const i=Math.min(10,n+1);return{value:i,label:`${i}-${n}`}}else return{value:n,label:`${n}`}}function Op(e){return e>=9?"severe":e>=7?"moderate to severe":e>=6?"moderate":e>=4?"mild to moderate":"mild"}function br(e,t,n){const s=oo(e);if(s.length===0)return n;const i=new Map(s.map(o=>[o.toLowerCase(),o]));for(const o of t){const r=i.get(o.toLowerCase());if(r)return r}return s[0]}function Rp(e){const t=e.painDelta>=.7?"improvement of symptom(s).":"slight improvement of symptom(s).",n=e.painDelta>=.7?"decreased":"slightly decreased",s=e.frequencyImproved?"pain frequency":e.adlDelta>.2?"difficulty in performing ADLs":"pain",i=e.objectiveRomTrend==="improved"||e.objectiveStrengthTrend==="improved"||e.objectiveTightnessTrend==="reduced"||e.objectiveTendernessTrend==="reduced"||e.objectiveSpasmTrend==="reduced",r=e.objectiveRomTrend!=="stable"||e.objectiveStrengthTrend!=="stable"||e.objectiveTightnessTrend!=="stable"||e.objectiveTendernessTrend!=="stable"||e.objectiveSpasmTrend!=="stable"?i?"reduced":"slightly reduced":"remained the same",a=e.objectiveRomTrend!=="stable"?"joint ROM limitation":e.objectiveStrengthTrend!=="stable"?"muscles strength":e.objectiveTightnessTrend!=="stable"?"local muscles tightness":e.objectiveTendernessTrend!=="stable"?"local muscles tenderness":e.objectiveSpasmTrend!=="stable"?"local muscles spasms":"joint ROM limitation";return{present:t,patientChange:n,whatChanged:s,physicalChange:r,findingType:a}}function Mp(e,t,n){return{header:{noteType:"TX",insuranceType:e.insuranceType},subjective:{chronicityLevel:e.chronicityLevel,primaryBodyPart:{bodyPart:e.primaryBodyPart,laterality:e.laterality},painScale:{current:t},symptomChange:"improvement of symptom(s)",adlDifficulty:{level:n}},assessment:{tcmDiagnosis:{localPattern:e.localPattern,systemicPattern:e.systemicPattern}},patient:{medicalHistory:e.hasPacemaker?["Pacemaker"]:[]}}}function xl(e,t,n){const s=n>=.67,i=n>=.34&&n<.67;return t.map(o=>{let r=0;const a=o.option.toLowerCase();return e==="subjective.symptomChange"&&(a.includes("improvement of symptom")&&(r+=80),(a.includes("exacerbate")||a.includes("similar"))&&(r-=100),a.includes("came back")&&(r-=60)),e==="subjective.reason"&&(!s&&(a.includes("energy level improved")||a.includes("sleep quality improved"))&&(r+=35),i&&a.includes("reduced level of pain")&&(r+=30),s&&a.includes("less difficulty performing daily activities")&&(r+=40)),e==="subjective.painFrequency"&&(s&&a.includes("occasional")&&(r+=35),i&&a.includes("frequent")&&(r+=20),!s&&a.includes("constant")&&(r+=15)),e==="objective.muscleTesting.tightness.gradingScale"&&(s&&a==="mild"&&(r+=40),i&&a==="moderate"&&(r+=25),a==="severe"&&(r-=i?50:s?80:10),a==="moderate to severe"&&(r-=i?30:s?60:5)),e==="objective.muscleTesting.tenderness.gradingScale"&&(s&&(a.includes("+1")||a.includes("mild"))&&(r+=40),i&&a.includes("+2")&&(r+=25),(a.includes("+4")||a.includes("severe tenderness"))&&(r-=i?50:s?80:15),a.includes("+3")&&!a.includes("+3)")&&(r-=s?40:10)),{...o,weight:o.weight+r}}).sort((o,r)=>r.weight-o.weight)}function on(e,t,n,s,i){const o=oo(e);if(o.length===0)return i;const r=wl(e,o,t),a=xl(e,r,n),l=a.slice(0,Math.min(3,a.length));if(l.length===0)return i;const d=l.reduce((c,f)=>c+Math.max(1,f.weight),0);let u=s()*d;for(const c of l)if(u-=Math.max(1,c.weight),u<=0)return c.option;return l[0].option}function $p(e,t,n,s,i){const o=oo(e);if(o.length===0)return[];const r=wl(e,o,n),a=xl(e,r,s);return a.slice(0,Math.min(8,a.length)).sort(()=>i()-.5).slice(0,t).map(d=>d.option)}function jp(e,t){var q,ee,oe,pe,ne,z,Q,Ce,me,Pe,ve,Xe,De,dt,Ge,D,V,H,X,re,y,v,P,C,A,E;const n=Math.max(1,t.txCount),s=t.startVisitIndex||1,i=n-s+1,o=Np(t.seed),r=((oe=(ee=(q=e.previousIE)==null?void 0:q.subjective)==null?void 0:ee.painScale)==null?void 0:oe.current)??8,a=((pe=t.initialState)==null?void 0:pe.pain)??r,l=vr((Q=(z=(ne=e.previousIE)==null?void 0:ne.plan)==null?void 0:z.shortTermGoal)==null?void 0:Q.painScaleTarget,Math.max(3,r-2)),d=vr((Pe=(me=(Ce=e.previousIE)==null?void 0:Ce.plan)==null?void 0:me.longTermGoal)==null?void 0:Pe.painScaleTarget,Math.max(2,r-4)),u=a-l<1.5?d:l;let c=a,f=hi(a).label,p=s>1?(s-1)/n:0,g=3.5,m=((ve=t.initialState)==null?void 0:ve.frequency)??3,w=((Xe=t.initialState)==null?void 0:Xe.tightness)??3,x=((De=t.initialState)==null?void 0:De.tenderness)??3,b=((dt=t.initialState)==null?void 0:dt.spasm)??3,S=.42,I=.35,O=((Ge=t.initialState)==null?void 0:Ge.tightnessGrading)??"",T=((D=t.initialState)==null?void 0:D.tendernessGrade)??"",M=((V=t.initialState)==null?void 0:V.associatedSymptom)??"";const L=N=>{const R=N.toLowerCase();return R.includes("numbness")||R.includes("weakness")?4:R.includes("heaviness")?3:R.includes("stiffness")?2:R.includes("soreness")?1:2},_=(()=>{var U;if((U=t.initialState)!=null&&U.generalCondition)return t.initialState.generalCondition;if(e.baselineCondition)return e.baselineCondition;const N=(e.systemicPattern||"").toLowerCase(),R=N.includes("deficiency")||N.includes(""),$=N.includes("yang deficiency")||N.includes(""),k=N.includes("qi")&&N.includes("blood")||N.includes("essence")||N.includes("yin deficiency fire"),Y=e.chronicityLevel==="Chronic";return Y&&($||k)?"poor":Y&&R||Y||e.chronicityLevel==="Sub Acute"&&R?"fair":"good"})(),j=(()=>{var R,$;const N=($=(R=e.previousIE)==null?void 0:R.objective)==null?void 0:$.tonguePulse;return N!=null&&N.tongue&&(N!=null&&N.pulse)?{tongue:N.tongue,pulse:N.pulse}:{tongue:"Pink with thin white coating",pulse:"Even and moderate"}})(),B=[];for(let N=s;N<=n;N++){const $=(N-s+1)/i,k=Math.sqrt($),Y=3*k*k-2*k*k*k,U=(o()-.5)*.08,J=tt(Y+U,.05,.98),F=Math.max(p,J);p=F;const ie={sessionGapDays:Math.max(1,Math.round(1+o()*7)),sleepLoad:Number((o()*1).toFixed(2)),workloadLoad:Number((o()*1).toFixed(2)),weatherExposureLoad:Number((o()*1).toFixed(2)),adherenceLoad:Number((o()*1).toFixed(2))},ge=ie.sleepLoad*.12+ie.workloadLoad*.1+ie.weatherExposureLoad*.1+ie.adherenceLoad*.12+tt((ie.sessionGapDays-3)/10,0,.4),ce=a-(a-u)*F,Oe=.15,Be=tt((o()-.5)*.2+ge*.08,-Oe,Oe);let ze,Ke=null;N===s?(Ke=.5+o()*(1.5-.5),ze=tt(a-Ke,u,a-.5)):ze=tt(Math.min(c,ce+Be),u,a);const bt=hi(ze);let Ne=Math.min(c,bt.value);if(N===s&&Ke!==null){const xn=a-Ke;Ne>a-.5&&(Ne=tt(xn,u,a-.5)),Ne<a-1.5&&(Ne=a-1.5)}const Re=Ne<bt.value?hi(Ne).label:bt.label,Ye=c-Ne;c=Ne;const bn=Op(Ne),Qn=tt(g-(.18+o()*.2),.8,4),co=tt(Math.min(g,Qn+(o()-.5)*.12),.8,4),uo=g-co;g=co;const fo=F>.55&&o()>.45?Math.max(0,m-(o()>.5?1:0)):m,Gs=fo<m;m=fo;const Ks=Math.max(1,w-(F>.55&&o()>.35?1:0)),Vs=Math.max(1,x-(F>.5&&o()>.45?1:0)),po=Ks<w?w-Ks>=1?"reduced":"slightly reduced":"stable",mo=Vs<x?x-Vs>=1?"reduced":"slightly reduced":"stable";w=Ks,x=Vs;const kl=F>=.85?0:F>=.6?1:F>=.4?2:3,Ws=Math.min(b,Math.max(kl,b-1)),Nl=Ws<b?"reduced":"stable";b=Ws;const qs=tt(Math.min(S,S-(.04+o()*.06)),.08,.6),zs=tt(Math.min(I,I-(.03+o()*.05)),.06,.6);let Xs=qs<S-.055?"improved":qs<S?"slightly improved":"stable",Ys=zs<I-.045?"improved":zs<I?"slightly improved":"stable";(F>.7&&Ye<.2&&uo<.12&&!Gs||Re===f)&&(Xs="stable",Ys="stable"),f=Re,S=qs,I=zs;const Ol=e.laterality==="bilateral";let go;if(Ol){const Me=.06+o()*.12,ot=N%2===0,xn=tt(F+(ot?Me:-Me),.01,.99),Js=tt(F+(ot?-Me:Me),.01,.99);go={left:xn,right:Js}}const Ut=Mp(e,Ne,bn);on("subjective.symptomChange",Ut,F,o,"improvement of symptom(s)");const Rl=on("subjective.reasonConnector",Ut,F,o,"because of"),Ml=on("subjective.reason",Ut,F,o,"energy level improved");let Gt=on("subjective.associatedSymptoms",Ut,F,o,"soreness");if(F>.7&&(Gt=br("subjective.associatedSymptoms",["soreness","stiffness",Gt],Gt)),M){const Me=L(M);L(Gt)>Me&&(Gt=M)}M=Gt;const $l=on("subjective.painFrequency",Ut,F,o,"Frequent (symptoms occur between 51% and 75% of the time)"),jl=_,Bl=on("assessment.treatmentPrinciples.focusOn",Ut,F,o,"focus"),ho=["mild","mild to moderate","moderate","moderate to severe","severe"];let Ot;Ne>=8?Ot=o()>.4?"Severe":"Moderate to severe":Ne>=5?F>=.75?Ot="Moderate":F>=.45?Ot=o()>.5?"Moderate":"Moderate to severe":Ot="Moderate to severe":F>=.75?Ot="Mild":F>=.45?Ot=o()>.5?"Mild":"Mild to moderate":Ot="Mild to moderate";let Jn=Ot;if(O!==""){const Me=ho.indexOf(O.toLowerCase()),ot=ho.indexOf(Jn.toLowerCase());Me>=0&&ot>Me&&(Jn=O)}O=Jn;const Fl={"+4":{order:4,text:"(+4) = Patient complains of severe tenderness, withdraws immediately in response to test pressure, and is unable to bear sustained pressure"},"+3":{order:3,text:"(+3) = Patient complains of considerable tenderness and withdraws momentarily in response to the test pressure"},"+2":{order:2,text:"(+2) = Patient states that the area is moderately tender"},"+1":{order:1,text:"(+1)=Patient states that the area is mildly tender-annoying"}},Hl={"+4":{order:4,text:"(+4) = There is severe tenderness and withdrawal response from the patient when there is noxious stimulus"},"+3":{order:3,text:"(+3) = There is severe tenderness with withdrawal"},"+2":{order:2,text:"(+2) = There is mild tenderness with grimace and flinch to moderate palpation"},"+1":{order:1,text:"(+1)= There is mild tenderness to palpation"},0:{order:0,text:"(0) = No tenderness"}},wn=e.primaryBodyPart==="KNEE"?Hl:Fl;let it;Ne>=8?it=o()>.4?"+4":"+3":Ne>=5?F>=.75?it="+2":F>=.45?it=o()>.5?"+2":"+3":it="+3":F>=.75?it="+1":F>=.45?it=o()>.5?"+1":"+2":it="+2";let Qs=((H=wn[it])==null?void 0:H.text)||((X=wn["+2"])==null?void 0:X.text);if(T!==""){const Me=((re=wn[T])==null?void 0:re.order)??3;(((y=wn[it])==null?void 0:y.order)??2)>Me&&(it=T,Qs=((v=wn[T])==null?void 0:v.text)||Qs)}T=it;const Ul=$p("plan.needleProtocol.points",6,Ut,F,o),yo=["(0)=No spasm","(+1)=No spontaneous spasms; vigorous sensory and motor stimulation results in spasms.","(+2)=Occasional spontaneous spasms and easily induced spasms.","(+3)=>1 but < 10 spontaneous spasms per hour.","(+4)=>10 spontaneous spasms per hour."],Gl=yo[Ws]||yo[3],Kl=br("subjective.painFrequency",[["Intermittent (symptoms occur less than 25% of the time)","Occasional (symptoms occur between 26% and 50% of the time)","Frequent (symptoms occur between 51% and 75% of the time)","Constant (symptoms occur between 76% and 100% of the time)"][m]],$l),Vl=Rp({painDelta:Ye,adlDelta:uo,frequencyImproved:Gs,objectiveTightnessTrend:po,objectiveTendernessTrend:mo,objectiveSpasmTrend:Nl,objectiveRomTrend:Xs,objectiveStrengthTrend:Ys});B.push({visitIndex:N,progress:F,painScaleCurrent:Ne,painScaleLabel:Re,severityLevel:bn,symptomChange:"improvement of symptom(s)",reasonConnector:Rl,reason:Ml,associatedSymptom:Gt,painFrequency:Kl,generalCondition:jl,treatmentFocus:Bl,tightnessGrading:Jn,tendernessGrading:Qs,spasmGrading:Gl,needlePoints:Ul,tonguePulse:j,painTypes:(P=t.initialState)==null?void 0:P.painTypes,inspection:(C=t.initialState)==null?void 0:C.inspection,symptomScale:(()=>{var vo;const Me=(vo=t.initialState)==null?void 0:vo.symptomScale;if(!Me)return;const ot=Me.match(/(\d+)/);if(!ot)return Me;const xn=parseInt(ot[1],10),Js=Math.max(10,xn-Math.round(F*25));return`${Math.round(Js/10)*10}%`})(),electricalStimulation:(A=t.initialState)==null?void 0:A.electricalStimulation,treatmentTime:(E=t.initialState)==null?void 0:E.treatmentTime,sideProgress:go,objectiveFactors:ie,soaChain:{subjective:{painChange:"improved",adlChange:"improved",frequencyChange:Gs?"improved":"stable"},objective:{tightnessTrend:po,tendernessTrend:mo,romTrend:Xs,strengthTrend:Ys},assessment:Vl}})}return B}function Bp(e){return 1-(1-e)*(1-e)}function Fp(e,t,n){return e-(e-t)*Bp(n)}function Hp(e){const t=Math.floor(e),n=e-t;return n>=.75?String(Math.min(10,t+1)):n>=.25?`${Math.min(10,t+1)}-${t}`:String(t)}const In=["mild","mild to moderate","moderate","moderate to severe","severe"],Up=.4,Gp=.25;function Kp(e){return{severe:10,"moderate to severe":8,moderate:7,"mild to moderate":5,mild:4}[e]??8}function Vp(e,t){if(e<=3)return{st:String(e),lt:String(e)};if(e<=6)return{st:String(e),lt:String(Math.max(2,e-2))};const n=Math.max(2,e*Gp),s=Fp(e,n,Up),i=Math.ceil(s),o=Math.ceil(n),r=e-i,a=r>=2&&r<=3&&i>=5?`${i}-${i+1}`:Hp(i),l=o<=3?`${o}-${o+1}`:String(o);return{st:a,lt:l}}function Pl(e){const t=In.indexOf(e),n=t>=0?t:3;return n<=1?{st:In[n],lt:In[0]}:{st:In[Math.max(0,n-1)],lt:In[Math.max(0,n-3)]}}function Wp(e,t){const s={severe:4,"moderate to severe":4,moderate:3,"mild to moderate":2,mild:1}[e]??3;return s<=1?{st:1,lt:1}:{st:Math.max(1,s-1),lt:Math.max(1,s-3)}}function qp(e=3){return e<=1?{st:1,lt:0}:{st:Math.max(1,e-1),lt:Math.max(0,e-3)}}function zp(e="3+/5"){const n={"0/5":0,"1/5":1,"2/5":2,"2+/5":2.5,"3/5":3,"3+/5":3.5,"4-/5":3.8,"4/5":4,"4+/5":4.5,"5/5":5}[e]??3.5;if(n>=4.5)return{st:"4+",lt:"4+"};if(n>=4)return{st:"4",lt:"4+"};const s=Math.min(5,n+.5),i=Math.min(5,n+1),o=r=>r>=4.5?"4+":r>=4?"4":r>=3.5?"3+":"3";return{st:o(s),lt:o(i)}}function Xp(e){return{severe:{st:"(60%-70%)",lt:"(30%-40%)"},"moderate to severe":{st:"(50%-60%)",lt:"(20%-30%)"},moderate:{st:"(40%-50%)",lt:"(20%-30%)"},"mild to moderate":{st:"(30%-40%)",lt:"(10%-20%)"},mild:{st:"(20%-30%)",lt:"(10%-20%)"}}[e]||{st:"(50%-60%)",lt:"(20%-30%)"}}function Yp(e){return{severe:{st:"50%",lt:"70%"},"moderate to severe":{st:"60%",lt:"80%"},moderate:{st:"50%",lt:"60%"},"mild to moderate":{st:"50%",lt:"60%"},mild:{st:"50%",lt:"60%"}}[e]||{st:"60%",lt:"80%"}}function Qp(e){const t=Pl(e);return{st:t.st.replace(/ to /g,"-"),lt:t.lt.replace(/ to /g,"-")}}function Ni(e,t,n="soreness"){const s=Kp(e);return{pain:Vp(s),symptomType:n,symptomPct:Xp(e),tightness:Pl(e),tenderness:Wp(e),spasm:qp(3),strength:zp("3+/5"),rom:Yp(e),adl:Qp(e)}}const Jp={NONE:"full",HF:"97810",OPTUM:"97810",WC:"full",VC:"full",ELDERPLAN:"full"},Et={LBP:"lower back",NECK:"neck",UPPER_BACK:"upper back",MIDDLE_BACK:"middle back",SHOULDER:"shoulder",ELBOW:"elbow",WRIST:"wrist",HAND:"hand",HIP:"hip",KNEE:"knee",ANKLE:"ankle",FOOT:"foot",THIGH:"thigh",CALF:"calf",ARM:"arm",FOREARM:"forearm"},Zp=new Set(["ELBOW","HIP","KNEE","LBP","NECK","SHOULDER"]),em=new Set(["ELBOW","KNEE","LBP","NECK","SHOULDER"]);function tm(e){const t=e.noteType==="TX",n=t?em:Zp;if(n.has(e.primaryBodyPart))return;const s=Array.from(n).join(", "),i=t?"TX":"IE";throw new Error(`Unsupported ${i} body part "${e.primaryBodyPart}". Allowed: ${s}.`)}const Yn={left:"left",right:"right",bilateral:"bilateral",unspecified:""},nm={LBP:["iliocostalis","spinalis","longissimus","Iliopsoas Muscle","Quadratus Lumborum","Gluteal Muscles","The Multifidus muscles"],NECK:["Scalene anterior / med / posterior","Levator Scapulae","Trapezius","sternocleidomastoid muscles","Semispinalis capitis","Splenius capitis","Suboccipital muscles"],SHOULDER:["upper trapezius","greater tuberosity","lesser tuberosity","AC joint","levator scapula","rhomboids","middle deltoid","deltoid ant fibres","bicep long head","supraspinatus","triceps short head"],KNEE:["Gluteus Maximus","Gluteus medius / minimus","Piriformis muscle","Quadratus femoris","Adductor longus/ brev/ magnus","Iliotibial Band ITB","Rectus Femoris","Gastronemius muscle","Hamstrings muscle group","Tibialis Post/ Anterior","Plantar Fasciitis","Intrinsic Foot Muscle group","Achilles Tendon"],HIP:["Gluteus Maximus","Gluteus Medius","Piriformis","Iliopsoas","TFL","Adductors"],ELBOW:["Biceps","Triceps","Brachioradialis","Supinator","Pronator teres"],WRIST:["Flexor carpi radialis","Flexor carpi ulnaris","Extensor carpi radialis","Extensor carpi ulnaris"],ANKLE:["Gastrocnemius","Soleus","Tibialis anterior","Peroneus longus/brevis"],UPPER_BACK:["Rhomboids","Middle Trapezius","Erector spinae (thoracic)","Latissimus dorsi"]},bs={LBP:["Standing for long periods of time","Walking for long periods of time","Bending over to wear/tie a shoe","Rising from a chair","Getting out of bed","Going up and down stairs","Lifting objects"],NECK:["Sit and watching TV over 20 mins","Tilting head to talking the phone","Turning the head when crossing the street","Looking down watching steps","Gargling","Driving for long periods"],SHOULDER:["holding the pot for cooking","performing household chores","working long time in front of computer","long hours of driving","pushing/pulling cart, box, door","doing laundry","handing/carrying moderate objects","put on/take off the clothes","reach top of cabinet to get object(s)","reach to back to unzip","raising up the hand to comb hair","touch opposite side shoulder to put coat on","abduct arm get the objects from other people","adduction arm to put pant on"],KNEE:["performing household chores","long hours of driving","Going up and down stairs","Bending over to wear/tie a shoe","Rising from a chair","Standing for long periods of time","Walking for long periods of time","Getting out of bed","standing for cooking","bending knee to sit position","bending down put in/out of the shoes"],HIP:["Walking for long periods","Sitting for long periods","Getting in/out of car","Climbing stairs","Putting on socks/shoes"],ELBOW:["Lifting objects","Carrying bags","Opening doors","Typing","Writing"],WRIST:["Typing","Gripping objects","Writing","Cooking","Opening jars"],ANKLE:["Walking","Running","Going up/down stairs","Driving","Standing on tiptoes"],UPPER_BACK:["Sitting for long periods","Reaching overhead","Carrying bags","Deep breathing"]},wr={LBP:["Standing after sitting for long time","Prolong walking","Bending forward","Lifting heavy objects","Prolonged sitting"],NECK:["Looking down at phone/computer","Prolonged sitting","Sleeping in wrong position","Driving for long periods","Mental stress"],SHOULDER:["any strenuous activities","repetitive motions","push the door","extension","flexion","abduction","adduction","internal rotation","external rotation","sleep to the side","Lifting heavy objects","Overhead activities"],KNEE:["any strenuous activities","repetitive motions","poor sleep","mental stress","extension","flexion","abduction","adduction","internal rotation","external rotation","sleep to the side","Standing after sitting for long time","Stair climbing","Sitting on a low chair","Sitting cross leg","Prolong walking"],HIP:["Prolonged sitting","Walking","Climbing stairs","Getting in/out of car","Lying on affected side"],ELBOW:["Gripping objects","Twisting motions","Lifting","Typing","Repetitive forearm movements"],WRIST:["Typing","Gripping","Twisting motions","Lifting","Writing for long periods"],ANKLE:["Walking on uneven surfaces","Running","Prolonged standing","Going up/down stairs"],UPPER_BACK:["Prolonged sitting","Poor posture","Carrying heavy bags","Deep breathing"]},sm={LBP:[{movement:"Flexion",normalDegrees:90,difficulty:"MEDIUM"},{movement:"Extension",normalDegrees:30,difficulty:"HARD"},{movement:"Rotation to Right",normalDegrees:45,difficulty:"MEDIUM"},{movement:"Rotation to Left",normalDegrees:45,difficulty:"MEDIUM"},{movement:"Flexion to the Right",normalDegrees:30,difficulty:"EASY"},{movement:"Flexion to the Left",normalDegrees:30,difficulty:"EASY"}],NECK:[{movement:"Extension (look up)",normalDegrees:60,difficulty:"MEDIUM"},{movement:"Flexion (look down)",normalDegrees:50,difficulty:"EASY"},{movement:"Rotation to Right (look to right)",normalDegrees:80,difficulty:"MEDIUM"},{movement:"Rotation to Left (look to left)",normalDegrees:80,difficulty:"MEDIUM"},{movement:"Flexion to the Right (bending right)",normalDegrees:45,difficulty:"EASY"},{movement:"Flexion to the Left (bending left)",normalDegrees:45,difficulty:"EASY"}],SHOULDER:[{movement:"Abduction",normalDegrees:180,difficulty:"HARD"},{movement:"Horizontal Adduction",normalDegrees:45,difficulty:"EASY"},{movement:"Flexion",normalDegrees:180,difficulty:"HARD"},{movement:"Extension",normalDegrees:60,difficulty:"MEDIUM"},{movement:"External Rotation",normalDegrees:90,difficulty:"MEDIUM"},{movement:"Internal Rotation",normalDegrees:90,difficulty:"MEDIUM"}],KNEE:[{movement:"Flexion(fully bent)",normalDegrees:130,difficulty:"HARD"},{movement:"Extension(fully straight)",normalDegrees:0,difficulty:"EASY"}],HIP:[{movement:"Flexion",normalDegrees:120,difficulty:"MEDIUM"},{movement:"Extension",normalDegrees:30,difficulty:"HARD"},{movement:"Abduction",normalDegrees:45,difficulty:"MEDIUM"},{movement:"Adduction",normalDegrees:30,difficulty:"EASY"},{movement:"Internal Rotation",normalDegrees:45,difficulty:"HARD"},{movement:"External Rotation",normalDegrees:45,difficulty:"MEDIUM"}],ELBOW:[{movement:"Flexion",normalDegrees:150,difficulty:"EASY"},{movement:"Extension",normalDegrees:0,difficulty:"EASY"},{movement:"Supination",normalDegrees:90,difficulty:"MEDIUM"},{movement:"Pronation",normalDegrees:90,difficulty:"MEDIUM"}],WRIST:[{movement:"Flexion",normalDegrees:80,difficulty:"MEDIUM"},{movement:"Extension",normalDegrees:70,difficulty:"MEDIUM"},{movement:"Radial Deviation",normalDegrees:20,difficulty:"HARD"},{movement:"Ulnar Deviation",normalDegrees:30,difficulty:"HARD"}],ANKLE:[{movement:"Dorsiflexion",normalDegrees:20,difficulty:"HARD"},{movement:"Plantarflexion",normalDegrees:50,difficulty:"MEDIUM"},{movement:"Inversion",normalDegrees:35,difficulty:"MEDIUM"},{movement:"Eversion",normalDegrees:15,difficulty:"HARD"}]};function im(e){const t=[{pain:0,factor:1},{pain:3,factor:.95},{pain:6,factor:.85},{pain:8,factor:.77},{pain:10,factor:.6}],n=Math.max(0,Math.min(10,e));for(let s=0;s<t.length-1;s++)if(n<=t[s+1].pain){const i=t[s],o=t[s+1],r=(n-i.pain)/(o.pain-i.pain);return i.factor+r*(o.factor-i.factor)}return t[t.length-1].factor}function om(e){return{EASY:1,MEDIUM:.9,HARD:.8}[e]}const rm={EASY:["5/5","5/5","5/5","4+/5","4+/5"],MEDIUM:["4+/5","4/5","4/5","4-/5","4-/5"],HARD:["4/5","4-/5","3+/5","3/5","3/5"]};function am(e,t){const n=rm[e];return n[t%n.length]}function lm(e,t){if(t<=0)return"normal";const n=e/t;return n>=.9?"normal":n>=.75?"mild":n>=.5?"moderate":"severe"}function xr(e,t,n){const s=im(t),i=om(n),o=e*s*i;return Math.round(o/5)*5}const ro={LBP:"lower back",NECK:"neck",SHOULDER:"shoulder area",KNEE:"Knee area",HIP:"hip",ELBOW:"elbow",WRIST:"wrist",ANKLE:"ankle"},cm={SHOULDER:["soreness"],KNEE:["soreness","heaviness"],DEFAULT:["soreness","stiffness"]},Sl={SHOULDER:"70%",KNEE:"70%-80%",DEFAULT:"70%"},um={SHOULDER:"because of",KNEE:"due to",DEFAULT:"due to"},dm={SHOULDER:"after a week",KNEE:"over-the-counter pain medication",DEFAULT:"after a week"},fm={SHOULDER:"Grading Scale",KNEE:"Tenderness Scale",DEFAULT:"Grading Scale"},pm={SHOULDER:"Tenderness muscles noted along",KNEE:"Tenderness muscle noted along",LBP:"Tenderness muscle noted along",DEFAULT:"Tenderness muscles noted along"},Pr={SHOULDER:{"+4":"(+4) = Patient complains of severe tenderness, withdraws immediately in response to test pressure, and is unable to bear sustained pressure","+3":"(+3) = Patient complains of considerable tenderness and withdraws momentarily in response to the test pressure","+2":"(+2) = Patient states that the area is moderately tender","+1":"(+1)=Patient states that the area is mildly tender-annoying"},KNEE:{"+4":"(+4) = There is severe tenderness and withdrawal response from the patient when there is noxious stimulus","+3":"(+3) = There is severe tenderness with withdrawal","+2":"(+2) = There is mild tenderness with grimace and flinch to moderate palpation","+1":"(+1)= There is mild tenderness to palpation",0:"(0) = No tenderness"}},mm={SHOULDER:"weak muscles and dry skin without luster",KNEE:"joint swelling",DEFAULT:"weak muscles and dry skin without luster"},gm={SHOULDER:'Select Needle Size :36#x0.5" , 34#x1" ,30# x1.5"',KNEE:'Select Needle Size : 34#x1" ,30# x1.5",30# x2"',LBP:'Select Needle Size : 34#x1" ,30# x1.5",30# x2",30#x3"',NECK:'Select Needle Size :36#x0.5" , 34#x1" ,30# x1.5"',DEFAULT:'Select Needle Size: 34#x1", 30# x1.5", 30# x2", 30#x3"'},hm={SHOULDER:"emphasize",KNEE:"focus",NECK:"pay attention",LBP:"promote",DEFAULT:"promote"},ym={SHOULDER:"healthy qi and to expel pathogen factor to promote",KNEE:"Liver and Kidney",DEFAULT:"yin/yang"},vm={SHOULDER:"to reduce stagnation and improve circulation",KNEE:"promote healthy joint and lessen dysfunction in all aspects",DEFAULT:"promote good essence"},bm={"Qi Stagnation":{tongueDefault:"thin white coat",tongueOptions:["thin white coat","purplish dark","purple spots","dusk"],pulseDefault:"string-taut",pulseOptions:["string-taut"]},"Liver Qi Stagnation":{tongueDefault:"thin white coat",tongueOptions:["thin white coat","purplish dark","purple spots","dusk"],pulseDefault:"string-taut",pulseOptions:["string-taut"]},"Blood Stasis":{tongueDefault:"purple",tongueOptions:["purple","purple dark","purple edges","purple spots on side"],pulseDefault:"deep",pulseOptions:["deep","string-taut","forceful","hesitant"]},"Qi Stagnation, Blood Stasis":{tongueDefault:"purple, thin white coat",tongueOptions:["purple, thin white coat","purplish dark","purple spots","purple edges"],pulseDefault:"string-taut",pulseOptions:["string-taut","hesitant","deep"]},"Blood Deficiency":{tongueDefault:"pale, thin dry coat",tongueOptions:["pale, thin dry coat"],pulseDefault:"hesitant",pulseOptions:["hesitant","thready","weak"]},"Qi & Blood Deficiency":{tongueDefault:"pale, thin white coat",tongueOptions:["tooth marks","pale, thin white coat"],pulseDefault:"thready",pulseOptions:["thready","weak","slowing down","forceless","thin"]},"Wind-Cold Invasion":{tongueDefault:"thin white coat",tongueOptions:["thin white coat"],pulseDefault:"superficial, tense",pulseOptions:["superficial, tense"]},"Cold-Damp + Wind-Cold":{tongueDefault:"thick, white coat",tongueOptions:["white coat","slippery coat"],pulseDefault:"deep",pulseOptions:["deep","tense","slow","wiry"]},"LV/GB Damp-Heat":{tongueDefault:"yellow, sticky (red), thick coat",tongueOptions:["yellow, sticky (red), thick coat"],pulseDefault:"rolling rapid (forceful)",pulseOptions:["rolling rapid (forceful)","rapid","overflowing","full"]},"Phlegm-Damp":{tongueDefault:"big tongue with white sticky coat",tongueOptions:["big tongue with white sticky coat"],pulseDefault:"string-taut",pulseOptions:["string-taut","rolling","soft"]},"Phlegm-Heat":{tongueDefault:"yellow, sticky (red), thick coat",tongueOptions:["yellow, sticky (red), thick coat"],pulseDefault:"rolling rapid (forceful)",pulseOptions:["rolling rapid (forceful)","rapid","overflowing","full"]},"Damp-Heat":{tongueDefault:"yellow, sticky (red), thick coat",tongueOptions:["yellow, sticky (red), thick coat"],pulseDefault:"rolling rapid (forceful)",pulseOptions:["rolling rapid (forceful)","rapid","overflowing","full"]},"Kidney Yang Deficiency":{tongueDefault:"delicate, white coat",tongueOptions:["delicate","pale","swollen"],pulseDefault:"deep",pulseOptions:["deep","slow","weak","thready","forceless"]},"Kidney Yin Deficiency":{tongueDefault:"cracked",tongueOptions:["cracked","rootless","red, little coat","moisture, furless"],pulseDefault:"thready",pulseOptions:["thready","rapid","floating-empty"]},"Kidney Qi Deficiency":{tongueDefault:"pale, thin white coat",tongueOptions:["tooth marks","pale, thin white coat"],pulseDefault:"thready",pulseOptions:["thready","weak","slowing down","forceless","thin"]},"Kidney Essence Deficiency":{tongueDefault:"cracked",tongueOptions:["cracked","rootless","red, little coat","moisture, furless"],pulseDefault:"thready",pulseOptions:["thready","rapid","floating-empty"]},"Qi Deficiency":{tongueDefault:"pale, thin white coat",tongueOptions:["tooth marks","pale, thin white coat"],pulseDefault:"thready",pulseOptions:["thready","weak","slowing down","forceless","thin"]},"Spleen Deficiency":{tongueDefault:"pale, thin white coat",tongueOptions:["tooth marks","pale, thin white coat"],pulseDefault:"thready",pulseOptions:["thready","weak","slowing down","forceless","thin"]},"Liver Yang Rising":{tongueDefault:"thin yellow",tongueOptions:["yellow","white"],pulseDefault:"superficial rapid",pulseOptions:["superficial rapid"]},"Yin Deficiency Fire":{tongueDefault:"cracked",tongueOptions:["cracked","rootless","red, little coat","moisture, furless"],pulseDefault:"thready",pulseOptions:["thready","rapid","floating-empty"]},"LU & KI Deficiency":{tongueDefault:"pale, thin white coat",tongueOptions:["tooth marks","pale, thin white coat"],pulseDefault:"thready",pulseOptions:["thready","weak","slowing down","forceless","thin"]}};function nt(e,t){return e[t]??e.DEFAULT??Object.values(e)[0]}function wm(e){const t=Et[e.primaryBodyPart],n=ro[e.primaryBodyPart]||t,s=Yn[e.laterality],i=s.charAt(0).toUpperCase()+s.slice(1);en[e.localPattern];const o=["Dull","Burning","Freezing","Shooting","Tingling","Stabbing","Aching","Squeezing","Cramping","pricking","weighty","cold","pin & needles"],r={bodyPart:e.primaryBodyPart,localPattern:e.localPattern,systemicPattern:e.systemicPattern,chronicityLevel:e.chronicityLevel,severityLevel:e.severityLevel,insuranceType:e.insuranceType,painScale:7,hasPacemaker:e.hasPacemaker},a=Ae("subjective.painTypes",o,r),l=St(a,2),d=nt(cm,e.primaryBodyPart),u=nt(Sl,e.primaryBodyPart),c=nt(um,e.primaryBodyPart),f=nt(dm,e.primaryBodyPart),p=e.noteType==="IE"?"INITIAL EVALUATION":"DAILY NOTE",g=e.primaryBodyPart;let m=`${p}

`;const w=wr[g]||wr.LBP,x=bs[g]||bs.LBP,b=Ae("subjective.adl",x,r);if(g==="SHOULDER"){const S=St(b,4),I=Ae("subjective.exacerbating",w,r),O=St(I,4);if(m+=`Patient c/o ${e.chronicityLevel} ${l.join(", ")} pain in ${s}`,m+=`-${n} (without radiation) `,m+="for more than 10 year(s) got worse in recent 1-2 month(s) ",m+=`associated with muscles ${d.join(", ")} (scale as ${u}) `,m+=`${c} age related/degenerative changes, over used due to nature of work.
`,m+=`The pain is aggravated by ${O.join(", ")}, `,m+=`impaired performing ADL's with ${e.severityLevel} difficulty of ${S.join(", ")}. `,m+="Stretching can temporarily relieve the pain slightly but limited. ",m+="Patient has decrease outside activity, ",m+=`the pain did not improved ${f} which promoted the patient to seek acupuncture and oriental medicine intervention.

`,e.secondaryBodyParts&&e.secondaryBodyParts.length>0){const T=e.secondaryBodyParts.map(M=>Et[M]).join(", ");m+=`Patient also complaints of chronic pain on the ${T} area comes and goes, which is less severe compared to the ${i} -${n} pain.

`}m+=`Pain Scale: Worst: 7 ; Best: 6 ; Current: 7-6
`,m+=`Pain Frequency: Constant (symptoms occur between 76% and 100% of the time)
`,m+=`Walking aid :none

`,m+="Medical history/Contraindication or Precision: N/A"}else if(g==="NECK"){m+=`Patient c/o ${e.chronicityLevel} pain in ${s} ${n} which is ${l.join(", ")} without radiation . `,m+="The patient has been complaining of the pain for 3 month(s) which got worse in recent 1 week(s). ",m+=`The pain is associated with muscles ${d.join(", ")} (scale as ${u}) ${c} age related/degenerative changes.
`;const S=St(b,4),I=S.slice(0,2),O=S.slice(2,4),T=Ae("subjective.exacerbating",w,r),M=St(T,2);if(m+=`The pain is aggravated by ${M.join(", ")}, `,m+=`impaired performing ADL's with ${e.severityLevel} difficulty of ${I.join(", ")} `,m+=`and ${e.severityLevel} difficulty of ${O.join(", ")}. `,m+="Stretching can temporarily relieve the pain slightly but limited. ",m+="Patient has decrease outside activity, ",m+=`the pain did not improved ${f} which promoted the patient to seek acupuncture and oriental medicine intervention.

`,e.secondaryBodyParts&&e.secondaryBodyParts.length>0){const L=e.secondaryBodyParts.map(_=>Et[_]).join(", ");m+=`Patient also complaints of chronic pain on the ${L} area comes and goes, which is less severe compared to the Cervical area.

`}m+=`Pain Scale: Worst: 8 ; Best: 6 ; Current: 8
`,m+=`Pain Frequency: Constant (symptoms occur between 76% and 100% of the time)
`,m+=`Walking aid :none

`,m+="Medical history/Contraindication or Precision: N/A"}else{m+=`Patient c/o ${e.chronicityLevel} pain in ${s} ${n} which is ${l.join(", ")} without radiation. `,m+="The patient has been complaining of the pain for 3 month(s) which got worse in recent 1 week(s). ",m+=`The pain is associated with muscles ${d.join(", ")} (scale as ${u}) ${c} age related/degenerative changes.

`;const S=St(b,3);if(m+=`The pain is aggravated by ${w.slice(0,1).join(", ")} . There is ${e.severityLevel} difficulty with ADLs like ${S.join(", ")}.

`,m+="Changing positions, Resting, Massage can temporarily relieve the pain. ",m+="Due to this condition patient has decrease outside activity. ",m+=`The pain did not improved ${f} which promoted the patient to seek acupuncture and oriental medicine intervention.

`,e.secondaryBodyParts&&e.secondaryBodyParts.length>0){const I=e.secondaryBodyParts.map(O=>Et[O]).join(", ");m+=`Patient also complaints of chronic pain on the ${I} area comes and goes, which is less severe compared to the ${i} ${n} pain.

`}m+=`Pain Scale: Worst: 8 ; Best: 6 ; Current: 8
`,m+=`Pain Frequency: Constant (symptoms occur between 76% and 100% of the time)
`,m+=`Walking aid :none

`,m+="Medical history/Contraindication or Precision: N/A"}return m}const Sr=[{degrees:130,label:"130(normal)"},{degrees:125,label:"125 Degrees(normal)"},{degrees:120,label:"120(normal)"},{degrees:115,label:"115 Degrees(mild)"},{degrees:110,label:"110 Degrees(mild)"},{degrees:105,label:"105 Degrees(mild)"},{degrees:100,label:"100 Degrees(moderate)"},{degrees:95,label:"95 Degrees(moderate)"},{degrees:90,label:"90 Degrees(moderate)"},{degrees:85,label:"85 Degrees(moderate)"},{degrees:80,label:"80 Degrees(moderate)"},{degrees:75,label:"75 Degrees(moderate)"},{degrees:70,label:"70 Degrees(moderate)"},{degrees:65,label:"65 Degrees(severe)"},{degrees:60,label:"60 Degrees(severe)"},{degrees:55,label:"55 Degrees(severe)"},{degrees:50,label:"50 Degrees(severe)"},{degrees:45,label:"45 Degrees(severe)"},{degrees:40,label:"40 Degrees(severe)"},{degrees:35,label:"35 Degrees(severe)"},{degrees:30,label:"30 Degrees(severe)"},{degrees:25,label:"25 Degrees(severe)"}],Tl=[{degrees:180,label:"180 degree(normal)"},{degrees:175,label:"175 degree(normal)"},{degrees:170,label:"170 degree(normal)"},{degrees:165,label:"165 degree(mild)"},{degrees:160,label:"160 degree(mild)"},{degrees:155,label:"155 degree(mild)"},{degrees:150,label:"150 degree(mild)"},{degrees:145,label:"145 degree(moderate)"},{degrees:140,label:"140 degree(moderate)"},{degrees:135,label:"135 degree(moderate)"},{degrees:130,label:"130 degree(moderate)"},{degrees:125,label:"125 degree(moderate)"},{degrees:120,label:"120 degree(moderate)"},{degrees:115,label:"115 degree(moderate)"},{degrees:110,label:"110 degree(moderate)"},{degrees:105,label:"105 degree(moderate)"},{degrees:100,label:"100 degree(moderate)"},{degrees:95,label:"95 degree(moderate)"},{degrees:90,label:"90 degree(severe)"},{degrees:85,label:"85 degree(severe)"},{degrees:80,label:"80 degree(severe)"},{degrees:75,label:"75 degree(severe)"},{degrees:70,label:"70 degree(severe)"},{degrees:65,label:"65 degree(severe)"},{degrees:60,label:"60 degree(severe)"},{degrees:55,label:"55 degree(severe)"},{degrees:50,label:"50 degree(severe)"},{degrees:45,label:"45 degree(severe)"},{degrees:40,label:"40 degree(severe)"},{degrees:35,label:"35 degree(severe)"},{degrees:30,label:"30 degree(severe)"},{degrees:25,label:"25 degree(severe)"},{degrees:20,label:"20 degree(severe)"},{degrees:15,label:"15 degree(severe)"},{degrees:10,label:"10 degree(severe)"},{degrees:5,label:"5 degree(severe)"}],xm=Tl,Pm=[{degrees:45,label:"45 degree (normal)"},{degrees:40,label:"40 degree (normal)"},{degrees:35,label:"35 degree (normal)"},{degrees:30,label:"30 degree (normal)"},{degrees:25,label:"25 degree (mild)"},{degrees:20,label:"20 degree (mild)"},{degrees:15,label:"15 degree (moderate)"},{degrees:10,label:"10 degree (moderate)"},{degrees:5,label:"5 degree (severe)"},{degrees:0,label:"can not do this at all"}],Sm=[{degrees:5,label:"5 Degrees(severe)"},{degrees:10,label:"10 Degrees(severe)"},{degrees:15,label:"15 Degrees(severe)"},{degrees:20,label:"20 Degrees(moderate)"},{degrees:25,label:"25 Degrees(moderate)"},{degrees:30,label:"30 Degrees(moderate)"},{degrees:35,label:"35 Degrees(moderate)"},{degrees:40,label:"40 Degrees(mild)"},{degrees:45,label:"45 Degrees(mild)"},{degrees:50,label:"50 Degrees(mild)"},{degrees:55,label:"55 Degrees(normal)"},{degrees:60,label:"60 Degrees(normal)"}],Cl=[{degrees:90,label:"90 Degrees(normal)"},{degrees:85,label:"85 Degrees(normal)"},{degrees:80,label:"80 Degrees(normal)"},{degrees:75,label:"75 Degrees(mild)"},{degrees:70,label:"70 Degrees(mild)"},{degrees:65,label:"65 Degrees(mild)"},{degrees:60,label:"60 Degrees(moderate)"},{degrees:55,label:"55 Degrees(moderate)"},{degrees:50,label:"50 Degrees(moderate)"},{degrees:45,label:"45 Degrees(moderate)"},{degrees:40,label:"40 Degrees(moderate)"},{degrees:35,label:"35 Degrees(severe)"},{degrees:30,label:"30 Degrees(severe)"},{degrees:25,label:"25 Degrees(severe)"},{degrees:15,label:"15 Degrees(severe)"},{degrees:10,label:"10 Degrees(severe)"},{degrees:5,label:"5 Degrees(severe)"}],Tm=Cl;function Cm(e,t,n){const s=Math.round(t*(1-n));let i;if(e==="Abduction")i=Tl;else if(e==="Horizontal Adduction")i=Pm;else if(e==="Flexion")i=xm;else if(e==="Extension")i=Sm;else if(e==="External Rotation")i=Cl;else if(e==="Internal Rotation")i=Tm;else return`${s} degree(moderate)`;let o=i[0],r=Math.abs(s-o.degrees);for(const a of i){const l=Math.abs(s-a.degrees);l<r&&(r=l,o=a)}return o.label}function Tr(e,t){if(e.movement.includes("Extension"))return Math.round(e.normalDegrees*(1-t))<0?"-5(severe)":"0(normal)";const n=Math.round(e.normalDegrees*(1-t));let s=Sr[0],i=Math.abs(n-s.degrees);for(const o of Sr){const r=Math.abs(n-o.degrees);r<i&&(i=r,s=o)}return s.label}function Cr(e,t){var j,B;en[e.localPattern];const n=Et[e.primaryBodyPart],s=Yn[e.laterality],i=e.primaryBodyPart,o=(t==null?void 0:t.severityLevel)||e.severityLevel,r=nm[i]||["local muscles"],a=nt(fm,i),l=nt(pm,i),d=Pr[i]||Pr.SHOULDER,u=nt(mm,i);let c="";i==="SHOULDER"&&(c+=`Inspection:${(t==null?void 0:t.inspection)??u}

`),c+=`Muscles Testing:
`;const f={bodyPart:i,localPattern:e.localPattern,systemicPattern:e.systemicPattern,chronicityLevel:e.chronicityLevel,severityLevel:o,insuranceType:e.insuranceType,painScale:7,hasPacemaker:e.hasPacemaker},p=Ae("objective.tightness",r,f),g=St(p,3);c+=`Tightness muscles noted along ${g.join(", ")}
`,c+=`Grading Scale: ${(t==null?void 0:t.tightnessGrading)||o}

`;const m=r.length>=8?r.slice(7,12):r.length>=4?r.slice(Math.floor(r.length/2)):r.slice(1),w=r.length>=8?r.slice(3,7):r.length===7?r.slice(1,3).concat(r.slice(5)):r.length>=4?r.slice(Math.floor(r.length/3),Math.floor(r.length*2/3)+1):r.slice(0,2);c+=`${l} ${m.join(", ")}

`;const b={severe:"+4","moderate to severe":"+3",moderate:"+3","mild to moderate":"+2",mild:"+1"}[o]||"+3";c+=`${a}: ${(t==null?void 0:t.tendernessGrading)||d[b]||d["+3"]}.

`,c+=`Muscles spasm noted along ${w.join(", ")}
`,c+=`Frequency Grading Scale:${(t==null?void 0:t.spasmGrading)||"(+3)=>1 but < 10 spontaneous spasms per hour."}

`;const S=sm[i],I=i==="NECK"||i==="LBP"?"Spine ROM":"Joint ROM",O=(t==null?void 0:t.painScaleCurrent)??({severe:9,"moderate to severe":8,moderate:6,"mild to moderate":5,mild:3}[o]||7),T=t?Math.max(1,O-t.progress*2.8):O,M=(q,ee)=>{const oe=["3/5","3+/5","4-/5","4/5","4+/5","5/5"],pe=oe.indexOf(q);return pe<0?q:oe[Math.max(0,Math.min(oe.length-1,pe+ee))]},L=(q,ee,oe,pe,ne)=>{const z=(ee+oe)%3,Q=[-1,0,1][z],Ce=Math.max(1,Math.min(10,pe+Q)),me=t&&q.difficulty==="HARD"&&t.progress>.6?"MEDIUM":q.difficulty;let Pe=am(me,ee+oe);if(t){const De=t.progress>.7?2:t.progress>.45?1:0;Pe=M(Pe,De)}let ve=xr(q.normalDegrees,Ce,q.difficulty);ne!==0&&q.normalDegrees>0&&(ve=Math.max(Math.round(q.normalDegrees*.25),Math.min(q.normalDegrees,ve+ne)),ve=Math.round(ve/5)*5);const Xe=lm(ve,q.normalDegrees);return{strength:Pe,romValue:ve,limitation:Xe}};if(i==="KNEE"&&s==="bilateral")["Right","Left"].forEach(ee=>{const oe=ee==="Left"?T:Math.max(1,T-1),pe=ee==="Left"?0:1,ne=ee==="Left"?0:5;c+=`${ee} Knee Muscles Strength and Joint ROM:

`,S&&S.forEach((z,Q)=>{const{strength:Ce,romValue:me}=L(z,Q,pe,oe,ne),Pe=z.normalDegrees>0?1-me/z.normalDegrees:0;c+=`${Ce} ${z.movement}: ${Tr(z,Pe)}
`}),c+=`
`});else if(i==="KNEE")c+=`${s==="left"?"Left":"Right"} Knee Muscles Strength and Joint ROM:

`,S&&S.forEach((ee,oe)=>{const{strength:pe}=L(ee,oe,0,T,0),ne=ee.normalDegrees>0?1-xr(ee.normalDegrees,T,ee.difficulty)/ee.normalDegrees:0;c+=`${pe} ${ee.movement}: ${Tr(ee,ne)}
`}),c+=`
`;else if(i==="SHOULDER"){const q=ee=>{const oe=ee==="Left",pe=oe?T:Math.max(1,T-1),ne=oe?0:1,z=oe?0:5;c+=`${ee} Shoulder Muscles Strength and Joint ROM
`,S&&S.forEach((Q,Ce)=>{const{strength:me,romValue:Pe}=L(Q,Ce,ne,pe,z),ve=Q.normalDegrees>0?1-Pe/Q.normalDegrees:0,Xe=Cm(Q.movement,Q.normalDegrees,ve);let De;Q.movement==="Abduction"?De=`${me} Abduction:`:Q.movement==="Horizontal Adduction"?De=`${me} Horizontal Adduction: `:Q.movement==="Flexion"?De=`${me} Flexion :`:Q.movement==="Extension"?De=`${me} Extension : `:Q.movement==="External Rotation"?De=`${me} External rotation : `:Q.movement==="Internal Rotation"?De=`${me} Internal rotation : `:De=`${me} ${Q.movement}: `,c+=`${De}${Xe}
`}),c+=`
`};s==="bilateral"?(q("Right"),q("Left")):q(s==="left"?"Left":"Right")}else{const q=i==="NECK"?"Cervical":i==="LBP"?"Lumbar":`${s?s.charAt(0).toUpperCase()+s.slice(1)+" ":""}${n.charAt(0).toUpperCase()+n.slice(1)}`;if(c+=`${q} Muscles Strength and ${I}${i==="NECK"?" Assessment:":""}
`,S){const oe=i==="LBP"||i==="NECK"?"Degrees":"degree",pe=t?Math.min(10,Math.round(t.progress*8+(t.soaChain.objective.romTrend==="improved"?3:1))):0;S.forEach((ne,z)=>{const{strength:Q,romValue:Ce,limitation:me}=L(ne,z,0,T,pe);c+=`${Q} ${ne.movement}: ${Ce} ${oe}(${me})
`})}c+=`
`}(i==="KNEE"||i==="LBP"||i==="NECK")&&(c+=`Inspection: ${(t==null?void 0:t.inspection)??u}

`);const _=bm[e.localPattern];if(_){const q=((j=t==null?void 0:t.tonguePulse)==null?void 0:j.tongue)??_.tongueDefault,ee=((B=t==null?void 0:t.tonguePulse)==null?void 0:B.pulse)??_.pulseDefault;c+=`tongue
${q}
pulse
${ee}`}return c}function Im(e){const t=Et[e.primaryBodyPart],n=e.primaryBodyPart,s=en[e.localPattern];en[e.systemicPattern];const i=Yn[e.laterality],o=i.charAt(0).toUpperCase()+i.slice(1),r=ro[n]||t,a=n==="NECK"?"Cervical":t.charAt(0).toUpperCase()+t.slice(1);let l=`TCM Dx:
`;n==="KNEE"?l+=`${o} ${t} pain due to ${e.localPattern} in local meridian, `:n==="SHOULDER"?l+=`${o} - ${r} pain due to ${e.localPattern} in local meridian, `:n==="NECK"?l+=`${a} pain due to ${e.localPattern} in local meridian, `:n==="LBP"?l+=`${a} pain due to ${e.localPattern} in local meridian, `:l+=`${a} pain due to ${e.localPattern} in local meridian, `,l+=`but patient also has ${e.systemicPattern} in the general.
`;const d=(s==null?void 0:s.treatmentPrinciples)||["promote circulation, relieves pain"],u=nt(hm,n),c=nt(ym,n),f=nt(vm,n);l+=`Today's TCM treatment principles:
`;let p=u;const g=u.split(" ")[0].toLowerCase(),m=d[0].split(" ")[0].toLowerCase();return g===m&&(p="focus"),l+=`${p} on ${d[0]} and harmonize ${c} balance in order to ${f}.
`,n==="KNEE"?l+=`Acupuncture Eval was done today on ${i} ${t} area.`:n==="SHOULDER"?l+=`Acupuncture Eval was done today ${o} -${r}`:n==="LBP"?l+=`Acupuncture Eval was done today along ${i} ${t}.`:n==="NECK"?l+=`Acupuncture Eval was done today on ${i==="bilateral"?"B/L":i} ${a}`:l+=`Acupuncture Eval was done today on ${i} ${t}.`,l}function Em(e){const t=e.primaryBodyPart,n=e.severityLevel||"moderate to severe",s=e.associatedSymptom||"soreness",i=Ni(n,t,s),o=t==="KNEE"||t==="SHOULDER"||t==="LBP"||t==="NECK";let r=`Initial Evaluation - Personal one on one contact with the patient (total 20-30 mins)
`;r+=`1. Greeting patient.
`,r+=`2. Detail explanation from patient of past medical history and current symptom.
`,r+=`3. Initial evaluation examination of the patient current condition.
`,r+=`4. Explanation with patient for medical decision/treatment plan.

`,r+=`Short Term Goal (RELIEF TREATMENT FREQUENCY: 12 treatments in 5-6 weeks):
`,o?(r+=`Decrease Pain Scale to${i.pain.st}.
`,r+=`Decrease ${i.symptomType} sensation Scale to ${i.symptomPct.st}
`,r+=`Decrease Muscles Tightness to ${i.tightness.st}
`,r+=`Decrease Muscles Tenderness to Grade ${i.tenderness.st}
`,r+=`Decrease Muscles Spasms to Grade ${i.spasm.st}
`,r+=`Increase Muscles Strength to${i.strength.st}

`):(r+=`Decrease Pain Scale to ${i.pain.st}.
`,r+=`Decrease ${i.symptomType} sensation Scale to 50%
`,r+=`Decrease Muscles Tightness to ${i.tightness.st}
`,r+=`Decrease Muscles Tenderness to Grade ${i.tenderness.st}
`,r+=`Decrease Muscles Spasms to Grade ${i.spasm.st}
`,r+=`Increase Muscles Strength to ${i.strength.st}

`),r+=`Long Term Goal (ADDITIONAL MAINTENANCE & SUPPORTING TREATMENTS FREQUENCY: 8 treatments in 5-6 weeks):
`;const a=i.tightness.lt.replace(/ to /g,"-");return o?(r+=`Decrease Pain Scale to${i.pain.lt}
`,r+=`Decrease ${i.symptomType} sensation Scale to ${i.symptomPct.lt}
`,r+=`Decrease Muscles Tightness to ${a}
`,r+=`Decrease Muscles Tenderness to Grade ${i.tenderness.lt}
`,r+=`Decrease Muscles Spasms to Grade ${i.spasm.lt}
`,r+=`Increase Muscles Strength to${i.strength.lt}
`,r+=`Increase ROM ${i.rom.lt}
`,r+=`Decrease impaired Activities of Daily Living to ${i.adl.lt}.`):(r+=`Decrease Pain Scale to ${i.pain.lt}
`,r+=`Decrease ${i.symptomType} sensation Scale to 30%
`,r+=`Decrease Muscles Tightness to ${a}
`,r+=`Decrease Muscles Tenderness to Grade ${i.tenderness.lt}
`,r+=`Decrease Muscles Spasms to Grade ${i.spasm.lt}
`,r+=`Increase Muscles Strength to ${i.strength.lt}
`,r+=`Increase ROM ${i.rom.lt}
`,r+=`Decrease impaired Activities of Daily Living to ${i.adl.lt}.`),r}const _m=["improvement of symptom(s)","exacerbate of symptom(s)","similar symptom(s) as last visit","improvement after treatment, but pain still came back next day"],Dm=["can move joint more freely and with less pain","physical activity no longer causes distress","reduced level of pain","reduced joint stiffness and swelling","less difficulty performing daily activities","energy level improved","sleep quality improved","more energy level throughout the day","continuous treatment","maintain regular treatments","still need more treatments to reach better effect","weak constitution","skipped treatments","stopped treatment for a while","discontinuous treatment","did not have good rest","intense work","excessive time using cell phone","excessive time using computer","bad posture","carrying/lifting heavy object(s)","lack of exercise","exposure to cold air","uncertain reason"],Am=["because of","may related of","due to","and"],Lm=["good","fair","poor"],km=["slight improvement of symptom(s).","improvement of symptom(s).","exacerbate of symptom(s).","no change."],Nm=["decreased","slightly decreased","increased","slight increased","remained the same"],Om=["pain","pain frequency","pain duration","numbness sensation","muscles weakness","muscles soreness sensation","muscles stiffness sensation","heaviness sensation","difficulty in performing ADLs","as last time visit"],Rm=["reduced","slightly reduced","increased","slight increased","remained the same"],Mm=["local muscles tightness","local muscles tenderness","local muscles spasms","local muscles trigger points","joint ROM","joint ROM limitation","muscles strength","joints swelling","last visit"],$m=["session","treatment","acupuncture session","acupuncture treatment"],jm=["well","with good positioning technique","with good draping technique","with positive verbal response","with good response","with positive response","with good outcome in reducing spasm","with excellent outcome due reducing pain","with good outcome in improving ROM","good outcome in improving ease with functional mobility","with increase ease with functional mobility","with increase ease with function"],Bm=["can move joint more freely and with less pain","physical activity no longer causes distress","reduced level of pain","reduced joint stiffness and swelling","less difficulty performing daily activities","energy level improved","sleep quality improved","more energy level throughout the day"],Fm=["still need more treatments to reach better effect","weak constitution","skipped treatments","stopped treatment for a while","discontinuous treatment","did not have good rest","intense work","excessive time using cell phone","excessive time using computer","bad posture","carrying/lifting heavy object(s)","lack of exercise","exposure to cold air","uncertain reason"],Ir=["continuous treatment","maintain regular treatments","still need more treatments to reach better effect","uncertain reason"];function Hm(e,t,n){const s=t.toLowerCase(),i=s.includes("improvement")&&!s.includes("came back"),o=s.includes("came back"),r=s.includes("exacerbate"),a=s.includes("similar"),l=n.systemicPattern.includes("Deficiency");return e.map(d=>{let u=0;const c=[];return i&&(d.option==="energy level improved"||d.option==="more energy level throughout the day"||d.option==="sleep quality improved")?(u+=45,c.push("/")):i&&Bm.includes(d.option)&&(u+=25,c.push("")),i&&l&&(d.option==="energy level improved"||d.option==="more energy level throughout the day")&&(u+=30,c.push("")),o&&Ir.includes(d.option)&&(u+=40,c.push("")),r&&Fm.includes(d.option)&&(u+=35,c.push("")),a&&Ir.includes(d.option)&&(u+=30,c.push("/")),{...d,weight:d.weight+u,reasons:c.length>0?[...d.reasons,...c]:d.reasons}}).sort((d,u)=>u.weight-d.weight)}const Um=["continue to emphasize","emphasize","consist of promoting","promote","focus","pay attention"],Gm=["moving qi","regulates qi","activating Blood circulation to dissipate blood stagnant","dredging channel and activating collaterals","activate blood and relax tendons","eliminates accumulation","resolve stagnation, clears heat","promote circulation, relieves pain","expelling pathogens","dispelling cold, drain the dampness","strengthening muscles and bone","clear heat, dispelling the flame","clear damp-heat","drain the dampness, clear damp"];function Km(e,t){const n=Et[e.primaryBodyPart],s=ro[e.primaryBodyPart]||n,i=Yn[e.laterality],o=e.primaryBodyPart,r={bodyPart:o,localPattern:e.localPattern,systemicPattern:e.systemicPattern,chronicityLevel:e.chronicityLevel,severityLevel:(t==null?void 0:t.severityLevel)||e.severityLevel,insuranceType:e.insuranceType,painScale:(t==null?void 0:t.painScaleCurrent)||7,hasPacemaker:e.hasPacemaker},a=Ae("subjective.symptomChange",_m,r),l=(t==null?void 0:t.symptomChange)||Je(a),d=(t==null?void 0:t.reasonConnector)||Am[0],u=Ae("subjective.reason",Dm,r),c=Hm(u,l,e),f=(t==null?void 0:t.reason)||Je(c),g=Ae("subjective.painTypes",["Dull","Burning","Freezing","Shooting","Tingling","Stabbing","Aching","Squeezing","Cramping","pricking","weighty","cold","pin & needles"],r),m=(t==null?void 0:t.painTypes)??St(g,2),x=Ae("subjective.associatedSymptoms",["soreness","stiffness","heaviness","weakness","numbness"],r),b=(t==null?void 0:t.associatedSymptom)||Je(x),S=bs[o]||bs.LBP,I=Ae("subjective.adlDifficulty.activities",S,r),O=St(I,5),T=O.slice(0,2),M=O.slice(2,5),L=(t==null?void 0:t.symptomScale)??nt(Sl,o);let _=`Follow up visit
`;if(_+=`Patient reports: there is ${l} ${d} ${f} .
`,o==="KNEE"||o==="SHOULDER")_+=`Patient still c/o ${m.join(", ")} pain in ${i} ${s} `;else if(o==="NECK"){const B=i==="bilateral"?"in":i==="left"?"in left side":i==="right"?"in right side":"in";_+=`Patient still c/o ${m.join(", ")} pain ${B} ${s} area `}else o==="LBP"?_+=`Patient still c/o ${m.join(", ")} pain on ${s} area `:_+=`Patient still c/o ${m.join(", ")} pain on ${s} `;if(_+=`without radiation, associated with muscles ${b} (scale as ${L}), `,o==="KNEE"){const B=(t==null?void 0:t.severityLevel)||e.severityLevel;_+=`impaired performing ADL's with ${B} difficulty ${T.join(", ")} `,_+=`and ${B} difficulty ${M.join(", ")}.

`}else if(o==="SHOULDER"||o==="NECK"){const B=(t==null?void 0:t.severityLevel)||e.severityLevel;_+=`impaired performing ADL's with ${B} difficulty of ${T.join(", ")} `,_+=`and ${B} difficulty of ${M.join(", ")}.

`}else{const B=(t==null?void 0:t.severityLevel)||e.severityLevel;_+=`impaired performing ADL's with ${B} difficulty with ADLs like ${O.slice(0,3).join(", ")}.

`}const j=(t==null?void 0:t.painScaleLabel)||(t!=null&&t.painScaleCurrent?`${Math.round(t.painScaleCurrent)}`:"8");return _+=`Pain Scale: ${j} /10
`,_+=`Pain frequency: ${(t==null?void 0:t.painFrequency)||"Constant (symptoms occur between 76% and 100% of the time)"}`,_}function Vm(e,t){const n=Et[e.primaryBodyPart],s=e.primaryBodyPart,i=Yn[e.laterality],o={bodyPart:s,localPattern:e.localPattern,systemicPattern:e.systemicPattern,chronicityLevel:e.chronicityLevel,severityLevel:(t==null?void 0:t.severityLevel)||e.severityLevel,insuranceType:e.insuranceType,painScale:(t==null?void 0:t.painScaleCurrent)||7,hasPacemaker:e.hasPacemaker},r=Ae("assessment.condition",Lm,o),a=(t==null?void 0:t.generalCondition)||Je(r),l=Ae("assessment.present",km,o),d=(t==null?void 0:t.soaChain.assessment.present)||Je(l),u=Ae("assessment.patientChange",Nm,o),c=(t==null?void 0:t.soaChain.assessment.patientChange)||Je(u),f=Ae("assessment.whatChanged",Om,o),p=(t==null?void 0:t.soaChain.assessment.whatChanged)||Je(f),g=Ae("assessment.physicalChange",Rm,o),m=(t==null?void 0:t.soaChain.assessment.physicalChange)||Je(g),w=Ae("assessment.findingType",Mm,o),x=(t==null?void 0:t.soaChain.assessment.findingType)||Je(w),b=Ae("assessment.tolerated",$m,o),S=Je(b),I=Ae("assessment.response",jm,o),O=Je(I);let T="";return s==="KNEE"||s==="SHOULDER"?T+=`The patient continues treatment for in ${i} ${n.toLowerCase()} area today.
`:s==="NECK"?T+=`Patient continue treatment for ${n.toLowerCase()} area today.
`:T+=`The patient continues treatment for ${n.toLowerCase()} area today.
`,T+=`The patient's general condition is ${a}, `,T+=`compared with last treatment, the patient presents with ${d} `,T+=`The patient has ${c} ${p}, `,T+=`physical finding has ${m} ${x}. `,T+=`Patient tolerated ${S} ${O}. `,T+=`No adverse side effect post treatment.
`,T+=`Current patient still has ${e.localPattern} in local meridian that cause the pain.`,T}function Wm(e){en[e.localPattern];const n={bodyPart:e.primaryBodyPart,localPattern:e.localPattern,systemicPattern:e.systemicPattern,chronicityLevel:e.chronicityLevel,severityLevel:e.severityLevel,insuranceType:e.insuranceType,painScale:7,hasPacemaker:e.hasPacemaker},s=Ae("plan.verb",Um,n),i=Je(s),o=Ae("plan.treatmentPrinciples",Gm,n),r=Je(o);let a=`Today's treatment principles:
`;return a+=`${i} on ${r} to speed up the recovery, soothe the tendon.`,a}function Er(e,t){const i=((t==null?void 0:t.electricalStimulation)!=null||(t==null?void 0:t.treatmentTime)!=null?t.electricalStimulation===!0||t.treatmentTime!=null&&t.treatmentTime>=30:void 0)??Jp[e.insuranceType]==="full",o=Et[e.primaryBodyPart],r=e.primaryBodyPart,a=nt(gm,r),l=["GB33","GB34","GB36"],d=["SP9","XI YAN","HE DING","A SHI POINT"],u=["BL40","BL57"],c=["BL23","BL55","A SHI POINTS"],f={LBP:["REN6","GB34","ST36","ST40","REN4","SI3"],NECK:["LI4","GB39","SI3","LU7"],SHOULDER:["JIAN QIAN","PC2","LU3","LU4","LU5","LI4","LI11","ST3","GB34","SI3","ST38"],HIP:["GB34","ST36","SP6","LV3"],ELBOW:["LI10","LI11","LU5","HT3"]},p={LBP:["BL23","BL25","BL53","DU4","BL22","YAO JIA JI","A SHI POINTS"],NECK:["GB20","GB21","BL10","BL11","A SHI POINTS"],SHOULDER:["GB21","BL10","BL11","BL17","LI15","LI16","SI9","SI10","SI11","SI12","SI14","SI15","SJ10","A SHI POINTS"],HIP:["GB29","GB30","BL54","A SHI POINTS"],ELBOW:["LI12","SI8","A SHI POINTS"]},g=e.hasPacemaker?"without":"with",m=e.noteType==="TX"?"Greeting patient, Review of the chart, Routine examination of the patient current condition, ":"Preparation, ";if(r==="KNEE"&&i){let b=`${a}
`;return b+=`Daily acupuncture treatment for ${o} - Personal one on one contact with the patient (Total Operation Time: 60 mins)

`,b+=`Front Points: (30 mins) - personal one on one contact with the patient
`,b+=`1. ${m}`,b+="washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",b+=`marking and cleaning the points, Initial Acupuncture needle inserted for right knee ${g} electrical stimulation `,b+=`${l.join(", ")}

`,b+="2. Washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",b+=`marking and cleaning the points, re-insertion of additional needles left knee ${g} electrical stimulation `,b+=`${d.join(", ")}

`,b+=`Removing and properly disposing of needles

`,b+=`Back Points (30 mins) - personal one on one contact with the patient
`,b+="3. Explanation with patient for future treatment plan, washing hands, setting up the clean field, ",b+="selecting acupuncture needle size, selecting location, marking and cleaning the points, ",b+=`re-insertion of additional needles right knee ${g} electrical stimulation `,b+=`${u.join(", ")}

`,b+="4. Washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",b+="marking and cleaning the points, re-insertion of additional needles left knee without electrical stimulation ",b+=`${c.join(", ")}

`,b+=`Removing and properly disposing of needles
`,b+=`Post treatment service and education patient about precautions at home after treatment.
`,b+="Documentation",b}if(r==="SHOULDER"&&i){const b=["LI4","LI11","GB34"],S=["JIAN QIAN","LU3","SI3"],I=["SI9","SJ10","A SHI POINTS"],O=["GB21","LI15","SI11","SI15"];let T=`${a}
`;return T+=`Daily acupuncture treatment for ${o} - Personal one on one contact with the patient (Total Operation Time: 60 mins)

`,T+=`Front Points: (30 mins) - personal one on one contact with the patient
`,T+=`1. ${m}`,T+="washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",T+=`marking and cleaning the points, Initial Acupuncture needle inserted for right ${o} ${g} electrical stimulation `,T+=`${b.join(", ")}

`,T+="2. Washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",T+=`marking and cleaning the points, re-insertion of additional needles for left ${o} ${g} electrical stimulation `,T+=`${S.join(", ")}

`,T+=`Removing and properly disposing of needles
`,T+=`Back Points (30 mins) - personal one on one contact with the patient
`,T+="3. Explanation with patient for future treatment plan, washing hands, setting up the clean field, ",T+="selecting acupuncture needle size, selecting location, marking and cleaning the points, ",T+=`re-insertion of additional needles for right ${o} ${g} electrical stimulation `,T+=`${I.join(", ")}

`,T+="4. Washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",T+=`marking and cleaning the points, re-insertion of additional needles for left ${o} without electrical stimulation `,T+=`${O.join(", ")}

`,T+=`Removing and properly disposing of needles
`,T+=`Post treatment service and education patient about precautions at home after treatment.
`,T+="Documentation",T}if(r==="LBP"&&i){const b=["REN6","GB34","ST36"],S=["ST40","REN4","SI3"],I=["BL25","BL53","DU4"],O=["BL22","YAO JIA JI","A SHI POINTS"],T="mid and lower back";let M=`${a}
`;return M+=`Daily acupuncture treatment for ${T} - Personal one on one contact with the patient (Total Operation Time: 60 mins)

`,M+=`Front Points: (30 mins) - personal one on one contact with the patient
`,M+=`1. ${m}`,M+="washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",M+=`marking and cleaning the points, Initial Acupuncture needle inserted ${g} electrical stimulation `,M+=`${b.join(", ")}

`,M+="2. Explanation with patient for future treatment plan, washing hands, setting up the clean field, ",M+="selecting acupuncture needle size, selecting location, marking and cleaning the points, ",M+=`re-insertion of additional needles ${g} electrical stimulation `,M+=`${S.join(", ")}

`,M+=`Removing and properly disposing of needles

`,M+=`Back Points (30 mins) - personal one on one contact with the patient
`,M+="3. Washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",M+=`marking and cleaning the points, re-insertion of additional needles ${g} electrical stimulation `,M+=`${I.join(", ")}

`,M+="4. Washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",M+=`marking and cleaning the points, re-insertion of additional needles ${g} electrical stimulation `,M+=`${O.join(", ")}

`,M+=`Removing and properly disposing of needles
`,M+=`Post treatment service and education patient about precautions at home after treatment.
`,M+="Documentation",M}if(r==="NECK"&&i){const b=["SI3","SP6","LI11"],S=["LV3","LI11","DU20"],I=["SI13","JIN JIA JI","A SHI POINTS"],O=["BAI LAO","GB14","GB20"];let T=`${a}
`;return T+=`Daily acupuncture treatment for ${o} - Personal one on one contact with the patient (Total Operation Time: 60 mins)

`,T+=`Front Points: (30 mins) - personal one on one contact with the patient
`,T+=`1. ${m}`,T+="washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",T+=`marking and cleaning the points, Initial Acupuncture needle inserted ${g} electrical stimulation `,T+=`${b.join(", ")}

`,T+="2. Explanation with patient for future treatment plan, washing hands, setting up the clean field, ",T+="selecting acupuncture needle size, selecting location, marking and cleaning the points, ",T+=`re-insertion of additional needles ${g} electrical stimulation `,T+=`${S.join(", ")}

`,T+=`Removing and properly disposing of needles

`,T+=`Back Points (30 mins) - personal one on one contact with the patient
`,T+="3. Washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",T+=`marking and cleaning the points, re-insertion of additional needles ${g} electrical stimulation `,T+=`${I.join(", ")}

`,T+="4. Washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",T+="marking and cleaning the points, re-insertion of additional needles without electrical stimulation ",T+=`${O.join(", ")}

`,T+=`Removing and properly disposing of needles
`,T+=`Post treatment service and education patient about precautions at home after treatment.
`,T+="Documentation",T}const w=f[r]||["ST36","SP6","LV3"],x=p[r]||["A SHI POINTS"];if(i){let b=`${a}
`;return b+=`Daily acupuncture treatment for ${o} - Personal one on one contact with the patient (Total Operation Time: 60 mins)

`,b+=`Front Points: (30 mins) - personal one on one contact with the patient
`,b+=`1. ${m}`,b+="washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",b+=`marking and cleaning the points, Initial Acupuncture needle inserted ${g} electrical stimulation ${w.slice(0,3).join(", ")}

`,b+="2. Explanation with patient for future treatment plan, washing hands, setting up the clean field, ",b+="selecting acupuncture needle size, selecting location, marking and cleaning the points, ",b+=`re-insertion of additional needles ${g} electrical stimulation ${w.slice(3,6).join(", ")}

`,b+=`Removing and properly disposing of needles

`,b+=`Back Points (30 mins) - personal one on one contact with the patient
`,b+="3. Washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",b+=`marking and cleaning the points, re-insertion of additional needles ${g} electrical stimulation ${x.slice(0,3).join(", ")}

`,b+="4. Washing hands, setting up the clean field, selecting acupuncture needle size, selecting location, ",b+=`marking and cleaning the points, re-insertion of additional needles ${g} electrical stimulation ${x.slice(3,6).join(", ")}

`,b+=`Removing and properly disposing of needles
`,b+=`Post treatment service and education patient about precautions at home after treatment.
`,b+="Documentation",b}else{let b=`${a}
`;return b+=`Daily acupuncture treatment for ${o} - Personal one on one contact with the patient (Total Operation Time: 15 mins)

`,b+=`Back Points: (15 mins) - personal one on one contact with the patient
`,b+=`1. ${m}`,b+="washing hands, setting up the clean field, selecting acupuncture needle size, ",b+="selecting location, marking and cleaning the points, Initial Acupuncture needle inserted without electrical stimulation ",b+=`${x.slice(0,4).join(", ")}

`,b+=`Removing and properly disposing of needles
`,b+=`Post treatment service and education patient about precautions at home after treatment.
`,b+="Documentation",b}}function Oi(e,t){if(tm(e),e.noteType==="TX"){const l=Km(e,t),d=Cr(e,t),u=Vm(e,t),c=Wm(e),f=Er(e,t);let p=`Subjective
${l}

`;return p+=`Objective
${d}

`,p+=`Assessment
${u}

`,p+=`Plan
${c}

`,p+=f,p}const n=wm(e),s=Cr(e),i=Im(e),o=Em(e),r=Er(e);let a=`Subjective
${n}

`;return a+=`Objective
${s}

`,a+=`Assessment
${i}

`,a+=`Plan
${o}

`,a+=r,a}function ws(e){return e>=9?"severe":e>=7?"moderate to severe":e>=6?"moderate":e>=4?"mild to moderate":"mild"}function ao(e){return e>=9?4:e>=7?3:e>=5?2:1}function Ri(e){const t=e.subjective.painScale;return"current"in t&&typeof t.current=="number"?t.current:"range"in t&&t.range&&typeof t.range.max=="number"?t.range.max:"value"in t&&typeof t.value=="number"?t.value:7}const _r={"Qi Stagnation":{tongue:"pale, thin white coat",pulse:"string-taut"},"Blood Stasis":{tongue:"purple, dark spots",pulse:"choppy"},"Qi & Blood Deficiency":{tongue:"pale, thin coat",pulse:"thready, weak"},"Kidney Yang Deficiency":{tongue:"pale, swollen, teeth marks",pulse:"deep, slow"},"Kidney Qi Deficiency":{tongue:"pale",pulse:"deep, weak"},"Liver Qi Stagnation":{tongue:"red edges",pulse:"wiry"},"Wind-Cold":{tongue:"thin white coat",pulse:"tight"},"Cold-Damp":{tongue:"white greasy coat",pulse:"slippery, slow"}},Dr={KNEE:["ST34","ST35","ST36","GB34","SP9","SP10"],SHOULDER:["LI15","LI16","SI9","SI10","GB21","SJ14"],LBP:["BL23","BL25","BL40","DU4","GB30"],NECK:["GB20","GB21","BL10","SI14","DU14"]};function qm(e,t,n){var a,l;const s=[],i=Ri(e),o=e.subjective.bodyPartNormalized||"LBP",r=ws(i);for(const d of n)switch(d.ruleId){case"IE01":case"TX01":{const u=ws(i);s.push({field:"adlDifficultyLevel",original:d.actual,corrected:u,reason:`Pain=${i}  ${u} `});break}case"IE02":case"TX02":{const u=ao(i);s.push({field:"tenderness",original:d.actual,corrected:`+${u}`,reason:`Pain=${i}  +${u} tenderness`});break}case"IE04":{const u=e.assessment.localPattern||((a=e.assessment.tcmDiagnosis)==null?void 0:a.pattern)||"Qi Stagnation",c=_r[u]||_r["Qi Stagnation"];s.push({field:"tonguePulse",original:d.actual,corrected:`${c.tongue} / ${c.pulse}`,reason:` ${u} `});break}case"IE05":{const u=Ni(r);s.push({field:"shortTermGoal.painScaleTarget",original:d.actual,corrected:u.pain.st,reason:`Pain=${i}  ST Goal  ${u.pain.st}`});break}case"IE06":{const u=Ni(r);s.push({field:"longTermGoal.painScaleTarget",original:d.actual,corrected:u.pain.lt,reason:`Pain=${i}  LT Goal  ${u.pain.lt}`});break}case"IE07":{s.push({field:"tcmDiagnosis",original:"missing",corrected:"Qi Stagnation (local) + Qi Deficiency (systemic)",reason:" TCM diagnosis"});break}case"IE08":{const u=Dr[o]||Dr.LBP;s.push({field:"acupoints",original:"empty",corrected:u.join(", "),reason:`${o} `});break}case"T02":case"T03":case"TX03":{s.push({field:"symptomChange",original:d.actual,corrected:"similar symptom(s) as last visit",reason:""});break}case"T06":case"TX04":{const u=(l=d.message)==null?void 0:l.includes("exacerbate");s.push({field:"progressReason",original:d.actual,corrected:u?"discontinuous treatment":"maintain regular treatments",reason:""});break}case"T07":case"X4":case"IE03":{s.push({field:"electricalStimulation",original:"with",corrected:"without",reason:"Pacemaker "});break}case"TX05":{s.push({field:"tonguePulse",original:d.actual,corrected:d.expected,reason:"TX  IE "});break}case"TX06":{s.push({field:"goals",original:"present",corrected:"removed",reason:"TX  short/long term goals"});break}}return s}const zm={"+4":"severe","+3":"moderate to severe","+2":"mild to moderate","+1":"mild"};function Xm(e,t,n){const s={...e};for(const i of n)switch(i.field){case"adlDifficultyLevel":s.severityLevel=i.corrected;break;case"tenderness":const o=zm[i.corrected];o&&(s.severityLevel=o);break;case"electricalStimulation":s.hasPacemaker=!0;break}return s}function Ym(e,t,n,s){var d,u,c,f,p;const i=e.visits.findIndex(g=>g.subjective.visitType==="INITIAL EVALUATION"),o=i>=0?i:n,r=vl(e,o),a=Xm(r,t,s);if(t.subjective.visitType==="INITIAL EVALUATION")return a.noteType="IE",Oi(a);{a.noteType="TX";const g=s.find(x=>x.field==="tonguePulse");let m=t.objective.tonguePulse||{tongue:"pale",pulse:"thready"};if(g&&g.corrected){const x=g.corrected.split(" / ");x.length===2&&(m={tongue:x[0],pulse:x[1]})}const w={progress:.5,painScaleCurrent:Ri(t),painScaleLabel:String(Ri(t)),severityLevel:a.severityLevel,symptomChange:((d=s.find(x=>x.field==="symptomChange"))==null?void 0:d.corrected)||"improvement of symptom(s)",reasonConnector:"because of",reason:((u=s.find(x=>x.field==="progressReason"))==null?void 0:u.corrected)||"maintain regular treatments",associatedSymptom:"soreness",painFrequency:t.subjective.painFrequency||"Frequent",generalCondition:"good",tightnessGrading:((c=t.objective.tightnessMuscles)==null?void 0:c.gradingScale)||"moderate",tendernessGrading:((f=t.objective.tendernessMuscles)==null?void 0:f.scaleDescription)||"(+2) = Patient states that the area is moderately tender",spasmGrading:((p=t.objective.spasmMuscles)==null?void 0:p.scaleDescription)||"(+2)=Occasional spontaneous spasms",needlePoints:t.plan.acupoints||["LI4","LI11","GB34"],tonguePulse:m,soaChain:{subjective:{painChange:"improved",adlChange:"improved",frequencyChange:"stable"},objective:{tightnessTrend:"reduced",tendernessTrend:"reduced",romTrend:"improved",strengthTrend:"improved"},assessment:{present:"improvement of symptom(s).",patientChange:"decreased",whatChanged:"pain",physicalChange:"reduced",findingType:"local muscles tightness"}}};return Oi(a,w)}}function Qm(e,t){if(t.length===0)return e;let n=e;for(const s of t){if(s.original===s.corrected)continue;const i=n.split(`
`),o=s.corrected.toLowerCase();for(let r=0;r<i.length;r++)if(i[r].toLowerCase().includes(o)){i[r].includes("[CORRECTED:")||(i[r]=`${i[r]} [CORRECTED: was "${s.original}"]`);break}n=i.join(`
`)}return n}function Jm(e,t){var o;const n=[],s=e.visits,i=new Map;for(const r of t){const a=r.visitIndex;i.has(a)||i.set(a,[]),i.get(a).push(r)}for(const[r,a]of Array.from(i.entries())){const l=s[r];if(!l)continue;const d=r>0?s[r-1]:void 0,u=qm(l,d,a),c=Ym(e,l,r,u),f=Qm(c,u),p=((o=a[0])==null?void 0:o.section)||"S";n.push({visitDate:l.assessment.date||"",visitIndex:r,section:p,errors:a,fieldFixes:u,correctedFullText:c,correctedAnnotatedText:f})}return n}function Il(e){const t=e.trim();return{"0/5":0,"1/5":1,"2/5":2,"2+/5":2.5,"3/5":3,"3+/5":3.5,"4-/5":3.8,"4/5":4,"4+/5":4.5,"5/5":5}[t]??4}function gt(e){var n;const t=e.subjective.painScale;return typeof(t==null?void 0:t.current)=="number"?t.current:typeof(t==null?void 0:t.value)=="number"?t.value:typeof((n=t==null?void 0:t.range)==null?void 0:n.max)=="number"?t.range.max:7}function Ar(e){var n;if(!e)return null;const t=((n=e.match(/\d+/g))==null?void 0:n.map(Number))||[];return t.length===0?null:Math.min(...t)}function El(e){const t={severe:0,moderate:1,mild:2,normal:3};return e.objective.rom.items.length?e.objective.rom.items.reduce((s,i)=>s+(t[(i.severity||"").toLowerCase()]??1),0)/e.objective.rom.items.length:0}function Zm(e,t,n){const s=(e||"").toLowerCase(),i=(t||"").toLowerCase(),o=(n||"").toLowerCase();return s?s.includes("qi stagnation")?i.includes("thin white coat")&&(o.includes("string-taut")||o.includes("wiry")):s.includes("blood stasis")?i.includes("purple")&&o.includes("deep"):s.includes("phlegm-damp")?(i.includes("sticky")||i.includes("white"))&&(o.includes("rolling")||o.includes("slippery")):!0:!0}function xs(e){const t=(e||"").toLowerCase();return t.includes("moderate to severe")?"moderate to severe":t.includes("mild to moderate")?"mild to moderate":t.includes("severe")?"severe":t.includes("moderate")?"moderate":"mild"}function Ps(e){const t=(e||"").toLowerCase();return t.includes("intermittent")?0:t.includes("occasional")?1:t.includes("frequent")?2:3}const eg=["maintain regular treatments","reduced level of pain","energy level improved","sleep quality improved","continuous treatment","can move joint more freely"],tg=["skipped treatments","discontinuous treatment","stopped treatment","intense work","bad posture","lack of exercise","exposure to cold air"];function ng(e){const t=(e||"").toLowerCase();return t.includes("improvement of symptom")?"improvement":t.includes("exacerbate of symptom")?"exacerbate":t.includes("similar symptom")?"similar":null}function sg(e){const t=(e||"").toLowerCase(),n=[],s=[];for(const i of eg)t.includes(i.toLowerCase())&&n.push(i);for(const i of tg)t.includes(i.toLowerCase())&&s.push(i);return{positive:n,negative:s}}function rn(e,t){return e<t?"":e>t?"":""}function Z(e){return{id:`${e.ruleId}-${e.visitIndex}-${e.field}`,...e}}function Zt(e,t){const n=["mild","mild to moderate","moderate","moderate to severe","severe"],s=n.indexOf(e),i=n.indexOf(t);return s<0||i<0?0:s-i}function ig(e,t){var f,p,g,m,w;const n=[],s=e.assessment.date||"",i=gt(e),o=ws(i),r=xs(e.subjective.adlImpairment);r!==o&&!(r==="moderate to severe"&&o==="moderate")&&n.push(Z({ruleId:"IE01",severity:"HIGH",visitDate:s,visitIndex:t,section:"S",field:"adlDifficultyLevel",ruleName:"painseverity ",message:`Pain=${i}  ADL severity `,expected:o,actual:r}));const a=ao(i);e.objective.tendernessMuscles.scale<a&&n.push(Z({ruleId:"IE02",severity:"MEDIUM",visitDate:s,visitIndex:t,section:"O",field:"tenderness.scale",ruleName:"paintenderness ",message:" tenderness  pain ",expected:`>= +${a}`,actual:`+${e.objective.tendernessMuscles.scale}`}));const l=El(e);i>=7&&l>2.4&&n.push(Z({ruleId:"IE03",severity:"MEDIUM",visitDate:s,visitIndex:t,section:"O",field:"rom",ruleName:"painROM limitation ",message:" ROM ",expected:"mild/moderate limitation",actual:"mostly normal"})),Zm(e.assessment.localPattern||((f=e.assessment.tcmDiagnosis)==null?void 0:f.pattern),e.objective.tonguePulse.tongue,e.objective.tonguePulse.pulse)||n.push(Z({ruleId:"IE04",severity:"MEDIUM",visitDate:s,visitIndex:t,section:"O",field:"tonguePulse",ruleName:"",message:"",expected:"tone consistent with pattern",actual:`${e.objective.tonguePulse.tongue} / ${e.objective.tonguePulse.pulse}`}));const d=Ar((p=e.plan.shortTermGoal)==null?void 0:p.painScaleTarget);d!==null&&d>=i&&n.push(Z({ruleId:"IE05",severity:"HIGH",visitDate:s,visitIndex:t,section:"P",field:"shortTermGoal.painScaleTarget",ruleName:"short term goal pain target < current pain",message:"",expected:`< ${i}`,actual:String(d)}));const u=Ar((g=e.plan.longTermGoal)==null?void 0:g.painScaleTarget);return d!==null&&u!==null&&u>=d&&n.push(Z({ruleId:"IE06",severity:"HIGH",visitDate:s,visitIndex:t,section:"P",field:"longTermGoal.painScaleTarget",ruleName:"long term goal pain target < short term target",message:"",expected:`< ${d}`,actual:String(u)})),!!((m=e.assessment.tcmDiagnosis)!=null&&m.diagnosis)&&!!((w=e.assessment.tcmDiagnosis)!=null&&w.pattern)||n.push(Z({ruleId:"IE07",severity:"HIGH",visitDate:s,visitIndex:t,section:"A",field:"tcmDiagnosis",ruleName:"TCM diagnosis ",message:" local + systemic ",expected:" TCM diagnosis",actual:"missing"})),(!e.plan.acupoints||e.plan.acupoints.length===0)&&n.push(Z({ruleId:"IE08",severity:"HIGH",visitDate:s,visitIndex:t,section:"P",field:"acupoints",ruleName:"P  needle protocol ",message:"",expected:"non-empty acupoints",actual:"empty"})),n}function og(e,t,n,s){var p,g;const i=[],o=e.assessment.date||"",r=gt(e),a=ws(r),l=xs(e.subjective.adlImpairment);l!==a&&!(l==="moderate to severe"&&a==="moderate")&&i.push(Z({ruleId:"TX01",severity:"MEDIUM",visitDate:o,visitIndex:s,section:"S",field:"adlDifficultyLevel",ruleName:"painseverity ",message:`Pain=${r}  ADL severity `,expected:a,actual:l}));const d=ao(r);if(e.objective.tendernessMuscles.scale<d&&i.push(Z({ruleId:"TX02",severity:"MEDIUM",visitDate:o,visitIndex:s,section:"O",field:"tenderness.scale",ruleName:"paintenderness ",message:" tenderness  pain ",expected:`>= +${d}`,actual:`+${e.objective.tendernessMuscles.scale}`})),n){const m=gt(n),w=r-m;/improvement/i.test(e.assessment.symptomChange||"")&&w>0&&i.push(Z({ruleId:"TX03",severity:"MEDIUM",visitDate:o,visitIndex:s,section:"A",field:"symptomChange",ruleName:"symptomChange  pain delta ",message:"",expected:`pain <= ${m}`,actual:`${r}`}))}if(n&&/improvement/i.test(e.assessment.symptomChange||"")){const w=gt(n),x=n.objective.tendernessMuscles.scale,b=n.objective.tightnessMuscles.gradingScale,S=e.objective.tendernessMuscles.scale,I=e.objective.tightnessMuscles.gradingScale,O=r>w,T=S>x,M=Zt(I,b)>0;if(O||T||M){const L=[];O&&L.push(`pain: ${w}${r}`),T&&L.push(`tenderness: +${x}+${S}`),M&&L.push(`tightness: ${b}${I}`),i.push(Z({ruleId:"T02",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"A",field:"symptomChange",ruleName:"",message:" improvement ",expected:"pain/tenderness/tightness ",actual:L.join(", ")}))}}if(n&&/exacerbate/i.test(e.assessment.symptomChange||"")){const w=gt(n),x=n.objective.tendernessMuscles.scale,b=n.objective.tightnessMuscles.gradingScale,S=e.objective.tendernessMuscles.scale,I=e.objective.tightnessMuscles.gradingScale,O=r<w,T=S<x,M=Zt(I,b)<0;if(O||T||M){const L=[];O&&L.push(`pain: ${w}${r}`),T&&L.push(`tenderness: +${x}+${S}`),M&&L.push(`tightness: ${b}${I}`),i.push(Z({ruleId:"T03",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"A",field:"symptomChange",ruleName:"",message:" exacerbate ",expected:"pain/tenderness/tightness ",actual:L.join(", ")}))}}if(n){const m=(n.assessment.generalCondition||"").toLowerCase(),w=(e.assessment.generalCondition||"").toLowerCase();m==="good"&&w==="poor"&&i.push(Z({ruleId:"TX04",severity:"MEDIUM",visitDate:o,visitIndex:s,section:"A",field:"generalCondition",ruleName:"generalCondition ",message:"generalCondition  visit ",expected:"stable or mild drift",actual:`${m} -> ${w}`}))}if(t){const m=t.objective.tonguePulse.tongue,w=t.objective.tonguePulse.pulse;(e.objective.tonguePulse.tongue!==m||e.objective.tonguePulse.pulse!==w)&&i.push(Z({ruleId:"TX05",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"O",field:"tonguePulse",ruleName:"",message:"TX  IE ",expected:`${m} / ${w}`,actual:`${e.objective.tonguePulse.tongue} / ${e.objective.tonguePulse.pulse}`}))}(e.plan.shortTermGoal||e.plan.longTermGoal)&&i.push(Z({ruleId:"TX06",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"P",field:"goals",ruleName:" short/long term goal",message:"TX  IE goals",expected:"no short/long term goals",actual:"present"}));const u=ng(e.subjective.chiefComplaint),c=sg(e.subjective.chiefComplaint);return u==="improvement"&&c.negative.length>0&&i.push(Z({ruleId:"T06",severity:"MEDIUM",visitDate:o,visitIndex:s,section:"S",field:"chiefComplaint",ruleName:" + ",message:"progressStatus=improvement ",expected:" (maintain regular treatments, reduced level of pain, etc.)",actual:`: ${c.negative.join(", ")}`})),u==="exacerbate"&&c.positive.length>0&&i.push(Z({ruleId:"T06",severity:"MEDIUM",visitDate:o,visitIndex:s,section:"S",field:"chiefComplaint",ruleName:" + ",message:"progressStatus=exacerbate ",expected:" (skipped treatments, intense work, bad posture, etc.)",actual:`: ${c.positive.join(", ")}`})),(((p=t==null?void 0:t.subjective.medicalHistory)==null?void 0:p.some(m=>m.toLowerCase().includes("pacemaker")))||((g=e.subjective.medicalHistory)==null?void 0:g.some(m=>m.toLowerCase().includes("pacemaker"))))&&e.plan.electricalStimulation&&i.push(Z({ruleId:"T07",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"P",field:"electricalStimulation",ruleName:"Pacemaker + ",message:"medicalHistory  Pacemaker  electricalStimulation=true",expected:"electricalStimulation = false",actual:"electricalStimulation = true"})),i}function Ss(e){return e.objective.rom.items.length?e.objective.rom.items.reduce((n,s)=>n+(s.degrees||0),0)/e.objective.rom.items.length:0}function Ts(e){return e.objective.rom.items.length?e.objective.rom.items.reduce((n,s)=>n+Il(s.strength),0)/e.objective.rom.items.length:0}function rg(e,t){const n=new Set(e.map(r=>r.toLowerCase())),s=new Set(t.map(r=>r.toLowerCase())),i=[...n].filter(r=>s.has(r)).length,o=new Set([...n,...s]).size;return o===0?1:i/o}function ag(e){const t=[];for(let n=1;n<e.length;n++){const s=e[n-1],i=e[n],o=i.assessment.date||"",r=n,a=gt(s),l=gt(i);l>a&&t.push(Z({ruleId:"V01",severity:"HIGH",visitDate:o,visitIndex:r,section:"S",field:"painScale",ruleName:"pain ",message:"",expected:`<= ${a}`,actual:`${l}`})),i.objective.tendernessMuscles.scale>s.objective.tendernessMuscles.scale&&t.push(Z({ruleId:"V02",severity:"HIGH",visitDate:o,visitIndex:r,section:"O",field:"tenderness",ruleName:"tenderness ",message:"Tenderness scale ",expected:`<= +${s.objective.tendernessMuscles.scale}`,actual:`+${i.objective.tendernessMuscles.scale}`})),Zt(i.objective.tightnessMuscles.gradingScale,s.objective.tightnessMuscles.gradingScale)>0&&t.push(Z({ruleId:"V03",severity:"HIGH",visitDate:o,visitIndex:r,section:"O",field:"tightness",ruleName:"tightness ",message:"Tightness grading ",expected:`<= ${s.objective.tightnessMuscles.gradingScale}`,actual:i.objective.tightnessMuscles.gradingScale})),i.objective.spasmMuscles.frequencyScale>s.objective.spasmMuscles.frequencyScale&&t.push(Z({ruleId:"V04",severity:"HIGH",visitDate:o,visitIndex:r,section:"O",field:"spasm",ruleName:"spasm ",message:"Spasm scale ",expected:`<= +${s.objective.spasmMuscles.frequencyScale}`,actual:`+${i.objective.spasmMuscles.frequencyScale}`}));const u=Ss(s),c=Ss(i);c<u&&t.push(Z({ruleId:"V05",severity:"HIGH",visitDate:o,visitIndex:r,section:"O",field:"rom",ruleName:"ROM ",message:"ROM ",expected:`>= ${u.toFixed(1)}`,actual:c.toFixed(1)}));const f=Ts(s),p=Ts(i);p<f&&t.push(Z({ruleId:"V06",severity:"MEDIUM",visitDate:o,visitIndex:r,section:"O",field:"strength",ruleName:"strength ",message:"",expected:`>= ${f.toFixed(2)}`,actual:p.toFixed(2)})),Ps(i.subjective.painFrequency)>Ps(s.subjective.painFrequency)&&t.push(Z({ruleId:"V07",severity:"MEDIUM",visitDate:o,visitIndex:r,section:"S",field:"painFrequency",ruleName:"frequency ",message:"",expected:`<= ${s.subjective.painFrequency}`,actual:i.subjective.painFrequency})),/improvement/i.test(i.assessment.symptomChange||"")&&l>a&&t.push(Z({ruleId:"V08",severity:"MEDIUM",visitDate:o,visitIndex:r,section:"A",field:"symptomChange",ruleName:"S  improvement  pain ",message:" pain ",expected:`pain <= ${a}`,actual:String(l)}));const m=rg(s.plan.acupoints||[],i.plan.acupoints||[]);m<.4&&t.push(Z({ruleId:"V09",severity:"HIGH",visitDate:o,visitIndex:r,section:"P",field:"acupoints",ruleName:"P  TX ",message:" TX ",expected:"overlap >= 0.4",actual:m.toFixed(2)}));const w=xs(s.subjective.adlImpairment),x=xs(i.subjective.adlImpairment);Zt(x,w)>0&&t.push(Z({ruleId:"T08",severity:"HIGH",visitDate:o,visitIndex:r,section:"S",field:"adlImpairment",ruleName:"ADL severity ",message:"ADL severity ",expected:`<= ${w}`,actual:x}));const S=M=>{const L=M.match(/muscles (weakness|soreness|heaviness|numbness|stiffness)/);return L?L[1]:null},I={soreness:1,stiffness:2,heaviness:3,weakness:4,numbness:4},O=S(s.subjective.chiefComplaint),T=S(i.subjective.chiefComplaint);if(O&&T){const M=I[O]??0,L=I[T]??0;L>M&&t.push(Z({ruleId:"T09",severity:"MEDIUM",visitDate:o,visitIndex:r,section:"S",field:"chiefComplaint",ruleName:"",message:"",expected:`<= ${O}(${M})`,actual:`${T}(${L})`}))}}return t}function lg(e,t){if(e.some(a=>a.severity==="CRITICAL"))return{ieConsistency:0,txConsistency:0,timelineLogic:0,totalScore:0,grade:"FAIL"};const s={CRITICAL:0,HIGH:15,MEDIUM:8,LOW:0},i=e.reduce((a,l)=>a+s[l.severity],0),o=Math.max(0,100-i),r=o>=80?"PASS":o>=60?"WARNING":"FAIL";return{ieConsistency:o,txConsistency:o,timelineLogic:o,totalScore:o,grade:r}}function cg(e,t){return e.map((n,s)=>{const i=s>0?e[s-1]:void 0,o=gt(n),r=i?gt(i):o,a=n.objective.tendernessMuscles.scale,l=i?i.objective.tendernessMuscles.scale:a,d=n.objective.tightnessMuscles.gradingScale,u=i?i.objective.tightnessMuscles.gradingScale:d,c=n.objective.spasmMuscles.frequencyScale,f=i?i.objective.spasmMuscles.frequencyScale:c,p=Ps(n.subjective.painFrequency),g=i?Ps(i.subjective.painFrequency):p,m=Ss(n),w=i?Ss(i):m,x=Ts(n),b=i?Ts(i):x,S=t.filter(I=>I.visitIndex===s);return{visitDate:n.assessment.date||"",visitIndex:s,visitType:n.subjective.visitType==="INITIAL EVALUATION"?"IE":"TX",indicators:{pain:{value:o,label:String(o),trend:rn(o,r),ok:o<=r},tenderness:{value:`+${a}`,trend:rn(a,l),ok:a<=l},tightness:{value:d,trend:Zt(d,u)<0?"":Zt(d,u)>0?"":"",ok:Zt(d,u)<=0},spasm:{value:`+${c}`,trend:rn(c,f),ok:c<=f},frequency:{value:n.subjective.painFrequency,trend:rn(p,g),ok:p<=g},rom:{summary:m.toFixed(1),trend:rn(m,w),ok:m>=w},strength:{summary:x.toFixed(2),trend:rn(x,b),ok:x>=b}},errors:S}})}const ug={KNEE:["M17","M25.56","M25.46","M25.36","M76.5","M23","M22"],SHOULDER:["M25.51","M75","M79.61"],ELBOW:["M25.52","M77.0","M77.1"],NECK:["M54.2","M54.6","M47.81","M50"],LBP:["M54.5","M54.4","M54.3","M47.8","M51"],UPPER_BACK:["M54.6","M54.2"],HIP:["M25.55","M16"]},dg={right:["1","91"],left:["2","92"],bilateral:["3","93"]},Lr=["97813","97814"],kr=["97810","97811"];function fg(e){const t=[];let n=[];for(let s=0;s<e.length;s++){const i=e[s],o=i.assessment.date||"";i.subjective.visitType;const r=i.diagnosisCodes,a=i.procedureCodes;r.length===0&&t.push(Z({ruleId:"DX03",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"A",field:"diagnosisCodes",ruleName:"ICD ",message:" ICD-10 ",expected:">= 1",actual:"0"}));const l=(i.subjective.bodyPartNormalized||"").toUpperCase(),d=ug[l]||[];if(r.length>0&&d.length>0)for(const b of r)d.some(I=>b.icd10.startsWith(I))||t.push(Z({ruleId:"DX01",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"A",field:"diagnosisCodes",ruleName:"ICDbodyPart ",message:`ICD ${b.icd10}  ${l} `,expected:d.join("/"),actual:b.icd10}));const u=i.subjective.laterality||"unspecified",c=dg[u];if(c&&r.length>0)for(const b of r){const S=b.icd10.slice(-1);/\d/.test(S)&&!c.includes(S)&&t.push(Z({ruleId:"DX04",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"A",field:"diagnosisCodes",ruleName:"ICD laterality ",message:`ICD ${b.icd10} laterality  ${u} `,expected:`suffix ${c.join("/")}`,actual:S}))}const f=r.map(b=>b.icd10).sort();if(n.length>0&&f.length>0){const b=f.filter(I=>n.includes(I)).length,S=new Set([...f,...n]).size;S>0&&b/S<.5&&t.push(Z({ruleId:"DX02",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"A",field:"diagnosisCodes",ruleName:"ICD  visit ",message:"ICD ",expected:"overlap >= 50%",actual:`${Math.round(b/S*100)}%`}))}n=f,a.length===0&&t.push(Z({ruleId:"CPT01",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"P",field:"procedureCodes",ruleName:"CPT ",message:" CPT ",expected:">= 1",actual:"0"}));const p=a.some(b=>Lr.includes(b.cpt)),g=a.some(b=>kr.includes(b.cpt)),m=i.plan.electricalStimulation;m&&!p&&g&&t.push(Z({ruleId:"CPT02",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"P",field:"procedureCodes",ruleName:"CPT",message:"Plan  with electrical stimulation  CPT  97813/97814",expected:"97813/97814",actual:a.map(b=>b.cpt).join(",")})),!m&&p&&!g&&t.push(Z({ruleId:"CPT02",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"P",field:"procedureCodes",ruleName:"CPT",message:"Plan  without electrical stimulation  CPT  97813/97814",expected:"97810/97811",actual:a.map(b=>b.cpt).join(",")}));const w=i.plan.treatmentTime,x=a.filter(b=>[...Lr,...kr].includes(b.cpt));w>15&&x.length<2&&t.push(Z({ruleId:"CPT03",severity:"CRITICAL",visitDate:o,visitIndex:s,section:"P",field:"procedureCodes",ruleName:"CPT units ",message:` ${w}min  15min  unit CPT`,expected:">= 2 acupuncture CPTs",actual:String(x.length)}))}return t}function pg(e,t,n){var i,o,r,a,l,d;const s=[];for(let u=0;u<e.length;u++){const c=e[u],f=c.assessment.date||"",p=gt(c),g=c.subjective.visitType==="INITIAL EVALUATION";if(c.subjective.painTypes.length>0&&c.assessment.localPattern){const L={"Blood Stasis":["pricking","Shooting"],"Cold-Damp":["Freezing","Aching"],"Wind-Cold":["Freezing","Aching"],"Qi Stagnation":["Dull","Aching"],"Qi & Blood Deficiency":["Dull","weighty"]},_=c.assessment.localPattern,j=((i=Object.entries(L).find(([B])=>_.includes(B)))==null?void 0:i[1])||[];j.length>0&&(c.subjective.painTypes.some(q=>j.includes(q))||s.push(Z({ruleId:"S2",severity:"MEDIUM",visitDate:f,visitIndex:u,section:"S",field:"painTypes",ruleName:"painTypes vs localPattern",message:"Pain types do not match local pattern",expected:j.join("/"),actual:c.subjective.painTypes.join(",")})))}if(c.subjective.adlImpairment&&c.subjective.bodyPartNormalized){const _={KNEE:["stair","walk","stand","bend","sit","cook"],SHOULDER:["cook","household","computer","driving","laundry","reach","comb","coat"],NECK:["TV","phone","head","driving","gargling"],LBP:["stand","walk","bend","chair","bed","stair","lift"]}[c.subjective.bodyPartNormalized.toUpperCase()]||[];_.length>0&&(_.some(B=>c.subjective.adlImpairment.toLowerCase().includes(B.toLowerCase()))||s.push(Z({ruleId:"S3",severity:"MEDIUM",visitDate:f,visitIndex:u,section:"S",field:"adlImpairment",ruleName:"ADL activities vs bodyPart",message:"ADL description missing relevant activities",expected:_.join("/"),actual:"no match"})))}if(u>0){const L=q=>{const ee=q.match(/muscles (weakness|soreness|heaviness|numbness|stiffness)/);return ee?ee[1]:null},_={numbness:4,weakness:4,heaviness:3,stiffness:2,soreness:1},j=L(c.subjective.chiefComplaint),B=L(e[u-1].subjective.chiefComplaint);if(j&&B){const q=_[j]||0,ee=_[B]||0;q>ee&&s.push(Z({ruleId:"S6",severity:"MEDIUM",visitDate:f,visitIndex:u,section:"S",field:"chiefComplaint",ruleName:"Associated symptom monotonic",message:"Associated symptom severity increased",expected:`<= ${B}`,actual:j}))}}if(c.subjective.muscleWeaknessScale){const _=(j=>{const B=j.match(/(\d+)(?:%|-(\d+)%)?/);return B?B[2]?(parseInt(B[1])+parseInt(B[2]))/2:parseInt(B[1]):0})(c.subjective.muscleWeaknessScale);(p>=7&&_<40||p>=5&&_<20)&&s.push(Z({ruleId:"S7",severity:"HIGH",visitDate:f,visitIndex:u,section:"S",field:"muscleWeaknessScale",ruleName:"muscleWeaknessScale vs pain",message:"Muscle weakness scale too low for pain level",expected:p>=7?">=40%":">=20%",actual:`${_}%`}))}const m={knee:{flexion:130,extension:0},lbp:{flexion:90,extension:30,rotation:45},shoulder:{flexion:180,extension:60,abduction:180,rotation:90},neck:{flexion:50,extension:60,rotation:80}},w=p>=8?.77:p>=6?.85:p>=3?.95:1,x=(c.subjective.bodyPartNormalized||"").toLowerCase(),b=m[x]||{};for(const L of c.objective.rom.items){const _=L.movement.toLowerCase(),B=(b[_]||(_.includes("abduction")?180:90))*w;(L.degrees>B*1.25||L.degrees<B*.5)&&s.push(Z({ruleId:"O1",severity:"HIGH",visitDate:f,visitIndex:u,section:"O",field:"rom.degrees",ruleName:"ROM degrees vs pain",message:"ROM degrees inconsistent with pain level",expected:`${B.toFixed(0)}25%`,actual:String(L.degrees)}))}for(const L of c.objective.rom.items){const _=L.movement.toLowerCase(),j=b[_]||90,B=L.degrees/j,q=(o=L.severity)==null?void 0:o.toLowerCase();(q==="normal"&&B<.85||q==="severe"&&B>.55||q==="mild"&&(B<.5||B>.95))&&s.push(Z({ruleId:"O2",severity:"HIGH",visitDate:f,visitIndex:u,section:"O",field:"rom.severity",ruleName:"ROM limitation label vs degrees",message:"ROM severity label inconsistent with degrees",expected:"consistent label",actual:`${q} at ${(B*100).toFixed(0)}%`}))}for(const L of c.objective.rom.items){const _=Il(L.strength),j=(r=L.severity)==null?void 0:r.toLowerCase();(j==="severe"&&_>4||j==="normal"&&_<4)&&s.push(Z({ruleId:"O3",severity:"HIGH",visitDate:f,visitIndex:u,section:"O",field:"rom.strength",ruleName:"Strength vs ROM limitation",message:"Strength inconsistent with ROM severity",expected:j==="severe"?"<=4":">=4",actual:String(_)}))}if(c.subjective.bodyPartNormalized){const _={KNEE:["gluteus","piriformis","quadratus","adductor","ITB","rectus","gastronemius","hamstring","tibialis","plantar","achilles","femoris"],SHOULDER:["trapezius","tuberosity","AC joint","levator","rhomboid","deltoid","bicep","supraspinatus","triceps","infraspinatus","subscapularis"],NECK:["scalene","levator","trapezius","sternocleidomastoid","semispinalis","splenius","suboccipital"],LBP:["iliocostalis","spinalis","longissimus","iliopsoas","quadratus","gluteal","multifidus"]}[c.subjective.bodyPartNormalized.toUpperCase()]||[];if(_.length>0){const j=[...c.objective.tightnessMuscles.muscles,...c.objective.tendernessMuscles.muscles,...c.objective.spasmMuscles.muscles];for(const B of j)_.some(ee=>B.toLowerCase().includes(ee.toLowerCase()))||s.push(Z({ruleId:"O8",severity:"HIGH",visitDate:f,visitIndex:u,section:"O",field:"muscles",ruleName:"Muscles belong to bodyPart",message:"Muscle does not belong to body part",expected:_.join("/"),actual:B}))}}if(c.subjective.bodyPartNormalized){const _={KNEE:["flexion","extension"],SHOULDER:["abduction","adduction","flexion","extension","rotation"],NECK:["flexion","extension","rotation"],LBP:["flexion","extension","rotation"]}[c.subjective.bodyPartNormalized.toUpperCase()]||[];if(_.length>0)for(const j of c.objective.rom.items)_.some(q=>j.movement.toLowerCase().includes(q))||s.push(Z({ruleId:"O9",severity:"CRITICAL",visitDate:f,visitIndex:u,section:"O",field:"rom.movement",ruleName:"ROM movement belongs to bodyPart",message:"ROM movement invalid for body part",expected:_.join("/"),actual:j.movement}))}if(!g&&u>0){const L=e.find(_=>_.subjective.visitType==="INITIAL EVALUATION");if(L!=null&&L.assessment.localPattern&&c.assessment.localPattern){const _=L.assessment.localPattern.toLowerCase(),j=c.assessment.localPattern.toLowerCase();!j.includes(_)&&!_.includes(j)&&s.push(Z({ruleId:"A5",severity:"CRITICAL",visitDate:f,visitIndex:u,section:"A",field:"localPattern",ruleName:"localPattern consistent across visits",message:"Local pattern inconsistent with IE",expected:_,actual:j}))}}if(c.subjective.bodyPartNormalized){const _={KNEE:[30,34],SHOULDER:[30,34,36],NECK:[30,34,36],LBP:[30,34]}[c.subjective.bodyPartNormalized.toUpperCase()]||[];if(_.length>0)for(const j of c.plan.needleSpecs){const B=parseInt(j.gauge.replace("#",""));_.includes(B)||s.push(Z({ruleId:"P1",severity:"CRITICAL",visitDate:f,visitIndex:u,section:"P",field:"needleSpecs.gauge",ruleName:"Needle gauge vs bodyPart",message:"Invalid needle gauge for body part",expected:_.join("/"),actual:String(B)}))}}(!c.plan.acupoints||c.plan.acupoints.length===0||c.plan.acupoints.length>20)&&s.push(Z({ruleId:"P2",severity:"CRITICAL",visitDate:f,visitIndex:u,section:"P",field:"acupoints",ruleName:"Acupoints reasonable count",message:"Acupoints count unreasonable",expected:"2-20",actual:String(((a=c.plan.acupoints)==null?void 0:a.length)||0)}));const S=p>=7||p<=4?2:1,I=c.objective.tightnessMuscles.gradingScale.toLowerCase(),O=c.objective.tendernessMuscles.scale;(p>=7&&!I.includes("moderate")&&!I.includes("severe")||p<=4&&(I.includes("severe")||O>2))&&s.push(Z({ruleId:"X1",severity:"CRITICAL",visitDate:f,visitIndex:u,section:"O",field:"tightness/tenderness",ruleName:"PainSeverityTightnessTenderness chain",message:"Inconsistent pain-tightness-tenderness chain",expected:`pain ${p}  moderate tightness/+${S}`,actual:`${I}/+${O}`}));const T=El(c);if((p>=8&&T>2.5||p<=3&&T<.5)&&s.push(Z({ruleId:"X2",severity:"CRITICAL",visitDate:f,visitIndex:u,section:"O",field:"rom",ruleName:"PainROMStrength chain",message:"ROM severity inconsistent with pain",expected:p>=8?"not normal":"not severe",actual:T>2.5?"mostly normal":"mostly severe"})),g&&(c.assessment.localPattern||c.assessment.systemicPattern)){const L={"Blood Stasis":"purple","Qi Stagnation":"thin white","Cold-Damp":"white","Qi & Blood Deficiency":"pale","Kidney Yang":"pale",Phlegm:"sticky"},_=[c.assessment.localPattern,c.assessment.systemicPattern].filter(Boolean);for(const j of _){const B=(l=Object.entries(L).find(([q])=>j.includes(q)))==null?void 0:l[1];B&&!c.objective.tonguePulse.tongue.toLowerCase().includes(B)&&s.push(Z({ruleId:"X3",severity:"CRITICAL",visitDate:f,visitIndex:u,section:"O",field:"tonguePulse",ruleName:"PatternTongue/Pulse chain",message:"Tongue inconsistent with pattern",expected:B,actual:c.objective.tonguePulse.tongue}))}}(((d=c.subjective.medicalHistory)==null?void 0:d.some(L=>L.toLowerCase().includes("pacemaker")))||c.subjective.chiefComplaint.toLowerCase().includes("pacemaker"))&&c.plan.electricalStimulation&&s.push(Z({ruleId:"X4",severity:"CRITICAL",visitDate:f,visitIndex:u,section:"P",field:"electricalStimulation",ruleName:"PacemakerElectrical Stimulation",message:"Electrical stimulation contraindicated with pacemaker",expected:"false",actual:"true"}))}return s}function mg(e){var u,c,f,p;const t=e.document,n=t.visits,s=[],i=n.find(g=>g.subjective.visitType==="INITIAL EVALUATION");i||s.push(Z({ruleId:"DOC01",severity:"CRITICAL",visitDate:"",visitIndex:0,section:"S",field:"visitType",ruleName:"",message:" IE ",expected:"at least one IE",actual:"none"})),n.forEach((g,m)=>{g.subjective.visitType==="INITIAL EVALUATION"?s.push(...ig(g,m)):s.push(...og(g,i,m>0?n[m-1]:void 0,m))}),s.push(...ag(n)),s.push(...fg(n)),s.push(...pg(n)),n.filter(g=>g.subjective.visitType!=="INITIAL EVALUATION").length;const o=lg(s),r=s.filter(g=>g.severity==="CRITICAL").length,a=s.filter(g=>g.severity==="HIGH").length,l=s.filter(g=>g.severity==="MEDIUM").length,d=s.filter(g=>g.severity==="LOW").length;return{patient:t.header.patient,summary:{totalVisits:n.length,visitDateRange:{first:((c=(u=n[0])==null?void 0:u.assessment)==null?void 0:c.date)||t.header.dateOfService,last:((p=(f=n[n.length-1])==null?void 0:f.assessment)==null?void 0:p.date)||t.header.dateOfService},errorCount:{critical:r,high:a,medium:l,low:d,total:s.length},scoring:o},timeline:cg(n,s),errors:s,corrections:Jm(t,s)}}function gg(e,t){return t?"-":e===""?"improvement":e===""?"no change":"worsening"}function hg(e=[]){const t=e.map(o=>{var d,u,c,f;const r=o.visitType==="IE",a=((u=(d=o.indicators)==null?void 0:d.pain)==null?void 0:u.trend)||"",l=((f=(c=o.indicators)==null?void 0:c.pain)==null?void 0:f.value)??0;return{index:o.visitIndex,date:o.visitDate||"-",type:r?"INITIAL EVALUATION":"Follow up visit",painScale:l,symptomChange:gg(a,r)}}),n=t.filter(o=>o.symptomChange==="improvement").length,s=t.filter(o=>o.symptomChange==="worsening").length,i=n>=s?"improving":"worsening";return{visits:t,trends:{painScale:{direction:i},symptomChange:{direction:i}}}}function yg(e=[]){return e.map((t,n)=>({id:t.id||String(n+1),severity:t.severity,ruleName:`${t.ruleId} ${t.ruleName}`,message:`${t.message} (expected: ${t.expected}; actual: ${t.actual})`,location:{visitIndex:t.visitIndex,section:t.section,field:t.field}}))}function vg(e){const t=hg(e.timeline);return{patient:e.patient,summary:{totalVisits:e.summary.totalVisits,visitDateRange:e.summary.visitDateRange,errorCount:e.summary.errorCount,scoring:{totalScore:e.summary.scoring.totalScore,grade:e.summary.scoring.grade,ieConsistency:e.summary.scoring.ieConsistency,txConsistency:e.summary.scoring.txConsistency,timelineLogic:e.summary.scoring.timelineLogic,breakdown:{soapConsistency:e.summary.scoring.ieConsistency,timelineLogic:e.summary.scoring.timelineLogic,ruleCompliance:e.summary.scoring.txConsistency}}},timeline:t.visits,trends:t.trends,errors:yg(e.errors),corrections:e.corrections||[],raw:e}}async function _l(e,t={}){var o;const n=await $f(e),s=fl(n);if(!s.success||!s.document){const r=((o=s.errors)==null?void 0:o.map(a=>`${a.field}: ${a.message}`).join(" | "))||"Unknown parse failure";throw new Error(`: ${r}`)}const i=mg({document:s.document,insuranceType:t.insuranceType,treatmentTime:t.treatmentTime});return vg(i)}async function bg(e){const t=[];for(const n of e)try{const s=await _l(n);t.push({file:n.name,success:!0,report:s})}catch(s){t.push({file:n.name,success:!1,error:s instanceof Error?s.message:String(s)})}return t}const wg={validateFile:_l,validateFiles:bg},xg=Td("files",()=>{const e=Se([]),t=Se(null),n=Se(!1),s=Se("OPTUM"),i=Se(15),o=ae(()=>e.value.length>0),r=ae(()=>e.value.find(m=>m.id===t.value)||null),a=ae(()=>e.value.filter(m=>m.status==="done")),l=ae(()=>e.value.filter(m=>m.status==="pending")),d=ae(()=>{const m=a.value;if(m.length===0)return null;const w={PASS:0,WARNING:0,FAIL:0};let x=0,b=0;return m.forEach(S=>{S.report&&(w[S.report.summary.scoring.grade]++,x+=S.report.summary.scoring.totalScore,b+=S.report.summary.errorCount.total)}),{total:m.length,grades:w,avgScore:Math.round(x/m.length),totalErrors:b}});function u(m){const w=m.map(x=>({id:Math.random().toString(36).slice(2)+Date.now().toString(36),name:x.name,file:x,status:"pending",report:null,error:null}));e.value=[...e.value,...w]}function c(m){t.value=(m==null?void 0:m.id)||null}function f(m){e.value=e.value.filter(w=>w.id!==m),t.value===m&&(t.value=null)}function p(){e.value=[],t.value=null}async function g(){if(n.value)return;n.value=!0;const m=[];for(const w of e.value)if(w.status==="pending"){w.status="processing";try{const x=await wg.validateFile(w.file,{insuranceType:s.value,treatmentTime:i.value});w.report=x,w.status="done",m.push({fileName:w.name,patient:x.patient,summary:x.summary,processedAt:new Date().toISOString()})}catch(x){console.error("[AChecker] validateFile failed:",x),w.status="error",w.error=x.message||String(x)}}if(n.value=!1,!t.value&&a.value.length>0&&(t.value=a.value[0].id),m.length>0)try{const{useHistory:w}=await dl(async()=>{const{useHistory:b}=await Promise.resolve().then(()=>My);return{useHistory:b}},void 0),x=w();m.forEach(b=>{x.saveResult(b.fileName,{patient:b.patient,summary:b.summary,processedAt:b.processedAt})})}catch(w){console.error("[AChecker] Failed to save history:",w)}}return{files:e,selectedFileId:t,isProcessing:n,insuranceType:s,treatmentTime:i,hasFiles:o,selectedFile:r,processedFiles:a,pendingFiles:l,stats:d,addFiles:u,selectFile:c,removeFile:f,clearAll:p,processAllFiles:g}}),Pg={key:0,class:"card p-4"},Sg={key:1,class:"max-w-2xl mx-auto"},Tg={key:0,class:"mt-2 text-sm text-red-600"},Cg={key:0,class:"mt-2 text-sm text-red-600"},Nr=50,Or={__name:"FileUploader",props:{compact:{type:Boolean,default:!1}},emits:["files-added"],setup(e,{emit:t}){const n=t,s=Se(!1),i=Se(null),o=Se("");function r(f){const p=Nr*1024*1024,g=f.filter(m=>m.size<=p);return g.length<f.length?o.value=`Some files exceed ${Nr}MB limit and were skipped`:o.value="",g}function a(f){f.preventDefault(),s.value=!0}function l(){s.value=!1}function d(f){f.preventDefault(),s.value=!1;const p=Array.from(f.dataTransfer.files).filter(m=>m.type==="application/pdf"),g=r(p);g.length>0&&n("files-added",g)}function u(f){const p=Array.from(f.target.files),g=r(p);g.length>0&&n("files-added",g),f.target.value=""}function c(){var f;(f=i.value)==null||f.click()}return(f,p)=>e.compact?(K(),W("div",Pg,[h("button",{onClick:c,class:"w-full flex items-center justify-center gap-2 py-3 border-2 border-dashed border-ink-200 rounded-lg text-ink-500 hover:border-ink-400 hover:text-ink-700 transition-all"},[...p[0]||(p[0]=[h("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),h("span",{class:"font-medium"},"",-1)])]),h("input",{ref_key:"fileInput",ref:i,type:"file",accept:".pdf",multiple:"",class:"hidden",onChange:u},null,544)])):(K(),W("div",Sg,[h("div",{onDragover:a,onDragleave:l,onDrop:d,class:_e(["card p-12 text-center transition-all duration-300",s.value?"dropzone-active border-2 border-dashed scale-[1.02]":"border-2 border-dashed border-ink-200"])},[p[2]||(p[2]=Ua('<div class="mb-6"><div class="w-20 h-20 mx-auto bg-paper-200 rounded-2xl flex items-center justify-center"><svg class="w-10 h-10 text-ink-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></div></div><h2 class="font-display text-2xl font-semibold text-ink-800 mb-2">  AC NOTE PDF </h2><p class="text-ink-500 mb-6">  </p>',3)),h("button",{onClick:c,class:"btn-primary inline-flex items-center gap-2"},[...p[1]||(p[1]=[h("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1),h("span",null," PDF ",-1)])]),p[3]||(p[3]=h("p",{class:"mt-6 text-xs text-ink-400"},"    PDF  ",-1)),o.value?(K(),W("p",Tg,G(o.value),1)):we("",!0)],34),h("input",{ref_key:"fileInput",ref:i,type:"file",accept:".pdf",multiple:"",class:"hidden",onChange:u},null,544),e.compact&&o.value?(K(),W("p",Cg,G(o.value),1)):we("",!0)]))}},Ig={class:"card divide-y divide-ink-100"},Eg={class:"px-4 py-3 bg-paper-100/50 rounded-t-xl"},_g={class:"font-medium text-ink-700 text-sm"},Dg={class:"text-ink-400 font-normal"},Ag={class:"max-h-[400px] overflow-y-auto"},Lg=["onClick"],kg={key:0,class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ng={key:1,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},Og={key:2,class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Rg={key:3,class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Mg={class:"flex-1 min-w-0"},$g={class:"text-sm font-medium text-ink-800 truncate"},jg={key:0,class:"text-xs text-status-fail truncate"},Bg={key:1,class:"text-xs text-ink-400"},Fg={key:0,class:"flex items-center gap-2"},Hg=["onClick"],Ug={key:0,class:"px-4 py-8 text-center text-ink-400 text-sm"},Gg={__name:"FileList",props:{files:{type:Array,required:!0},selectedId:{type:String,default:null}},emits:["select","remove"],setup(e,{emit:t}){const n=t;function s(o){switch(o){case"pending":return"text-ink-400";case"processing":return"text-status-info";case"done":return"text-status-pass";case"error":return"text-status-fail";default:return"text-ink-400"}}function i(o){switch(o){case"PASS":return"grade-pass";case"WARNING":return"grade-warning";case"FAIL":return"grade-fail";default:return""}}return(o,r)=>(K(),W("div",Ig,[h("div",Eg,[h("h3",_g,[r[0]||(r[0]=zt("  ",-1)),h("span",Dg,"("+G(e.files.length)+")",1)])]),h("div",Ag,[(K(!0),W(Ee,null,_t(e.files,a=>(K(),W("div",{key:a.id,onClick:l=>a.status==="done"&&n("select",a),class:_e(["px-4 py-3 flex items-center gap-3 transition-all",a.status==="done"?"cursor-pointer hover:bg-paper-100":"",e.selectedId===a.id?"bg-ink-50 border-l-2 border-ink-600":""])},[h("div",{class:_e(["flex-shrink-0",s(a.status)])},[a.status==="pending"?(K(),W("svg",kg,[...r[1]||(r[1]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):a.status==="processing"?(K(),W("svg",Ng,[...r[2]||(r[2]=[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):a.status==="done"?(K(),W("svg",Og,[...r[3]||(r[3]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(K(),W("svg",Rg,[...r[4]||(r[4]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))],2),h("div",Mg,[h("p",$g,G(a.name),1),a.error?(K(),W("p",jg,G(a.error),1)):a.status==="processing"?(K(),W("p",Bg," ... ")):we("",!0)]),a.status==="done"&&a.report?(K(),W("div",Fg,[h("span",{class:_e(["px-2 py-0.5 text-xs font-medium rounded border",i(a.report.summary.scoring.grade)])},G(a.report.summary.scoring.totalScore),3)])):we("",!0),h("button",{onClick:Vn(l=>n("remove",a.id),["stop"]),class:"flex-shrink-0 p-1 text-ink-300 hover:text-status-fail transition-colors"},[...r[5]||(r[5]=[h("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Hg)],10,Lg))),128))]),e.files.length===0?(K(),W("div",Ug,"  ")):we("",!0)]))}},Kg={class:"flex items-center gap-3"},Vg={class:"font-medium"},Wg={__name:"CriticalBanner",props:{count:{type:Number,required:!0}},emits:["click"],setup(e){return(t,n)=>e.count>0?(K(),W("div",{key:0,class:"bg-red-600 text-white px-6 py-3 flex items-center justify-between cursor-pointer hover:bg-red-700 transition-colors",onClick:n[0]||(n[0]=s=>t.$emit("click"))},[h("div",Kg,[n[1]||(n[1]=h("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),h("span",Vg,"  "+G(e.count)+"  ",1)]),n[2]||(n[2]=h("div",{class:"flex items-center gap-2 text-sm opacity-90"},[h("span",null,""),h("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])):we("",!0)}},qg={class:"space-y-3"},zg={key:0,class:"py-8 text-center"},Xg=["onClick"],Yg={class:"flex items-center justify-between"},Qg={class:"flex items-center gap-3"},Jg={class:"flex items-center gap-2"},Zg={class:"font-medium text-ink-800"},eh={class:"text-sm text-ink-500"},th={class:"flex items-center gap-2 text-xs"},nh={key:0,class:"px-2 py-1 rounded severity-critical font-medium"},sh={key:1,class:"px-2 py-1 rounded severity-high font-medium"},ih={key:2,class:"px-2 py-1 rounded severity-medium font-medium"},oh={class:"text-ink-400 font-medium ml-1"},rh={class:"px-4 pb-4 space-y-2 border-t border-ink-100/50"},ah={class:"flex items-start gap-3"},lh={class:"flex-1 min-w-0"},ch={class:"text-sm font-medium text-ink-800"},uh={class:"text-sm text-ink-600 mt-1"},dh={class:"text-xs text-ink-400 mt-2 font-mono"},fh={__name:"VisitErrorGroup",props:{errors:{type:Array,required:!0},timeline:{type:Array,required:!0}},setup(e){const t=e,n=Se(new Set),s=Se(!1),i=ae(()=>{const c=new Map;return t.errors.forEach(f=>{var g;const p=((g=f.location)==null?void 0:g.visitIndex)??f.visitIndex;c.has(p)||c.set(p,[]),c.get(p).push(f)}),c}),o=ae(()=>{const c=[];return i.value.forEach((f,p)=>{const g=t.timeline[p],m=f.some(w=>w.severity==="CRITICAL");c.push({index:p,date:(g==null?void 0:g.date)||"Unknown",type:(g==null?void 0:g.type)||"Unknown",errors:f,errorCount:f.length,hasCritical:m,criticalCount:f.filter(w=>w.severity==="CRITICAL").length,highCount:f.filter(w=>w.severity==="HIGH").length,mediumCount:f.filter(w=>w.severity==="MEDIUM").length})}),c.sort((f,p)=>f.index-p.index)});Hc(()=>{if(!s.value&&o.value.length>0){const c=o.value.filter(f=>f.hasCritical).map(f=>f.index);n.value=new Set(c),s.value=!0}});const r=c=>{const f=new Set(n.value);f.has(c)?f.delete(c):f.add(c),n.value=f},a=c=>n.value.has(c);function l(c){switch(c){case"CRITICAL":return"severity-critical";case"HIGH":return"severity-high";case"MEDIUM":return"severity-medium";case"LOW":return"severity-low";default:return""}}function d(c){return c==="INITIAL EVALUATION"?"IE":"TX"}function u(c){return c==="INITIAL EVALUATION"?"bg-status-info/10 text-status-info":"bg-paper-200 text-ink-600"}return(c,f)=>(K(),W("div",qg,[o.value.length===0?(K(),W("div",zg,[...f[0]||(f[0]=[h("div",{class:"w-12 h-12 mx-auto mb-3 bg-status-pass/10 rounded-full flex items-center justify-center"},[h("svg",{class:"w-6 h-6 text-status-pass",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1),h("p",{class:"text-sm text-ink-500"},"",-1)])])):we("",!0),(K(!0),W(Ee,null,_t(o.value,p=>(K(),W("div",{key:p.index,class:_e(["border rounded-lg overflow-hidden transition-all duration-200",p.hasCritical?"border-status-fail/30 bg-status-fail/5":"border-ink-100 bg-white"])},[h("div",{class:"px-4 py-3 cursor-pointer hover:bg-paper-50/50 transition-colors",onClick:g=>r(p.index)},[h("div",Yg,[h("div",Qg,[(K(),W("svg",{class:_e(["w-5 h-5 text-ink-400 transition-transform duration-200",a(p.index)?"rotate-90":""]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...f[1]||(f[1]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2)),h("div",null,[h("div",Jg,[h("span",Zg,"Visit "+G(p.index+1),1),h("span",eh,G(p.date),1),h("span",{class:_e(["px-2 py-0.5 text-xs rounded",u(p.type)])},G(d(p.type)),3)])])]),h("div",th,[p.criticalCount>0?(K(),W("span",nh,G(p.criticalCount)+" CRITICAL ",1)):we("",!0),p.highCount>0?(K(),W("span",sh,G(p.highCount)+" HIGH ",1)):we("",!0),p.mediumCount>0?(K(),W("span",ih,G(p.mediumCount)+" MEDIUM ",1)):we("",!0),h("span",oh,"  "+G(p.errorCount)+"  ",1)])])],8,Xg),It(h("div",rh,[(K(!0),W(Ee,null,_t(p.errors,g=>{var m,w;return K(),W("div",{key:g.id,class:"p-3 bg-paper-50 rounded-lg border border-ink-100 mt-2"},[h("div",ah,[h("span",{class:_e(["flex-shrink-0 px-2 py-0.5 text-xs font-medium rounded",l(g.severity)])},G(g.severity),3),h("div",lh,[h("p",ch,G(g.ruleName),1),h("p",uh,G(g.message),1),h("p",dh,G(((m=g.location)==null?void 0:m.section)||"unknown")+"."+G(((w=g.location)==null?void 0:w.field)||"unknown"),1)])])])}),128))],512),[[to,a(p.index)]])],2))),128))]))}},Dl=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},ph={class:"border border-ink-200 rounded-lg overflow-hidden bg-white"},mh={class:"flex items-center gap-3"},gh={class:"text-sm font-semibold text-ink-800"},hh={class:"text-xs text-ink-500 mt-0.5"},yh={class:"flex items-center gap-1.5"},vh={key:0,class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},bh={key:1,class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},wh={class:"divide-y divide-ink-100"},xh={class:"p-4"},Ph={class:"p-3 bg-status-fail/5 border border-status-fail/20 rounded-lg"},Sh={class:"text-sm text-ink-800 leading-relaxed whitespace-pre-wrap font-mono"},Th={class:"p-4"},Ch={class:"p-3 bg-status-pass/5 border border-status-pass/20 rounded-lg max-h-96 overflow-y-auto"},Ih={class:"text-sm text-ink-800 leading-relaxed whitespace-pre-wrap font-mono"},Eh={__name:"VisitCorrectionCard",props:{visitIndex:{type:Number,required:!0},visitDate:{type:String,default:""},corrections:{type:Array,required:!0}},setup(e){const t=e,n=Se(!1),s=Se(!1),i=ae(()=>`Visit ${t.visitIndex+1}`),o=ae(()=>t.corrections.flatMap(f=>f.fieldFixes||[])),r=ae(()=>{var f;return((f=t.corrections[0])==null?void 0:f.correctedFullText)||""}),a=ae(()=>t.corrections.flatMap(f=>f.errors||[])),l=ae(()=>{const f=a.value.map(p=>p.severity);return f.includes("CRITICAL")?"CRITICAL":f.includes("HIGH")?"HIGH":f.includes("MEDIUM")?"MEDIUM":f.includes("LOW")?"LOW":"MEDIUM"}),d=async()=>{try{await navigator.clipboard.writeText(r.value),s.value=!0,setTimeout(()=>{s.value=!1},2e3)}catch(f){throw new Error("Failed to copy: "+f.message)}};function u(f){switch(f){case"CRITICAL":return"severity-critical";case"HIGH":return"severity-high";case"MEDIUM":return"severity-medium";case"LOW":return"severity-low";default:return""}}const c=ae(()=>o.value.length===0?"()":o.value.map(f=>`${f.field}: ${f.original}  ${f.corrected}
  : ${f.reason}`).join(`

`));return(f,p)=>(K(),W("div",ph,[h("button",{onClick:p[0]||(p[0]=g=>n.value=!n.value),class:"w-full px-4 py-3 flex items-center justify-between bg-paper-100/50 hover:bg-paper-100 transition-colors"},[h("div",mh,[(K(),W("svg",{class:_e(["w-5 h-5 text-ink-500 transition-transform duration-200",n.value?"rotate-90":""]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...p[1]||(p[1]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2)),h("div",null,[h("p",gh,G(i.value),1),h("p",hh,G(e.visitDate||"N/A")+"  "+G(a.value.length)+"  ",1)]),h("span",{class:_e(["px-2 py-0.5 text-xs font-medium rounded",u(l.value)])},G(l.value),3)]),h("button",{onClick:Vn(d,["stop"]),class:_e(["px-3 py-1.5 text-xs font-medium rounded-lg transition-all duration-200",s.value?"bg-status-pass/10 text-status-pass":"bg-paper-200 text-ink-700 hover:bg-paper-300"])},[h("div",yh,[s.value?(K(),W("svg",vh,[...p[2]||(p[2]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(K(),W("svg",bh,[...p[3]||(p[3]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),h("span",null,G(s.value?"":" SOAP"),1)])],2)]),It(h("div",wh,[h("div",xh,[p[4]||(p[4]=h("div",{class:"flex items-center gap-2 mb-2"},[h("svg",{class:"w-4 h-4 text-status-fail",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),h("span",{class:"text-xs font-medium text-ink-600"},"")],-1)),h("div",Ph,[h("p",Sh,G(c.value),1)])]),h("div",Th,[p[5]||(p[5]=h("div",{class:"flex items-center gap-2 mb-2"},[h("svg",{class:"w-4 h-4 text-status-pass",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),h("span",{class:"text-xs font-medium text-ink-600"}," SOAP ")],-1)),h("div",Ch,[h("p",Ih,G(r.value),1)])])],512),[[to,n.value]])]))}},_h=Dl(Eh,[["__scopeId","data-v-c20e2265"]]);function Dh(e){const{patient:t,summary:n,timeline:s,allErrors:i}=e,o=c=>`"${String(c??"").replace(/"/g,'""')}"`,a="\uFEFF"+["",`,${o(t.name)}`,`ID,${o(t.patientId)}`,`DOB,${o(t.dob)}`,"","",`,${n.totalVisits}`,`,${n.visitDateRange.first} - ${n.visitDateRange.last}`,`,${n.scoring.totalScore}`,`,${n.scoring.grade}`,`SOAP,${n.scoring.breakdown.soapConsistency}`,`,${n.scoring.breakdown.timelineLogic}`,`,${n.scoring.breakdown.ruleCompliance}`,`,${n.errorCount.total}`,"","","#,,,Pain,",...s.visits.map(c=>`${c.index+1},${c.date},${c.type},${c.painScale}/10,${c.symptomChange}`),"","",",,,",...i.map(c=>`${c.severity},${o(c.ruleName)},${o(c.message)},Visit${c.location.visitIndex+1}.${c.location.section}.${c.location.field}`)].join(`
`),l=new Blob([a],{type:"text/csv;charset=utf-8"}),d=URL.createObjectURL(l),u=document.createElement("a");u.href=d,u.download=`achecker-${(t.name||"report").replace(/\s+/g,"-")}-${new Date().toISOString().slice(0,10)}.csv`,u.click(),URL.revokeObjectURL(d)}function Ah(e){const{allErrors:t}=e;if(!t||t.length===0)throw new Error("No errors with corrections to copy");const n=new Map;t.forEach(r=>{if(!r.correction)return;const{visitIndex:a,section:l}=r.location,d=`Visit ${a+1}`,u=r.visitType||"",c=u?`${d} (${u})`:d;n.has(l)||n.set(l,new Map);const f=n.get(l);f.has(c)||f.set(c,[]),f.get(c).push(r.correction)});const s=["Subjective","Objective","Assessment","Plan"],i=[];s.forEach(r=>{if(!n.has(r))return;i.push(`=== ${r} ===`);const a=n.get(r);Array.from(a.keys()).sort((d,u)=>{const c=parseInt(d.match(/\d+/)[0]),f=parseInt(u.match(/\d+/)[0]);return c-f}).forEach(d=>{const u=a.get(d);i.push(`${d}:`),u.forEach(c=>{i.push(c)}),i.push("")})});const o=i.join(`
`).trim();return navigator.clipboard.writeText(o).catch(r=>{throw new Error(`Failed to copy to clipboard: ${r.message}`)}),o}function Lh(e){if(!e||e.length===0)throw new Error("No history items to export");const t=l=>`"${String(l??"").replace(/"/g,'""')}"`,s=[["filename","patient_name","patient_id","total_visits","date_range","score","grade","critical_count","high_count","medium_count","error_visit","error_section","error_rule_id","error_severity","error_message","error_expected","error_actual"].join(",")];e.forEach(l=>{const{filename:d,report:u}=l,{patient:c,summary:f,allErrors:p}=u;!p||p.length===0?s.push([t(d),t(c.name),t(c.patientId),f.totalVisits,t(`${f.visitDateRange.first} - ${f.visitDateRange.last}`),f.scoring.totalScore,t(f.scoring.grade),f.errorCount.critical||0,f.errorCount.high||0,f.errorCount.medium||0,"","","","","","",""].join(",")):p.forEach(g=>{var w,x;const m=((w=g.location)==null?void 0:w.visitIndex)!==void 0?g.location.visitIndex+1:"";s.push([t(d),t(c.name),t(c.patientId),f.totalVisits,t(`${f.visitDateRange.first} - ${f.visitDateRange.last}`),f.scoring.totalScore,t(f.scoring.grade),f.errorCount.critical||0,f.errorCount.high||0,f.errorCount.medium||0,m,t(((x=g.location)==null?void 0:x.section)||""),t(g.ruleId||""),t(g.severity||""),t(g.message||""),t(g.expected||""),t(g.actual||"")].join(","))})});const i="\uFEFF"+s.join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=`achecker-batch-export-${new Date().toISOString().slice(0,10)}.csv`,a.click(),URL.revokeObjectURL(r)}const kh={key:0,class:"card h-full min-h-[500px] flex items-center justify-center"},Nh={key:1,class:"card overflow-hidden"},Oh={class:"px-6 py-5 bg-paper-100/50 border-b border-ink-100"},Rh={class:"flex items-start justify-between"},Mh={class:"font-display text-xl font-semibold text-ink-800"},$h={class:"text-sm text-ink-500 mt-1"},jh={class:"text-center space-y-2"},Bh={class:"font-display text-2xl font-bold"},Fh={class:"text-sm font-medium"},Hh={class:"px-6 py-4 grid grid-cols-3 gap-4 border-b border-ink-100"},Uh={class:"text-lg font-semibold text-ink-800"},Gh={class:"text-sm font-medium text-ink-700"},Kh={class:"px-6 py-4 errors-section"},Vh={class:"text-sm font-medium text-ink-700 mb-3"},Wh={key:0,class:"text-ink-400 font-normal"},qh={key:0,class:"mt-6 space-y-4"},zh={class:"text-sm font-medium text-ink-700 flex items-center gap-2"},Xh={key:2,class:"card h-full min-h-[500px] flex items-center justify-center"},Yh={class:"text-center"},Qh={class:"text-sm text-ink-500"},Jh={__name:"ReportPanel",props:{file:{type:Object,default:null}},setup(e){const t=e,n=ae(()=>{var g;return(g=t.file)==null?void 0:g.report}),s=ae(()=>{var g;return((g=n.value)==null?void 0:g.summary)||{}}),i=ae(()=>{var g;return((g=n.value)==null?void 0:g.patient)||{}}),o=ae(()=>{var g;return((g=s.value)==null?void 0:g.errorCount)||{critical:0,high:0,medium:0,low:0,total:0}}),r=ae(()=>{var g;return((g=s.value)==null?void 0:g.scoring)||{totalScore:0,grade:"FAIL"}}),a=ae(()=>o.value.critical>0);function l(g){switch(g){case"PASS":return"grade-pass";case"WARNING":return"grade-warning";case"FAIL":return"grade-fail";default:return""}}function d(g){switch(g){case"PASS":return"";case"WARNING":return"";case"FAIL":return"";default:return"-"}}function u(){const g=document.querySelector(".errors-section");g&&g.scrollIntoView({behavior:"smooth",block:"start"})}async function c(){if(n.value)try{await Lh(n.value)}catch(g){alert(": "+g.message)}}async function f(){if(n.value)try{await Ah(n.value),alert("")}catch(g){alert(": "+g.message)}}const p=ae(()=>{var m;if(!((m=n.value)!=null&&m.corrections))return[];const g=new Map;for(const w of n.value.corrections){const x=w.visitIndex;g.has(x)||g.set(x,{visitIndex:x,visitDate:w.visitDate||"",corrections:[]}),g.get(x).corrections.push(w)}return Array.from(g.values()).sort((w,x)=>w.visitIndex-x.visitIndex)});return(g,m)=>{var w,x;return e.file?n.value?(K(),W("div",Nh,[Te(Wg,{count:o.value.critical,onClick:u},null,8,["count"]),h("div",Oh,[h("div",Rh,[h("div",null,[h("h2",Mh,G(i.value.name),1),h("p",$h," ID: "+G(i.value.patientId)+"  DOB: "+G(i.value.dob),1)]),h("div",jh,[h("div",{class:_e(["inline-flex items-center gap-2 px-4 py-2 rounded-lg border",a.value?"grade-fail":l(r.value.grade)])},[h("span",Bh,G(a.value?0:r.value.totalScore),1),h("span",Fh,G(a.value?"":d(r.value.grade)),1)],2),h("button",{onClick:m[0]||(m[0]=b=>ue(Dh)(n.value)),class:"block text-xs text-ink-400 hover:text-ink-600 transition-colors"},"  CSV ")])])]),h("div",Hh,[h("div",null,[m[2]||(m[2]=h("p",{class:"text-xs text-ink-500"},"",-1)),h("p",Uh,G(s.value.totalVisits),1)]),h("div",null,[m[3]||(m[3]=h("p",{class:"text-xs text-ink-500"},"",-1)),h("p",Gh,G(((w=s.value.visitDateRange)==null?void 0:w.first)||"-")+" - "+G(((x=s.value.visitDateRange)==null?void 0:x.last)||"-"),1)]),h("div",null,[m[4]||(m[4]=h("p",{class:"text-xs text-ink-500"},"",-1)),h("p",{class:_e(["text-lg font-semibold",o.value.total>0?"text-status-fail":"text-status-pass"])},G(o.value.total),3)])]),h("div",Kh,[h("h3",Vh,[m[5]||(m[5]=zt("  ",-1)),n.value.errors.length>0?(K(),W("span",Wh," ("+G(n.value.errors.length)+") ",1)):we("",!0)]),Te(fh,{errors:n.value.errors,timeline:n.value.timeline},null,8,["errors","timeline"]),p.value.length>0?(K(),W("div",qh,[h("h4",zh,[m[6]||(m[6]=h("svg",{class:"w-4 h-4 text-status-pass",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),zt("  ("+G(p.value.length)+"  Visit) ",1)]),(K(!0),W(Ee,null,_t(p.value,b=>(K(),Un(_h,{key:`visit-${b.visitIndex}`,"visit-index":b.visitIndex,"visit-date":b.visitDate,corrections:b.corrections},null,8,["visit-index","visit-date","corrections"]))),128))])):we("",!0)]),h("div",{class:"px-6 py-4 border-t border-ink-100 flex gap-3"},[h("button",{onClick:c,class:"px-4 py-2 bg-ink-600 text-white rounded-lg hover:bg-ink-700 transition-colors text-sm font-medium flex items-center gap-2"},[...m[7]||(m[7]=[h("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),zt("  CSV ",-1)])]),h("button",{onClick:f,class:"px-4 py-2 bg-white border border-ink-200 text-ink-700 rounded-lg hover:bg-paper-50 transition-colors text-sm font-medium flex items-center gap-2"},[...m[8]||(m[8]=[h("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),zt("  ",-1)])])])])):e.file.status==="processing"?(K(),W("div",Xh,[h("div",Yh,[m[9]||(m[9]=h("svg",{class:"w-12 h-12 mx-auto mb-4 text-ink-400 animate-spin",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),h("p",Qh," "+G(e.file.name)+"...",1)])])):we("",!0):(K(),W("div",kh,[...m[1]||(m[1]=[h("div",{class:"text-center text-ink-400"},[h("svg",{class:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),h("p",{class:"text-sm"},"")],-1)])]))}}},Zh=Dl(Jh,[["__scopeId","data-v-6ae38349"]]),ey={class:"card p-5"},ty={class:"grid grid-cols-2 gap-4 mb-5"},ny={class:"bg-paper-100 rounded-lg p-3"},sy={class:"text-2xl font-display font-semibold text-ink-800"},iy={class:"bg-paper-100 rounded-lg p-3"},oy={class:"text-2xl font-display font-semibold text-ink-800"},ry={class:"mb-4"},ay={class:"flex gap-1 h-3 rounded-full overflow-hidden bg-paper-200"},ly={class:"flex items-center justify-between text-xs"},cy={class:"flex items-center gap-1.5"},uy={class:"text-ink-400 font-mono"},dy={class:"flex items-center gap-1.5"},fy={class:"text-ink-400 font-mono"},py={class:"flex items-center gap-1.5"},my={class:"text-ink-400 font-mono"},gy={class:"mt-4 pt-4 border-t border-ink-100"},hy={class:"flex items-center justify-between"},yy={class:"text-sm font-mono font-medium text-ink-700"},vy={__name:"StatsOverview",props:{stats:{type:Object,required:!0}},setup(e){return(t,n)=>(K(),W("div",ey,[n[10]||(n[10]=h("h3",{class:"font-medium text-ink-700 text-sm mb-4"},"",-1)),h("div",ty,[h("div",ny,[h("p",sy,G(e.stats.total),1),n[0]||(n[0]=h("p",{class:"text-xs text-ink-500"},"",-1))]),h("div",iy,[h("p",oy,G(e.stats.avgScore),1),n[1]||(n[1]=h("p",{class:"text-xs text-ink-500"},"",-1))])]),h("div",ry,[n[2]||(n[2]=h("p",{class:"text-xs text-ink-500 mb-2"},"",-1)),h("div",ay,[e.stats.grades.PASS>0?(K(),W("div",{key:0,style:Yt({width:`${e.stats.grades.PASS/e.stats.total*100}%`}),class:"bg-status-pass transition-all"},null,4)):we("",!0),e.stats.grades.WARNING>0?(K(),W("div",{key:1,style:Yt({width:`${e.stats.grades.WARNING/e.stats.total*100}%`}),class:"bg-status-warning transition-all"},null,4)):we("",!0),e.stats.grades.FAIL>0?(K(),W("div",{key:2,style:Yt({width:`${e.stats.grades.FAIL/e.stats.total*100}%`}),class:"bg-status-fail transition-all"},null,4)):we("",!0)])]),h("div",ly,[h("div",cy,[n[3]||(n[3]=h("span",{class:"w-2.5 h-2.5 rounded-full bg-status-pass"},null,-1)),n[4]||(n[4]=h("span",{class:"text-ink-600"},"",-1)),h("span",uy,G(e.stats.grades.PASS),1)]),h("div",dy,[n[5]||(n[5]=h("span",{class:"w-2.5 h-2.5 rounded-full bg-status-warning"},null,-1)),n[6]||(n[6]=h("span",{class:"text-ink-600"},"",-1)),h("span",fy,G(e.stats.grades.WARNING),1)]),h("div",py,[n[7]||(n[7]=h("span",{class:"w-2.5 h-2.5 rounded-full bg-status-fail"},null,-1)),n[8]||(n[8]=h("span",{class:"text-ink-600"},"",-1)),h("span",my,G(e.stats.grades.FAIL),1)])]),h("div",gy,[h("div",hy,[n[9]||(n[9]=h("span",{class:"text-xs text-ink-500"},"",-1)),h("span",yy,G(e.stats.totalErrors),1)])])]))}},by={key:0,class:"bg-paper-100 border border-status-fail/30 rounded-lg p-6 text-center"},wy={class:"text-ink-500 text-sm mb-4"},xy={__name:"ErrorBoundary",emits:["retry"],setup(e,{emit:t}){const n=t,s=Se(null);Pa(o=>(s.value=o,!1));function i(){s.value=null,n("retry")}return(o,r)=>s.value?(K(),W("div",by,[r[0]||(r[0]=h("div",{class:"text-status-fail text-lg font-medium mb-2"},"",-1)),h("div",wy,G(s.value.message),1),h("button",{onClick:i,class:"btn-primary"},"")])):ou(o.$slots,"default",{key:1})}};function Py(e,t){const n=Se(-1),s=i=>{i.key==="ArrowDown"?(i.preventDefault(),n.value=Math.min(n.value+1,e.value.length-1),t(e.value[n.value])):i.key==="ArrowUp"?(i.preventDefault(),n.value=Math.max(n.value-1,0),t(e.value[n.value])):i.key==="Escape"&&(n.value=-1,t(null))};return Yi(()=>{document.addEventListener("keydown",s)}),Qi(()=>{document.removeEventListener("keydown",s)}),{currentIndex:n}}const Sy={class:"max-w-7xl w-full mx-auto px-6 py-8"},Ty={key:0,class:"animate-fade-in"},Cy={key:0,class:"grid grid-cols-1 lg:grid-cols-12 gap-6"},Iy={class:"lg:col-span-4 space-y-6"},Ey={class:"card p-4 space-y-3 animate-slide-up"},_y={class:"flex items-center gap-3"},Dy={class:"flex items-center gap-3"},Ay={class:"flex gap-3 animate-slide-up stagger-1"},Ly=["disabled"],ky={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},Ny={key:1,class:"w-full bg-ink-200 rounded-full h-2"},Oy={class:"lg:col-span-8"},Ry={__name:"CheckerView",setup(e){const t=xg(),{files:n,selectedFile:s,isProcessing:i,hasFiles:o,pendingFiles:r,stats:a,insuranceType:l,treatmentTime:d}=Cd(t),{addFiles:u,selectFile:c,removeFile:f,clearAll:p,processAllFiles:g}=t;Py(n,c);const m=ae(()=>n.value.length===0?0:(n.value.length-r.value.length)/n.value.length*100);return(w,x)=>(K(),W("div",Sy,[ue(o)?we("",!0):(K(),W("div",Ty,[Te(Or,{onFilesAdded:ue(u)},null,8,["onFilesAdded"])])),Te(xy,null,{default:qi(()=>{var b;return[ue(o)?(K(),W("div",Cy,[h("div",Iy,[ue(a)?(K(),Un(vy,{key:0,stats:ue(a),class:"animate-slide-up"},null,8,["stats"])):we("",!0),h("div",Ey,[h("div",_y,[x[5]||(x[5]=h("label",{class:"text-xs text-ink-500 w-16"},"",-1)),It(h("select",{"onUpdate:modelValue":x[0]||(x[0]=S=>xe(l)?l.value=S:null),class:"flex-1 text-sm border border-ink-200 rounded-lg px-3 py-1.5 bg-white text-ink-800 focus:outline-none focus:ring-2 focus:ring-ink-400"},[...x[4]||(x[4]=[h("option",{value:"OPTUM"},"Optum",-1),h("option",{value:"HF"},"HealthFirst",-1),h("option",{value:"WC"},"Workers' Comp",-1),h("option",{value:"VC"},"Veterans Care",-1),h("option",{value:"ELDERPLAN"},"ElderPlan",-1),h("option",{value:"NONE"},"None / Self-pay",-1)])],512),[[ys,ue(l)]])]),h("div",Dy,[x[7]||(x[7]=h("label",{class:"text-xs text-ink-500 w-16"},"",-1)),It(h("select",{"onUpdate:modelValue":x[1]||(x[1]=S=>xe(d)?d.value=S:null),class:"flex-1 text-sm border border-ink-200 rounded-lg px-3 py-1.5 bg-white text-ink-800 focus:outline-none focus:ring-2 focus:ring-ink-400"},[...x[6]||(x[6]=[h("option",{value:15},"15 ",-1),h("option",{value:30},"30 ",-1),h("option",{value:45},"45 ",-1),h("option",{value:60},"60 ",-1)])],512),[[ys,ue(d),void 0,{number:!0}]])])]),h("div",Ay,[h("button",{onClick:x[2]||(x[2]=(...S)=>ue(g)&&ue(g)(...S)),disabled:ue(i)||ue(r).length===0,class:"btn-primary flex-1 flex items-center justify-center gap-2"},[ue(i)?(K(),W("svg",ky,[...x[8]||(x[8]=[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):we("",!0),h("span",null,G(ue(i)?"...":""),1)],8,Ly),h("button",{onClick:x[3]||(x[3]=(...S)=>ue(p)&&ue(p)(...S)),class:"btn-secondary"},"  ")]),ue(i)?(K(),W("div",Ny,[h("div",{class:"bg-ink-600 h-2 rounded-full transition-all duration-300",style:Yt({width:m.value+"%"})},null,4)])):we("",!0),Te(Gg,{files:ue(n),"selected-id":(b=ue(s))==null?void 0:b.id,onSelect:ue(c),onRemove:ue(f),onAddMore:()=>{},class:"animate-slide-up stagger-2"},null,8,["files","selected-id","onSelect","onRemove"]),Te(Or,{compact:"",onFilesAdded:ue(u),class:"animate-slide-up stagger-3"},null,8,["onFilesAdded"])]),h("div",Oy,[Te(Zh,{file:ue(s),class:"animate-fade-in"},null,8,["file"])])])):we("",!0)]}),_:1})]))}},En="achecker_history",Al=7;function Ll(){const e=a=>{var d,u,c,f,p,g;const l=a.timestamp||Date.now();return{...a,fileName:a.fileName||a.filename||"Unknown",timestamp:l,date:a.date||new Date(l).toISOString(),score:a.score??((c=(u=(d=a.report)==null?void 0:d.summary)==null?void 0:u.scoring)==null?void 0:c.totalScore)??0,status:a.status||(((g=(p=(f=a.report)==null?void 0:f.summary)==null?void 0:p.scoring)==null?void 0:g.grade)??"pending").toLowerCase()}},t=()=>{const l=Date.now()-Al*24*60*60*1e3,d=s(),u=d.filter(c=>c.timestamp>l);u.length!==d.length&&localStorage.setItem(En,JSON.stringify(u))},n=(a,l)=>{var d,u,c,f;try{t();const p=s(),g=Date.now(),m={id:`${g}_${Math.random().toString(36).substr(2,9)}`,fileName:a,timestamp:g,date:new Date(g).toISOString(),score:((u=(d=l==null?void 0:l.summary)==null?void 0:d.scoring)==null?void 0:u.totalScore)??0,status:(((f=(c=l==null?void 0:l.summary)==null?void 0:c.scoring)==null?void 0:f.grade)??"pending").toLowerCase(),patient:(l==null?void 0:l.patient)??null,summary:(l==null?void 0:l.summary)??null,report:l},w=[m,...p];return localStorage.setItem(En,JSON.stringify(w)),m.id}catch(p){throw new Error(`Failed to save history: ${p.message}`)}},s=()=>{try{const a=localStorage.getItem(En);return a?JSON.parse(a).map(e).sort((d,u)=>u.timestamp-d.timestamp):[]}catch(a){return console.error("Failed to get history:",a),[]}};return{saveResult:n,getHistory:s,getById:a=>{try{return s().find(d=>d.id===a)||null}catch(l){throw new Error(`Failed to get history item: ${l.message}`)}},deleteById:a=>{try{const d=s().filter(u=>u.id!==a);return localStorage.setItem(En,JSON.stringify(d)),!0}catch(l){throw new Error(`Failed to delete history item: ${l.message}`)}},clearAll:()=>{try{return localStorage.removeItem(En),!0}catch(a){throw new Error(`Failed to clear history: ${a.message}`)}},cleanExpired:t}}const My=Object.freeze(Object.defineProperty({__proto__:null,EXPIRY_DAYS:Al,useHistory:Ll},Symbol.toStringTag,{value:"Module"})),$y={class:"max-w-7xl w-full mx-auto px-6 py-8"},jy={class:"mb-6 flex items-center justify-between"},By={key:0,class:"card p-12 text-center"},Fy={key:1,class:"card overflow-hidden"},Hy={class:"overflow-x-auto"},Uy={class:"w-full"},Gy={class:"bg-white divide-y divide-ink-200"},Ky=["onClick"],Vy={class:"px-6 py-4 whitespace-nowrap"},Wy={class:"flex items-center"},qy={class:"text-sm font-medium text-ink-800"},zy={class:"px-6 py-4 whitespace-nowrap"},Xy={class:"text-sm text-ink-600"},Yy={class:"px-6 py-4 whitespace-nowrap"},Qy={class:"px-6 py-4 whitespace-nowrap"},Jy={class:"px-6 py-4 whitespace-nowrap text-sm text-ink-500"},Zy=["onClick"],e0={class:"flex items-center justify-between mb-4"},t0={class:"text-xl font-bold text-ink-800"},n0={class:"space-y-3 text-sm"},s0={class:"flex justify-between"},i0={class:"text-ink-800"},o0={class:"flex justify-between"},r0={class:"flex justify-between"},a0={__name:"HistoryView",setup(e){const{getHistory:t,clearAll:n}=Ll(),s=Se([]),i=Se(null),o=()=>{s.value=t()},r=()=>{confirm("")&&(n(),s.value=[],i.value=null)},a=c=>{const f=new Date(c),g=new Date-f,m=Math.floor(g/6e4),w=Math.floor(g/36e5),x=Math.floor(g/864e5);return m<1?"":m<60?`${m} `:w<24?`${w} `:x<7?`${x} `:f.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},l=c=>{const f={pass:{text:"",class:"bg-green-100 text-green-700"},fail:{text:"",class:"bg-red-100 text-red-700"},warning:{text:"",class:"bg-yellow-100 text-yellow-700"},pending:{text:"",class:"bg-gray-100 text-gray-700"}};return f[c]||f.pending},d=c=>{i.value=c},u=ae(()=>s.value.length>0);return Yi(()=>{o()}),(c,f)=>(K(),W("div",$y,[h("div",jy,[f[3]||(f[3]=h("div",null,[h("h1",{class:"text-2xl font-bold text-ink-800"},""),h("p",{class:"text-sm text-ink-500 mt-1"}," 7 ")],-1)),u.value?(K(),W("button",{key:0,onClick:r,class:"btn-secondary"},"  ")):we("",!0)]),u.value?(K(),W("div",Fy,[h("div",Hy,[h("table",Uy,[f[6]||(f[6]=h("thead",{class:"bg-ink-50 border-b border-ink-200"},[h("tr",null,[h("th",{class:"px-6 py-3 text-left text-xs font-medium text-ink-600 uppercase tracking-wider"},"  "),h("th",{class:"px-6 py-3 text-left text-xs font-medium text-ink-600 uppercase tracking-wider"},"  "),h("th",{class:"px-6 py-3 text-left text-xs font-medium text-ink-600 uppercase tracking-wider"},"  "),h("th",{class:"px-6 py-3 text-left text-xs font-medium text-ink-600 uppercase tracking-wider"},"  "),h("th",{class:"px-6 py-3 text-left text-xs font-medium text-ink-600 uppercase tracking-wider"},"  ")])],-1)),h("tbody",Gy,[(K(!0),W(Ee,null,_t(s.value,p=>(K(),W("tr",{key:p.id,class:"hover:bg-ink-50 cursor-pointer transition-colors",onClick:g=>d(p)},[h("td",Vy,[h("div",Wy,[f[5]||(f[5]=h("svg",{class:"w-5 h-5 text-ink-400 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),h("div",qy,G(p.fileName),1)])]),h("td",zy,[h("div",Xy,G(a(p.date)),1)]),h("td",Yy,[h("div",{class:_e(["text-sm font-semibold",{"text-green-600":p.score>=80,"text-yellow-600":p.score>=60&&p.score<80,"text-red-600":p.score<60}])},G(p.score||0)+"% ",3)]),h("td",Qy,[h("span",{class:_e(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",l(p.status).class])},G(l(p.status).text),3)]),h("td",Jy,[h("button",{onClick:Vn(g=>d(p),["stop"]),class:"text-ink-600 hover:text-ink-900 font-medium"},"  ",8,Zy)])],8,Ky))),128))])])])])):(K(),W("div",By,[...f[4]||(f[4]=[h("svg",{class:"w-16 h-16 mx-auto text-ink-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),h("h3",{class:"text-lg font-medium text-ink-600 mb-2"},"",-1),h("p",{class:"text-sm text-ink-500"},"",-1)])])),i.value?(K(),W("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:f[2]||(f[2]=p=>i.value=null)},[h("div",{class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 p-6",onClick:f[1]||(f[1]=Vn(()=>{},["stop"]))},[h("div",e0,[h("h2",t0,G(i.value.fileName),1),h("button",{onClick:f[0]||(f[0]=p=>i.value=null),class:"text-ink-400 hover:text-ink-600"},[...f[7]||(f[7]=[h("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),h("div",n0,[h("div",s0,[f[8]||(f[8]=h("span",{class:"text-ink-500"},"",-1)),h("span",i0,G(a(i.value.date)),1)]),h("div",o0,[f[9]||(f[9]=h("span",{class:"text-ink-500"},"",-1)),h("span",{class:_e(["font-semibold",{"text-green-600":i.value.score>=80,"text-yellow-600":i.value.score>=60&&i.value.score<80,"text-red-600":i.value.score<60}])},G(i.value.score||0)+"%",3)]),h("div",r0,[f[10]||(f[10]=h("span",{class:"text-ink-500"},"",-1)),h("span",{class:_e(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",l(i.value.status).class])},G(l(i.value.status).text),3)])]),f[11]||(f[11]=h("div",{class:"mt-6 pt-4 border-t border-ink-200 text-center text-sm text-ink-500"},"  ",-1))])])):we("",!0)]))}};function l0(e){return e.replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&nbsp;/gi," ").replace(/\s+/g," ").trim().toLowerCase()}function c0(e){new Set(Object.keys(e));const t=new Map;for(const[n,s]of Object.entries(e)){const i=new Map;for(const o of s){const r=l0(o);i.has(r)||i.set(r,o)}t.set(n,i)}}const u0={"subjective.chronicityLevel":["Acute","Sub Acute","Chronic"],"subjective.symptomDuration.value":["1","2","3","4","5","6","7","8","9","more than 10","many","10","15","30"],"subjective.symptomDuration.unit":["week(s)","month(s)","year(s)","day(s)"],"subjective.exacerbatingFactors":["exacerbated by","aggravated by"],"subjective.adlDifficulty.level":["severe","moderate to severe","moderate","mild to moderate","mild"],"subjective.painScale.worst":["10","10-9","9","9-8","8","8-7","7","7-6","6","6-5","5","5-4","4","4-3","3","3-2","2","2-1","1","1-0","0"],"subjective.painScale.best":["10","10-9","9","9-8","8","8-7","7","7-6","6","6-5","5","5-4","4","4-3","3","3-2","2","2-1","1","1-0","0"],"subjective.painScale.current":["10","10-9","9","9-8","8","8-7","7","7-6","6","6-5","5","5-4","4","4-3","3","3-2","2","2-1","1","1-0","0","Qi Stagnation","Blood Stasis","Liver Qi Stagnation","Blood Deficiency","Qi & Blood Deficiency","Wind-Cold Invasion","Cold-Damp + Wind-Cold","LV/GB Damp-Heat","Phlegm-Damp","Phlegm-Heat","Damp-Heat","Greeting patient","Review of the chart","Routine examination of the patient current condition","Preparation"],"subjective.painFrequency":["Intermittent (symptoms occur less than 25% of the time)","Occasional (symptoms occur between 26% and 50% of the time)","Frequent (symptoms occur between 51% and 75% of the time)","Constant (symptoms occur between 76% and 100% of the time)"],"subjective.painTypes":["Dull","Burning","Freezing","Shooting","Tingling","Stabbing","Aching","Squeezing","Cramping","pricking","weighty","cold","pin & needles"],"subjective.painRadiation":["without radiation","with radiation to R arm","with radiation to L arm","with radiation to BLUE","with radiation to BLLE","With radiation to L leg","With radiation to R leg","with dizziness","with headache","with migraine","with radiation to toes","with local swollen"],"subjective.associatedSymptoms":["soreness","stiffness","heaviness","weakness","numbness"],"subjective.causativeFactors":["age related/degenerative changes","expose to the cold air for more than 20 mins","live in too cold environment","weather change","poor sleep","over used due to heavy household chores","over used due to nature of work","excessive used of phone/tablet","overworking in computer","prolong walking","prolong sitting","longtime driving","sitting over 30 mins with bad posture","climb too much stairs","intense excise","lifting too much weight","hurt myself during exercise","repetitive injury from past work","repetitive strain from activities in the past","strain when pick up heavy object from floor","sprain when pick up heavy object from floor","recent sprain","sprain","fell (no sign of fracture)","Recent fall (no sign of fracture)","Inactive lifestyle","Bad Posture","weather changed/cold weather"],"subjective.adlDifficulty.activities":["holding the pot for cooking","performing household chores","working long time in front of computer","long hours of driving","pushing/pulling cart, box, door","doing laundry","handing/carrying moderate objects","put on/take off the clothes","reach top of cabinet to get object(s)","reach to back to unzip","raising up the hand to comb hair","touch opposite side shoulder to put coat on","abduct arm get the objects from other people","adduction arm to put pant on","decrease outside activity","stay in bed","decrease housework","decrease standing time","decrease walking time","decrease sitting time","decrease time working with computer","decrease climb stairs","decrease exercise","normal activity","maintain regular schedule","irregular schedule","any strenuous activities","repetitive motions","poor sleep","mental stress","extension","flexion","abduction","adduction","internal rotation","external rotation","sleep to the side","Prolonge walking","Standing after sitting for long time","Stair climbing","Sitting on a low chair","Sitting cross leg","Cooking","Sitting or standing for long periods of time","Going up and down stairs","Lifting objects","Bending over to wear/tie a shoe","Rising from a chair","Prolong walking","Standing for long periods of time","Walking for long periods of time","Getting out of bed","standing for cooking","bending knee to sit position","bending down put in/out of the shoes","sitting for long periods of time","prolonged walking","prolonged standing","prolonged sitting","lifted heavy objects","gargling","looking down watching steps","turning the head when crossing the street","tilting head to talking the phone","sit and watching TV over 20 mins","reading newspaper/book","carry/handing grocery bags","washing hair","showering","running/jumping/participating in physical exercise","driving","sit to stand","lifting","stress emotion","exposure to cold air","rotation to right","rotation to left","lateral flexion to right","lateral flexion to left","get out/in the chair or bed","standing without any help","standing long hours during work","standing over 20 mins","sitting over 30 mins","walking over 15 mins","go up/down stairs","bend forward get object from floor","sitting long time watching TV","driving long hours","standing long time during work"],"subjective.relievingFactors":["Moving around","Changing positions","Stretching","Resting","Lying down","Applying heating pad","Applying ice pad","Leaning forward onto something","Using of joint support","Massage","Medications"],"objective.muscleTesting.tightness.gradingScale":["moderate","moderate to severe","severe","mild to moderate","mild"],"objective.muscleTesting.tenderness.gradingScale":["(+4) = Patient complains of severe tenderness, withdraws immediately in response to test pressure, and is unable to bear sustained pressure","(+3) = Patient complains of considerable tenderness and withdraws momentarily in response to the test pressure","(+2) = Patient states that the area is moderately tender","(+1)=Patient states that the area is mildly tender-annoying","(+4) = There is severe tenderness and withdrawal response from the patient when there is noxious stimulus","(+3) = There is severe tenderness with withdrawal","(+2) = There is mild tenderness with grimace and flinch to moderate palpation","(+1)= There is mild tenderness to palpation","(0) = No tenderness"],"objective.rom.degrees":["85 Degrees(normal)","80 Degrees(normal)","75 Degrees(normal)","70 Degrees(normal)","65 Degrees(normal)","60 Degrees(normal)","55 Degrees(normal)","50 Degrees(normal)","45 Degree (mild)","40 Degree (mild)","35 Degree (moderate)","30 Degree (moderate)","25 Degree (moderate)","20 Degree (moderate)","15 Degree (severe)","10 Degree (severe)","5 Degree (severe)","can do it at all","can not do it at all","5 Degrees(severe)","10 Degrees(severe)","15 Degrees(severe)","20 Degrees(moderate)","25 Degrees(moderate)","30 Degrees(mild)","35 Degrees(mild)","40 Degrees(normal)","45 Degrees(normal)","130(normal)","125 Degrees(normal)","120(normal)","115 Degrees(mild)","110 Degrees(mild)","105 Degrees(mild)","100 Degrees(moderate)","95 Degrees(moderate)","90 Degrees(moderate)","85 Degrees(moderate)","80 Degrees(moderate)","75 Degrees(moderate)","70 Degrees(moderate)","65 Degrees(severe)","60 Degrees(severe)","55 Degrees(severe)","50 Degrees(severe)","45 Degrees(severe)","40 Degrees(severe)","35 Degrees(severe)","30 Degrees(severe)","25 Degrees(severe)","90 Degrees(normal)","75 Degrees(mild)","70 Degrees(mild)","65 Degrees(mild)","60 Degrees(moderate)","55 Degrees(moderate)","50 Degrees(moderate)","45 Degrees(moderate)","40 Degrees(moderate)","30 Degrees(normal)","25 Degrees(mild)","15 Degrees(moderate)","30 Degrees(moderate)","40 Degrees(mild)","45 -55 Degrees(normal)","55 -65 Degrees(normal)","65-70 Degrees(normal)","40-50 Degrees(normal)","50-60 Degrees(normal)","20 Degrees(severe)","35 Degrees(moderate)","50 Degrees(mild)","55 Degrees(mild)","60 Degrees(mild)","70 -80 Degrees(normal)","40-45 Degrees(normal)","45 Degrees(mild)"],"objective.tonguePulse.pulse":["Lattisimus dorsi","Internal oblique","External oblique","Erector spinae","Hamstrings","Gluteus Maximus","Illiac Crest","s2-s4","L2-L5","greater tubercle","lesser tubercle","piriformis","iliopsoas","TFL","IT band","quadriceps","rectus femoris","local muscles tightness","local muscles tenderness","local muscles spasms","local muscles trigger points","joint ROM limitation","muscles strength","joints swelling","last visit","joint ROM","hesitant","thready","weak","deep","tense","slow","wiry","string-taut","rolling","soft","rolling rapid (forceful)","rapid","overflowing","full","slowing down","forceless","thin","floating-empty","forceful"],"assessment.tcmDiagnosis.localPattern":["Qi Stagnation","Blood Stasis","Liver Qi Stagnation","Blood Deficiency","Qi & Blood Deficiency","Wind-Cold Invasion","Cold-Damp + Wind-Cold","LV/GB Damp-Heat","Phlegm-Damp","Phlegm-Heat","Damp-Heat"],"assessment.tcmDiagnosis.systemicPattern":["Kidney Yang Deficiency","Kidney Yin Deficiency","Kidney Qi Deficiency","LU & KI Deficiency","Kidney Essence Deficiency","Yin Deficiency Fire","Qi Deficiency","Blood Deficiency","Qi & Blood Deficiency","Phlegm-Damp","Phlegm-Heat","Liver Yang Rising","LV/GB Fire","LV/GB Damp-Heat","Spleen Deficiency","Damp-Heat","ST & Intestine Damp-Heat","Stomach Heat","Food Retention","Wei Qi Deficiency","Ying & Wei Disharmony","LU Wind-Heat","Excessive Heat Flaring"],"assessment.treatmentPrinciples.focusOn":["continue to be emphasize","consist of promoting","promote","pay attention","focus","emphasize"],"objective.tonguePulse.tongue":["moving qi","regulates qi","activating Blood circulation to dissipate blood stagnant","dredging channel and activating collaterals","activate blood and relax tendons","eliminates accumulation","resolve stagnation, clears heat","promote circulation, relieves pain","expelling pathogens","dispelling cold, drain the dampness","strengthening muscles and bone","clear heat, dispelling the flame","clear damp-heat","drain the dampness, clear damp","enhance good health","promote good body mind health","promote healthy joint and lessen dysfunction in all aspects","to reduce stagnation and improve circulation","promote good essence","promote zheng qi","promote qi","to reduce stagnation and improve circulation.","promote good essence.","reduced","slightly reduced","increased","slight increased","remained the same","well","with good positioning technique","with good draping technique","with positive verbal response","with good response","with positive response","with good outcome in reducing spasm","with excellent outcome due reducing pain","with good outcome in improving ROM","good outcome in improving ease with functional mobility","with increase ease with functional mobility","with increase ease with function","white coat","slippery coat","tooth marks","pale, thin white coat","thin white coat","purplish dark","purple spots","dusk","yellow","white","delicate","pale","swollen","cracked","rootless","red, little coat","moisture, furless","purple","purple dark","purple edges","purple spots on side"],"plan.evaluationType":["Initial Evaluation","Re-Evaluation"],"plan.shortTermGoal.treatmentFrequency":["2","4","6","8","10","12"],"objective.rom.strength":["4+/5","4/5","4-/5","3+/5","3/5","3-/5","2+/5","2/5","2-/5","0"],"objective.muscleTesting.muscles":["iliocostalis","spinalis","longissimus","Iliopsoas Muscle","Quadratus Lumborum","Gluteal Muscles","The Multifidus muscles","Gluteus Maximus","Gluteus medius / minimus","Piriformis muscle","Quadratus femoris","Adductor longus/ brev/ magnus","Iliotibial Band ITB","Rectus Femoris","Gastronemius muscle","Hamstrings muscle group","Tibialis Post/ Anterior","Plantar Fasciitis","Intrinsic Foot Muscle group","Achilles Tendon","Scalene anterior / med / posterior","Levator Scapulae","Trapezius","sternocleidomastoid muscles"],"subjective.painScale":["3","3-4","4","4-5","5","5-6","6"],"subjective.symptomChange":["improvement of symptom(s)","exacerbate of symptom(s)","similar symptom(s) as last visit","improvement after treatment, but pain still came back next day"],"subjective.reasonConnector":["because of","may related of","due to","and"],"subjective.reason":["can move joint more freely and with less pain","physical activity no longer causes distress","reduced level of pain","reduced joint stiffness and swelling","less difficulty performing daily activities","energy level improved","sleep quality improved","more energy level throughout the day","continuous treatment","maintain regular treatments","still need more treatments to reach better effect","weak constitution","skipped treatments","stopped treatment for a while","discontinuous treatment","did not have good rest","intense work","excessive time using cell phone","excessive time using computer","bad posture","carrying/lifting heavy object(s)","lack of exercise","exposure to cold air","uncertain reason"],"assessment.generalCondition":["good","fair","poor"],"plan.needleProtocol.totalTime":["15","30","45","60"],"plan.needleProtocol.electricalStimulation":["with","without"],"plan.needleProtocol.points":["SP4","SP5","SP8","SP9","SP10","LR4","LR3","LR2","KI5","KI6","KI9","KI8","A SHI POINTS","GB35","GB36","GB37","GB38","GB39","BL59","BL60","BL61","BL62","EX-LE9",".","SJ5","SJ6","SJ7","SJ8","SJ9","SJ12","LI6","LI7","LI8","LI9","LI10","LI11","LI12","LI13","LU3","LU4","LU7","LU8","LU9","GB33","GB34","UB40","ST34","ST35","ST36","ST40","SP3","KD3","KD10","XI YAN","LV4","REN4","HE DING","A SHI POINT","LU5","LU6","PC3","PC4","HT2","HT3","BL23","BL20","BL40","BL55","BL38","BL56","LU10","LU11","PC8","HT8","HT7","BA FENG","PC 7","SJ 2","SJ 3","SI 4","SI 5","LI1","LI2","LI3","LI4","GB30","GB29","GB31","UB31","UB32","UB33","UB34","UB25","UB27","BL57","BL22","BL24","BL25","BL26","BL29","BL52","BL53","BL54","DU4","SI 3","YAO JIA JI","YAO TONG XUE","REN6","GB26","SP6","LV3","SI3","GB14","GB20","GB19","GB21","BL9","BL10","BL11","BL12","BL13","BL14","SI13","SI14","DU14","JIN JIA JI","LAO ZHEN XUE","BAI LAO","DU20","BL17","LI15","LI16","SI9","SI10","SI11","SI12","SI15","SJ10","JIAN QIAN","PC2","ST3","ST38","HT4","HT5","HT6","PC5","PC6","PC7","LI5","SI1","SI2","SI4","SI5","SJ1","SJ2","SJ3","SJ4"]};let Rr=!1;function d0(){Rr||(c0(u0),Rr=!0)}function f0(e){return/PATIENT:|DOB:/i.test(e)?e:`UNKNOWN, PATIENT (DOB: 01/01/2000 ID: 0000000000) Date of Service: 01/01/2025 Printed on: 01/01/2025
`+e}function p0(e){var c,f,p,g,m,w,x,b,S,I,O,T,M,L,_;const t=e.subjective.painScale,n=typeof t=="number"?t:(t==null?void 0:t.current)??(t!=null&&t.range?Math.min(t.range.min,t.range.max):t==null?void 0:t.value)??(t==null?void 0:t.worst)??8,i={severe:4,"moderate to severe":3.5,moderate:3,"mild to moderate":2,mild:1}[(((c=e.objective.tightnessMuscles)==null?void 0:c.gradingScale)||"").toLowerCase()]??3,r=(((f=e.objective.tendernessMuscles)==null?void 0:f.scaleDescription)||"").match(/\+(\d)/),a=r?parseInt(r[1]):3,l=((p=e.objective.spasmMuscles)==null?void 0:p.frequencyScale)??3,d=(e.subjective.painFrequency||"").toLowerCase(),u=d.includes("constant")?3:d.includes("frequent")?2:d.includes("occasional")?1:d.includes("intermittent")?0:2;return{pain:n,tightness:i,tenderness:a,spasm:l,frequency:u,painTypes:((g=e.subjective.painTypes)==null?void 0:g.length)>0?e.subjective.painTypes:void 0,associatedSymptom:(()=>{const j=(e.subjective.chiefComplaint||"").match(/associated with muscles?\s+(\w+)/i);return j?j[1].toLowerCase():void 0})(),symptomScale:e.subjective.muscleWeaknessScale||void 0,generalCondition:((m=e.assessment)==null?void 0:m.generalCondition)||void 0,inspection:((w=e.objective)==null?void 0:w.inspection)||void 0,tightnessGrading:((x=e.objective.tightnessMuscles)==null?void 0:x.gradingScale)||"",tendernessGrade:r?`+${r[1]}`:void 0,tonguePulse:(S=(b=e.objective)==null?void 0:b.tonguePulse)!=null&&S.tongue&&((O=(I=e.objective)==null?void 0:I.tonguePulse)!=null&&O.pulse)?{tongue:e.objective.tonguePulse.tongue,pulse:e.objective.tonguePulse.pulse}:void 0,acupoints:((M=(T=e.plan)==null?void 0:T.acupoints)==null?void 0:M.length)>0?e.plan.acupoints:void 0,electricalStimulation:(L=e.plan)==null?void 0:L.electricalStimulation,treatmentTime:(_=e.plan)==null?void 0:_.treatmentTime}}function m0(e,t,n,s){let i="";const o=e.diagnosisCodes||[];o.length>0&&o.forEach((g,m)=>{i+=`
Diagnosis Code: (${m+1}) ${g.description} (${g.icd10})
`});const a=!(t==="OPTUM"||t==="HF")&&!n,l=a?"97813":"97810",d=a?"97814":"97811",u=a?"ACUP W/ ESTIM 1ST 15 MIN":"ACUP 1/> WO ESTIM 1ST 15 MIN",c=a?"ACUP W/ ESTIM EA ADDL 15 MIN":"ACUP WO ESTIM EA ADDL 15 MIN",f=Math.max(1,Math.floor((s||15)/15));let p=1;i+=`Procedure Code: (${p}) ${u} (${l})
`;for(let g=1;g<f;g++)p++,i+=`Procedure Code: (${p}) ${c} (${d})
`;return i}function Mr(e,t={}){var O,T,M,L,_;d0();const{insuranceType:n="OPTUM",treatmentTime:s=60,generateCount:i}=t,o=f0(e),r=fl(o);if(!r.success||!r.document)return{error:": "+(((T=(O=r.errors)==null?void 0:O[0])==null?void 0:T.message)||""),visits:[]};const a=r.document,l=a.visits.findIndex(j=>j.subjective.visitType==="INITIAL EVALUATION");if(l<0)return{error:" (INITIAL EVALUATION)",visits:[]};const d=a.visits[l],u=a.visits.filter(j=>j.subjective.visitType!=="INITIAL EVALUATION").length,c=11-u;if(c<=0)return{error:" "+u+"  TX 11",visits:[]};const f=Math.min(i||c,c),p=u+f,g=vl(a,l);g.noteType="TX",g.insuranceType=n,g.previousIE=yl(d);const m=a.visits.filter(j=>j.subjective.visitType!=="INITIAL EVALUATION"),w=m.length>0?m[0]:null,x=w?p0(w):void 0,b=g.hasPacemaker||!1;return{visits:jp(g,{txCount:p,startVisitIndex:u+1,initialState:x}).map(j=>{let B=Oi(g,j);return B+=m0(d,n,b,s),{visitIndex:j.visitIndex,text:B,state:j}}),context:g,ieVisit:d,existingTxCount:u,parseSummary:{bodyPart:g.primaryBodyPart,laterality:g.laterality,localPattern:g.localPattern,chronicityLevel:g.chronicityLevel,iePain:(_=(L=(M=g.previousIE)==null?void 0:M.subjective)==null?void 0:L.painScale)==null?void 0:_.current,lastTxPain:x==null?void 0:x.pain,existingTxCount:u,toGenerate:f}}}const g0={class:"max-w-7xl w-full mx-auto px-6 py-8"},h0={class:"grid grid-cols-1 lg:grid-cols-12 gap-6"},y0={class:"lg:col-span-5 space-y-4"},v0={class:"bg-white rounded-xl border border-ink-200 p-4"},b0={class:"bg-white rounded-xl border border-ink-200 p-4 space-y-3"},w0={class:"grid grid-cols-2 gap-3"},x0=["value"],P0=["value"],S0={key:0,class:"bg-paper-100 rounded-lg p-3 text-xs space-y-1"},T0={class:"flex justify-between"},C0={class:"text-ink-800 font-medium"},I0={class:"flex justify-between"},E0={class:"text-ink-800 font-medium"},_0={class:"flex justify-between"},D0={class:"text-ink-800 font-medium"},A0={key:0,class:"flex justify-between"},L0={class:"text-ink-800 font-medium"},k0={class:"flex justify-between"},N0={class:"text-ink-800 font-medium"},O0={class:"flex items-center justify-between pt-1 border-t border-ink-200"},R0=["max"],M0={key:1,class:"bg-status-error/10 text-status-error rounded-lg p-3 text-xs"},$0=["disabled"],j0={class:"lg:col-span-7 space-y-3"},B0={key:0,class:"bg-white rounded-xl border border-ink-200 p-8 text-center text-ink-400 text-sm"},F0={key:1},H0={class:"flex items-center justify-between mb-3"},U0={class:"text-sm font-semibold text-ink-700"},G0=["onClick"],K0={class:"flex items-center gap-3"},V0={class:"text-xs font-mono bg-ink-100 text-ink-600 px-2 py-0.5 rounded"},W0={class:"text-xs text-ink-500"},q0={class:"flex items-center gap-2"},z0=["onClick"],X0={class:"p-4"},Y0={class:"text-xs font-mono text-ink-700 whitespace-pre-wrap leading-relaxed"},Q0={__name:"ContinueView",setup(e){const t=Se(""),n=Se("OPTUM"),s=Se(60),i=Se(0),o=Se(!1),r=vn({visits:[],parseSummary:null,error:null}),a=Se(-1),l=["OPTUM","HF","WC","VC","ELDERPLAN","NONE"],d=[15,30,45,60];function u(){if(r.error=null,r.visits=[],r.parseSummary=null,!t.value.trim())return;const g=Mr(t.value,{insuranceType:n.value,treatmentTime:s.value,generateCount:0});if(g.error){r.error=g.error;return}r.parseSummary=g.parseSummary,i.value=g.parseSummary.toGenerate}function c(){o.value=!0,r.error=null,r.visits=[];try{const g=Mr(t.value,{insuranceType:n.value,treatmentTime:s.value,generateCount:i.value});if(g.error){r.error=g.error;return}r.visits=g.visits,r.parseSummary=g.parseSummary}catch(g){r.error=": "+(g.message||g)}finally{o.value=!1}}function f(g){var w;const m=(w=r.visits[g])==null?void 0:w.text;m&&navigator.clipboard.writeText(m).then(()=>{a.value=g,setTimeout(()=>{a.value=-1},1500)})}function p(){const g=r.visits.map(m=>`=== TX${m.visitIndex} ===
${m.text}`).join(`

`);navigator.clipboard.writeText(g).then(()=>{a.value=-999,setTimeout(()=>{a.value=-1},1500)})}return(g,m)=>(K(),W("div",g0,[h("div",h0,[h("div",y0,[h("div",v0,[m[4]||(m[4]=h("h2",{class:"text-sm font-semibold text-ink-700 mb-3"}," IE + TX ",-1)),It(h("textarea",{"onUpdate:modelValue":m[0]||(m[0]=w=>t.value=w),onBlur:u,class:"w-full h-64 p-3 border border-ink-200 rounded-lg text-sm font-mono resize-y focus:outline-none focus:ring-2 focus:ring-ink-300",placeholder:" PDF  IE  TX..."},null,544),[[Xo,t.value]])]),h("div",b0,[m[13]||(m[13]=h("h2",{class:"text-sm font-semibold text-ink-700"},"",-1)),h("div",w0,[h("div",null,[m[5]||(m[5]=h("label",{class:"text-xs text-ink-500 mb-1 block"},"",-1)),It(h("select",{"onUpdate:modelValue":m[1]||(m[1]=w=>n.value=w),onChange:u,class:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-ink-300"},[(K(),W(Ee,null,_t(l,w=>h("option",{key:w,value:w},G(w),9,x0)),64))],544),[[ys,n.value]])]),h("div",null,[m[6]||(m[6]=h("label",{class:"text-xs text-ink-500 mb-1 block"},"",-1)),It(h("select",{"onUpdate:modelValue":m[2]||(m[2]=w=>s.value=w),onChange:u,class:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-ink-300"},[(K(),W(Ee,null,_t(d,w=>h("option",{key:w,value:w},G(w)+" min",9,P0)),64))],544),[[ys,s.value,void 0,{number:!0}]])])]),r.parseSummary?(K(),W("div",S0,[h("div",T0,[m[7]||(m[7]=h("span",{class:"text-ink-500"},"",-1)),h("span",C0,G(r.parseSummary.laterality)+" "+G(r.parseSummary.bodyPart),1)]),h("div",I0,[m[8]||(m[8]=h("span",{class:"text-ink-500"},"",-1)),h("span",E0,G(r.parseSummary.localPattern),1)]),h("div",_0,[m[9]||(m[9]=h("span",{class:"text-ink-500"},"IE Pain",-1)),h("span",D0,G(r.parseSummary.iePain),1)]),r.parseSummary.lastTxPain!=null?(K(),W("div",A0,[m[10]||(m[10]=h("span",{class:"text-ink-500"}," TX Pain",-1)),h("span",L0,G(r.parseSummary.lastTxPain),1)])):we("",!0),h("div",k0,[m[11]||(m[11]=h("span",{class:"text-ink-500"}," TX",-1)),h("span",N0,G(r.parseSummary.existingTxCount),1)]),h("div",O0,[m[12]||(m[12]=h("span",{class:"text-ink-500"},"",-1)),It(h("input",{type:"number","onUpdate:modelValue":m[3]||(m[3]=w=>i.value=w),min:"1",max:11-r.parseSummary.existingTxCount,class:"w-16 px-2 py-1 border border-ink-200 rounded text-sm text-center focus:outline-none focus:ring-2 focus:ring-ink-300"},null,8,R0),[[Xo,i.value,void 0,{number:!0}]])])])):we("",!0),r.error?(K(),W("div",M0,G(r.error),1)):we("",!0),h("button",{onClick:c,disabled:!r.parseSummary||o.value||i.value<1,class:"w-full py-2.5 bg-ink-800 text-paper-50 rounded-lg text-sm font-medium hover:bg-ink-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors"},G(o.value?"...":` ${i.value||0}  TX`),9,$0)])]),h("div",j0,[r.visits.length===0?(K(),W("div",B0,"  ")):(K(),W("div",F0,[h("div",H0,[h("h2",U0," ("+G(r.visits.length)+"  TX)",1),h("button",{onClick:p,class:"px-3 py-1.5 text-xs border border-ink-200 rounded-lg hover:bg-paper-100 transition-colors"},G(a.value===-999?" ":""),1)]),(K(!0),W(Ee,null,_t(r.visits,(w,x)=>(K(),W("div",{key:w.visitIndex,class:"bg-white rounded-xl border border-ink-200 mb-3"},[h("div",{class:"flex items-center justify-between px-4 py-2.5 border-b border-ink-100 cursor-pointer",onClick:b=>w._open=!w._open},[h("div",K0,[h("span",V0,"TX"+G(w.visitIndex),1),h("span",W0," Pain: "+G(w.state.painScaleCurrent)+"  "+G(w.state.severityLevel),1)]),h("div",q0,[h("button",{onClick:Vn(b=>f(x),["stop"]),class:"px-2.5 py-1 text-xs border border-ink-200 rounded hover:bg-paper-100 transition-colors"},G(a.value===x?"":""),9,z0),(K(),W("svg",{class:_e(["w-4 h-4 text-ink-400 transition-transform",{"rotate-180":w._open}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...m[14]||(m[14]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],8,G0),It(h("div",X0,[h("pre",Y0,G(w.text),1)],512),[[to,w._open]])]))),128))]))])])]))}},J0=kf({history:uf("/"),routes:[{path:"/",name:"checker",component:Ry},{path:"/continue",name:"continue",component:Q0},{path:"/history",name:"history",component:a0}]}),Z0={class:"bg-white border-b border-ink-100 sticky top-0 z-50"},ev={__name:"HeaderBar",setup(e){return(t,n)=>(K(),W("header",Z0,[...n[0]||(n[0]=[Ua('<div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-ink-800 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-paper-50" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><h1 class="font-display text-xl font-semibold text-ink-900 tracking-tight"> AChecker </h1><p class="text-xs text-ink-400 font-medium">AC NOTE CHECK SYSTEM</p></div></div><div class="flex items-center gap-4"><span class="px-2.5 py-1 bg-paper-200 text-ink-500 text-xs font-mono rounded-md"> v1.0 </span><button class="text-ink-400 hover:text-ink-600 transition-colors"><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button></div></div>',1)])]))}},tv={class:"min-h-screen flex flex-col"},nv={class:"border-b border-ink-200 bg-white"},sv={class:"max-w-7xl mx-auto px-6"},iv={class:"flex gap-8"},ov={class:"flex-1"},rv={__name:"App",setup(e){const t=Nf(),n=[{name:"",path:"/"},{name:"",path:"/continue"},{name:"",path:"/history"}];return(s,i)=>{const o=Co("router-link"),r=Co("router-view");return K(),W("div",tv,[Te(ev),h("nav",nv,[h("div",sv,[h("div",iv,[(K(),W(Ee,null,_t(n,a=>Te(o,{key:a.path,to:a.path,class:_e(["py-4 px-1 border-b-2 font-medium text-sm transition-colors",[ue(t).path===a.path?"border-ink-800 text-ink-800":"border-transparent text-ink-500 hover:text-ink-700 hover:border-ink-300"]])},{default:qi(()=>[zt(G(a.name),1)]),_:2},1032,["to","class"])),64))])])]),h("main",ov,[Te(r)]),i[0]||(i[0]=h("footer",{class:"border-t border-ink-100 py-4 mt-auto"},[h("div",{class:"max-w-7xl mx-auto px-6 text-center text-ink-400 text-sm"}," AChecker v1.0  AC NOTE CHECK SYSTEM ")],-1))])}}},lo=gd(rv);lo.use(vd());lo.use(J0);lo.mount("#app");
