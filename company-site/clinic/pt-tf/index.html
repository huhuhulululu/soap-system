<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>天福物理治疗痛症针灸医疗中心 · Login</title>
  <meta name="description" content="Tenfu Plaza Medical Center — Secure login to your claims management and practice dashboard powered by RBMS.">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='6' fill='%232b3c36'/%3E%3Cpath d='M10 16l4 4 8-8' stroke='%23fbf9f5' stroke-width='2.5' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=IBM+Plex+Sans:wght@300;400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            ink: { 50:'#f4f7f6',100:'#e3ebe8',200:'#c7d7d1',300:'#a3bdb3',400:'#7a9e91',500:'#5a8274',600:'#47695d',700:'#3b564d',800:'#324740',900:'#2b3c36',950:'#16211e' },
            paper: { 50:'#fefdfb',100:'#fbf9f5',200:'#f7f3eb',300:'#f0e9dc',400:'#e5d9c5' },
          },
          fontFamily: {
            display: ['Playfair Display','Georgia','serif'],
            sans: ['IBM Plex Sans','system-ui','sans-serif'],
            mono: ['IBM Plex Mono','monospace'],
          }
        }
      }
    }
  </script>
  <style>
    body { font-family: 'IBM Plex Sans', system-ui, sans-serif; }
    .nav-glass { backdrop-filter:blur(20px) saturate(180%); -webkit-backdrop-filter:blur(20px) saturate(180%); }

    /* Grain texture */
    .grain::after {
      content: '';
      position: fixed;
      inset: 0;
      z-index: 9999;
      pointer-events: none;
      opacity: .018;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    }

    /* fadeUp animation */
    .fade-up {
      opacity: 0;
      transform: translateY(24px);
      animation: fadeUp .7s cubic-bezier(.16,1,.3,1) forwards;
    }
    .fade-up-d1 { animation-delay: .08s; }
    .fade-up-d2 { animation-delay: .18s; }
    .fade-up-d3 { animation-delay: .28s; }
    .fade-up-d4 { animation-delay: .38s; }
    .fade-up-d5 { animation-delay: .48s; }

    @keyframes fadeUp {
      to { opacity: 1; transform: translateY(0); }
    }

    /* Subtle dot pattern behind main area */
    .dot-pattern {
      background-image: radial-gradient(circle at 1px 1px, #324740 1px, transparent 0);
      background-size: 40px 40px;
    }

    /* Login button lift */
    .login-btn {
      transition: transform .3s cubic-bezier(.16,1,.3,1), box-shadow .3s ease, background-color .2s ease;
    }
    .login-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px -4px rgba(22,33,30,.2);
    }
    .login-btn:active {
      transform: translateY(0);
    }

    /* Input focus ring */
    .login-input {
      transition: border-color .2s ease, box-shadow .2s ease;
    }
    .login-input:focus {
      border-color: #5a8274;
      box-shadow: 0 0 0 3px rgba(90,130,116,.12);
    }

    /* Password toggle */
    .pw-toggle {
      transition: color .2s ease;
    }
    .pw-toggle:hover {
      color: #324740;
    }

    /* Error shake */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-6px); }
      40%, 80% { transform: translateX(6px); }
    }
    .shake { animation: shake .4s ease; }
  </style>
</head>
<body class="grain bg-paper-50 text-ink-800 antialiased min-h-screen flex flex-col">

  <!-- TOP NAV — RBMS brand bar -->
  <nav class="flex-shrink-0 nav-glass bg-paper-50/85 border-b border-ink-100/60">
    <div class="max-w-4xl mx-auto px-6">
      <div class="flex items-center justify-between h-16 lg:h-[72px]">
        <a href="https://rbmeds.com" class="flex items-center gap-3">
          <div class="w-9 h-9 rounded-lg bg-ink-800 flex items-center justify-center">
            <svg class="w-5 h-5 text-paper-50" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
            </svg>
          </div>
          <div>
            <span class="font-display text-lg font-semibold text-ink-900 tracking-tight">RBMS</span>
            <span class="hidden lg:inline text-xs text-ink-400 ml-1.5 font-mono">Royal Billing</span>
          </div>
        </a>
        <a href="https://rbmeds.com" class="text-sm text-ink-500 hover:text-ink-800 transition-colors font-medium">rbmeds.com ↗</a>
      </div>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="flex-1 flex items-center justify-center py-10 lg:py-16 relative overflow-hidden">
    <!-- Subtle dot pattern -->
    <div class="absolute inset-0 dot-pattern opacity-[0.02]"></div>

    <div class="relative max-w-md mx-auto px-5 w-full">

      <!-- CLIENT BRAND IDENTITY -->
      <div class="text-center mb-8">
        <!-- WHO-style globe+rod logo -->
        <div class="fade-up flex justify-center mb-5">
          <svg class="text-ink-800" viewBox="0 0 64 64" width="56" height="56" fill="none">
            <circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="2.2"/>
            <ellipse cx="32" cy="32" rx="12" ry="28" stroke="currentColor" stroke-width="1.6"/>
            <line x1="4" y1="32" x2="60" y2="32" stroke="currentColor" stroke-width="1.6"/>
            <line x1="32" y1="4" x2="32" y2="60" stroke="currentColor" stroke-width="1.6"/>
            <ellipse cx="32" cy="32" rx="28" ry="10" stroke="currentColor" stroke-width="1.2" opacity="0.5"/>
            <line x1="32" y1="16" x2="32" y2="48" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
            <path d="M32 20 C36 20, 38 23, 38 25 C38 27, 36 29, 32 29 C28 29, 26 31, 26 33 C26 35, 28 37, 32 37" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
          </svg>
        </div>

        <!-- Clinic Chinese name -->
        <h1 class="fade-up fade-up-d1 font-display text-3xl sm:text-4xl font-semibold text-ink-900 leading-tight tracking-tight mb-2">
          天福物理治疗痛症针灸医疗中心
        </h1>

        <!-- Clinic English name -->
        <p class="fade-up fade-up-d2 text-xs font-mono text-ink-400 tracking-[0.15em] uppercase">
          Tenfu Plaza Medical Center
        </p>

        <!-- Divider -->
        <div class="fade-up fade-up-d2 mt-5 mb-3 mx-auto" style="height:1px;max-width:200px;background:linear-gradient(90deg,transparent,#c7d7d1,transparent);"></div>

        <!-- Managed by RBMS -->
        <p class="fade-up fade-up-d2 text-xs text-ink-300 font-mono">Managed by RBMS</p>
      </div>

      <!-- LOGIN CARD -->
      <div class="fade-up fade-up-d3 bg-white rounded-2xl border border-ink-100 shadow-sm shadow-ink-900/[0.04] p-7 sm:p-9">

        <!-- Error display -->
        <div id="error-box" class="hidden mb-5 px-4 py-3 rounded-xl bg-red-50 border border-red-100" role="alert">
          <div class="flex items-start gap-2.5">
            <svg class="w-4 h-4 text-red-500 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"/>
            </svg>
            <p id="error-text" class="text-sm text-red-600 leading-snug"></p>
          </div>
        </div>

        <form id="login-form" method="POST" action="https://rbmeds.com/pt/api/auth/login-redirect" autocomplete="on" novalidate>
          <!-- Hidden fields -->
          <input type="hidden" name="redirect_url" value="https://rbmeds.com/pt/dashboard">
          <input type="hidden" name="error_url" value="https://tf.rbmeds.com/">

          <!-- Username -->
          <div class="mb-4">
            <label for="username" class="block text-xs font-medium text-ink-500 mb-1.5 font-mono">
              Username <span class="text-ink-300">用户名</span>
            </label>
            <input
              id="username"
              name="username"
              type="text"
              required
              autocomplete="username"
              spellcheck="false"
              class="login-input w-full px-4 py-3 text-sm text-ink-900 bg-paper-50 border border-ink-200 rounded-xl focus:outline-none placeholder:text-ink-300"
              placeholder="Enter username"
            >
          </div>

          <!-- Password -->
          <div class="mb-6">
            <label for="password" class="block text-xs font-medium text-ink-500 mb-1.5 font-mono">
              Password <span class="text-ink-300">密码</span>
            </label>
            <div class="relative">
              <input
                id="password"
                name="password"
                type="password"
                required
                autocomplete="current-password"
                class="login-input w-full px-4 py-3 pr-11 text-sm text-ink-900 bg-paper-50 border border-ink-200 rounded-xl focus:outline-none placeholder:text-ink-300"
                placeholder="Enter password"
              >
              <button
                type="button"
                id="pw-toggle"
                class="pw-toggle absolute right-3 top-1/2 -translate-y-1/2 p-1 text-ink-300"
                aria-label="Toggle password visibility"
              >
                <!-- Eye icon (show) -->
                <svg id="eye-open" class="w-4.5 h-4.5" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
                <!-- Eye-off icon (hide) -->
                <svg id="eye-closed" class="hidden w-4.5 h-4.5" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- Submit -->
          <button
            type="submit"
            class="login-btn w-full px-6 py-3.5 text-sm font-semibold text-paper-50 bg-ink-800 rounded-xl hover:bg-ink-700 focus:outline-none focus:ring-2 focus:ring-ink-500 focus:ring-offset-2 focus:ring-offset-paper-50"
          >
            Sign In 登录
          </button>
        </form>
      </div>

      <!-- Help link -->
      <div class="fade-up fade-up-d4 text-center mt-5">
        <p class="text-xs text-ink-400">
          Need help? <a href="https://rbmeds.com/#contact" class="text-ink-500 hover:text-ink-700 underline underline-offset-2 transition-colors">Contact RBMS Support</a>
          <span class="text-ink-300 mx-1">·</span>
          <a href="https://rbmeds.com/#contact" class="text-ink-500 hover:text-ink-700 underline underline-offset-2 transition-colors">联系客服</a>
        </p>
      </div>

    </div>
  </main>

  <!-- FOOTER — trust layer -->
  <footer class="flex-shrink-0 border-t border-ink-100/60 py-5">
    <div class="max-w-4xl mx-auto px-6 flex flex-col sm:flex-row items-center justify-between gap-3">
      <p class="text-xs text-ink-400 font-mono">
        Powered by <span class="text-ink-500">RBMS</span> · Royal Billing Management Service
      </p>
      <div class="flex items-center gap-1.5 text-xs text-ink-400">
        <svg class="w-3 h-3 text-ink-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"/>
        </svg>
        <span>Secure Platform</span>
      </div>
    </div>
  </footer>

  <script>
    (function() {
      // --- Error handling from URL ?error param ---
      var params = new URLSearchParams(window.location.search);
      var errorParam = params.get('error');

      if (errorParam) {
        var messages = {
          'invalid_credentials': 'Invalid username or password. Please try again.\n用户名或密码错误，请重试。',
          'account_locked': 'Account temporarily locked. Please try again later.\n账户已暂时锁定，请稍后重试。',
          'session_expired': 'Session expired. Please sign in again.\n会话已过期，请重新登录。',
        };

        var errorBox = document.getElementById('error-box');
        var errorText = document.getElementById('error-text');
        var card = errorBox.closest('.bg-white');

        errorText.textContent = messages[errorParam] || decodeURIComponent(errorParam);
        errorBox.classList.remove('hidden');

        if (card) {
          card.classList.add('shake');
          card.addEventListener('animationend', function() { card.classList.remove('shake'); }, { once: true });
        }

        // Clean URL without reload
        var cleanUrl = window.location.protocol + '//' + window.location.host + window.location.pathname;
        window.history.replaceState({}, document.title, cleanUrl);
      }

      // --- Password show/hide toggle ---
      var pwInput = document.getElementById('password');
      var pwToggle = document.getElementById('pw-toggle');
      var eyeOpen = document.getElementById('eye-open');
      var eyeClosed = document.getElementById('eye-closed');

      pwToggle.addEventListener('click', function() {
        var isPassword = pwInput.type === 'password';
        pwInput.type = isPassword ? 'text' : 'password';
        eyeOpen.classList.toggle('hidden', isPassword);
        eyeClosed.classList.toggle('hidden', !isPassword);
        pwInput.focus();
      });

      // --- Basic client-side validation ---
      var form = document.getElementById('login-form');
      form.addEventListener('submit', function(e) {
        var username = document.getElementById('username').value.trim();
        var password = document.getElementById('password').value;

        if (!username || !password) {
          e.preventDefault();
          var errorBox = document.getElementById('error-box');
          var errorText = document.getElementById('error-text');
          errorText.textContent = 'Please fill in all fields. 请填写所有字段。';
          errorBox.classList.remove('hidden');

          var card = errorBox.closest('.bg-white');
          if (card) {
            card.classList.add('shake');
            card.addEventListener('animationend', function() { card.classList.remove('shake'); }, { once: true });
          }
        }
      });
    })();
  </script>

</body>
</html>
