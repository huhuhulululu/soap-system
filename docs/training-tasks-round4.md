# 四代理训练任务（Round 4）

## 目标

- 模拟真实上线流程，验证四角色在发布压力下仍能守住规则与质量。
- 完成灰度、回滚、事后审计三段闭环。

## 本轮重点机制

1. 发布前必须有审计放行单。
2. 采用分批灰度（10% -> 50% -> 100%）。
3. 任一关键规则告警触发自动回滚演练。

## 12 个任务（Round 4）

1. 规则掌握者：发布 `R1.2`（仅允许小幅规则调整），并标注高风险规则。
2. 编写者：实现一个上线候选改动，限定在一个主链路目标。
3. 检查者：对候选改动做发布前核验，输出阻断项。
4. 审计员：签发“发布前放行单”或驳回并列出返工项。
5. 编写者：准备灰度监控指标（单调性/SOA/SOAP 完整性失败率）。
6. 检查者：执行灰度 10% 验证并记录样本结果。
7. 审计员：根据 10% 结果决定是否升至 50%。
8. 检查者：执行 50% 验证，重点看边界样本与历史高风险点。
9. 审计员：触发一次“回滚演练”（即使无故障也要演练）。
10. 编写者：执行回滚步骤并验证系统恢复到上个稳定版本。
11. 检查者：回滚后跑全量回归，确认无残留问题。
12. 审计员：发布“上线后审计报告”（是否可全量 + 后续风险）。

## 本轮放行条件

- 审计放行单存在且无未关闭阻断项。
- 灰度 10% 与 50% 阶段关键指标均达标。
- 回滚演练成功且可复现。
- 回归全绿：
  - `cd frontend && npm test`
  - `cd frontend && BULK_SEED_COUNT=100 npx vitest run engine-random`

