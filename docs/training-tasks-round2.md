# 四代理训练任务（Round 2）

## 目标

- 让四角色从“能跑通流程”升级到“能稳定处理变更与故障”。
- 强化三件事：规则变更控制、回归失败复盘、审计阻断。

## 本轮新增机制

1. 规则版本从 `R1` 升级到 `R1.1`，必须附变更单（新增/修改/废弃）。
2. 每次红测必须出复盘卡（根因、影响面、修复、预防）。
3. 审计员对“证据缺失、规则漂移、回归未跑”直接 `reject`。

## 12 个任务（Round 2）

1. 规则掌握者：发布 `R1.1` 变更单，至少包含 3 条规则变更及原因。
2. 编写者：实现 1 个与 `R1.1` 相关的最小功能改动（仅一个目标）。
3. 检查者：按 `R1.1` 逐条核验改动，输出违规清单（按严重级别）。
4. 审计员：检查“规则先冻结后开发”是否被破坏，给 `pass/reject`。
5. 编写者：引入 1 个可控故障样例（仅测试环境）并提交修复方案。
6. 检查者：验证该故障是否可复现、修复后是否关闭。
7. 规则掌握者：更新“禁改项”并标注受影响文件。
8. 编写者：完成 1 次跨页面字段一致性修复（`/writer` 与 `/continue`）。
9. 检查者：执行回归并记录：`npm test` + `BULK_SEED_COUNT=100`。
10. 审计员：对第 8-9 步进行证据审计，确认是否满足放行门槛。
11. 编写者：针对检查者最高优先级问题做最小修复并补测试。
12. 审计员：发布本轮结论（放行/驳回）+ 必改清单。

## 回归失败复盘卡（模板）

```text
[postmortem]
rule_version: R1.1
failed_test: <test name>
symptom: <现象>
root_cause: <根因>
blast_radius: <影响范围>
fix: <修复动作>
prevention: <预防措施>
owner: <role>
status: open/closed
```

## 本轮放行条件

- 规则版本与实现版本一致（无漂移）。
- 所有 `critical/high` 违规项关闭。
- 回归命令全绿：
  - `cd frontend && npm test`
  - `cd frontend && BULK_SEED_COUNT=100 npx vitest run engine-random`
- 审计证据链完整（规则、改动、检查、测试、结论可追溯）。

